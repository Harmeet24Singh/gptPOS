"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/credit/accounts/route";
exports.ids = ["app/api/credit/accounts/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcredit%2Faccounts%2Froute&page=%2Fapi%2Fcredit%2Faccounts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcredit%2Faccounts%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcredit%2Faccounts%2Froute&page=%2Fapi%2Fcredit%2Faccounts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcredit%2Faccounts%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_harmeetsingh_Documents_harmeet24singhGIT_gptPOS_app_api_credit_accounts_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/credit/accounts/route.js */ \"(rsc)/./app/api/credit/accounts/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/credit/accounts/route\",\n        pathname: \"/api/credit/accounts\",\n        filename: \"route\",\n        bundlePath: \"app/api/credit/accounts/route\"\n    },\n    resolvedPagePath: \"/Users/harmeetsingh/Documents/harmeet24singhGIT/gptPOS/app/api/credit/accounts/route.js\",\n    nextConfigOutput,\n    userland: _Users_harmeetsingh_Documents_harmeet24singhGIT_gptPOS_app_api_credit_accounts_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/credit/accounts/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjcmVkaXQlMkZhY2NvdW50cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY3JlZGl0JTJGYWNjb3VudHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjcmVkaXQlMkZhY2NvdW50cyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRmhhcm1lZXRzaW5naCUyRkRvY3VtZW50cyUyRmhhcm1lZXQyNHNpbmdoR0lUJTJGZ3B0UE9TJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmhhcm1lZXRzaW5naCUyRkRvY3VtZW50cyUyRmhhcm1lZXQyNHNpbmdoR0lUJTJGZ3B0UE9TJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QztBQUNwSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlbmllbmNlLXN0b3JlLWludmVudG9yeS8/YzU2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvaGFybWVldHNpbmdoL0RvY3VtZW50cy9oYXJtZWV0MjRzaW5naEdJVC9ncHRQT1MvYXBwL2FwaS9jcmVkaXQvYWNjb3VudHMvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NyZWRpdC9hY2NvdW50cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NyZWRpdC9hY2NvdW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY3JlZGl0L2FjY291bnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2hhcm1lZXRzaW5naC9Eb2N1bWVudHMvaGFybWVldDI0c2luZ2hHSVQvZ3B0UE9TL2FwcC9hcGkvY3JlZGl0L2FjY291bnRzL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jcmVkaXQvYWNjb3VudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcredit%2Faccounts%2Froute&page=%2Fapi%2Fcredit%2Faccounts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcredit%2Faccounts%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/credit/accounts/route.js":
/*!******************************************!*\
  !*** ./app/api/credit/accounts/route.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nconst mongo = __webpack_require__(/*! ../../../../server/mongo */ \"(rsc)/./server/mongo.js\");\nasync function GET(req) {\n    try {\n        // Skip authentication for frontend access\n        // const { checkApiKey } = require(\"../../../../server/auth\");\n        // if (!checkApiKey(req)) {\n        //   return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n        // }\n        const url = new URL(req.url);\n        const search = url.searchParams.get(\"search\");\n        const includeInactive = url.searchParams.get(\"includeInactive\") === \"true\";\n        let accounts;\n        if (search && search.trim().length >= 1) {\n            // Search for specific accounts\n            accounts = await mongo.searchCreditAccounts(search, includeInactive);\n        } else {\n            // Get all accounts\n            accounts = await mongo.getCreditAccounts();\n            if (!includeInactive) {\n                accounts = accounts.filter((account)=>account.isActive !== false);\n            }\n        }\n        // Filter out accounts with zero balance unless specifically requested\n        const showZeroBalances = url.searchParams.get(\"showZeroBalances\") === \"true\";\n        if (!showZeroBalances) {\n            accounts = accounts.filter((account)=>Number(account.balance || 0) > 0);\n        }\n        // Calculate summary statistics\n        const summary = {\n            totalAccounts: accounts.length,\n            totalBalance: accounts.reduce((sum, account)=>sum + Number(account.balance || 0), 0),\n            activeAccounts: accounts.filter((account)=>account.isActive !== false).length,\n            accountsWithBalance: accounts.filter((account)=>Number(account.balance || 0) > 0).length\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            accounts,\n            summary\n        });\n    } catch (err) {\n        console.error(\"GET /api/credit/accounts error\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch credit accounts\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(req) {\n    try {\n        // Skip authentication for frontend access\n        // const { checkApiKey } = require(\"../../../../server/auth\");\n        // if (!checkApiKey(req)) {\n        //   return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n        // }\n        const body = await req.json();\n        // Check if this is an addCredit action from POS\n        if (body.action === \"addCredit\") {\n            const { customerName, amount, transactionId } = body;\n            if (!customerName || !customerName.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Customer name is required\"\n                }, {\n                    status: 400\n                });\n            }\n            if (!amount || amount <= 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Valid credit amount is required\"\n                }, {\n                    status: 400\n                });\n            }\n            // Add credit to customer account (creates account if it doesn't exist)\n            const account = await mongo.addToCreditAccount(customerName.trim(), Number(amount), transactionId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: `Added $${Number(amount).toFixed(2)} to ${customerName.trim()}'s credit account`,\n                account\n            });\n        }\n        // Check if this is a payment action from POS\n        if (body.action === \"payment\") {\n            const { customerName, amount } = body;\n            if (!customerName || !customerName.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Customer name is required\"\n                }, {\n                    status: 400\n                });\n            }\n            if (!amount || amount <= 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Valid payment amount is required\"\n                }, {\n                    status: 400\n                });\n            }\n            try {\n                // Process payment on customer account\n                const result = await mongo.payToCreditAccount(customerName.trim(), Number(amount));\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: `Payment of $${Number(amount).toFixed(2)} processed for ${customerName.trim()}`,\n                    ...result\n                });\n            } catch (error) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: error.message\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Default account creation/update logic\n        const { customerName, balance = 0, phone = \"\", email = \"\", address = \"\", notes = \"\", isActive = true } = body;\n        if (!customerName || !customerName.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Customer name is required\"\n            }, {\n                status: 400\n            });\n        }\n        const account = await mongo.upsertCreditAccount({\n            customerName: customerName.trim(),\n            balance: Number(balance),\n            phone: phone.trim(),\n            email: email.trim(),\n            address: address.trim(),\n            notes: notes.trim(),\n            isActive: Boolean(isActive),\n            transactionCount: 0,\n            lastTransactionDate: new Date()\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            account\n        });\n    } catch (err) {\n        console.error(\"POST /api/credit/accounts error\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || \"Failed to process credit account request\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(req) {\n    try {\n        const { checkApiKey } = __webpack_require__(/*! ../../../../server/auth */ \"(rsc)/./server/auth.js\");\n        if (!checkApiKey(req)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await req.json();\n        const { customerName, balance, phone, email, address, notes, isActive } = body;\n        if (!customerName || !customerName.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Customer name is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get existing account to preserve data\n        const existingAccount = await mongo.getCreditAccountByName(customerName);\n        if (!existingAccount) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Credit account not found\"\n            }, {\n                status: 404\n            });\n        }\n        const account = await mongo.upsertCreditAccount({\n            customerName: customerName.trim(),\n            balance: balance !== undefined ? Number(balance) : existingAccount.balance,\n            phone: phone !== undefined ? phone.trim() : existingAccount.phone,\n            email: email !== undefined ? email.trim() : existingAccount.email,\n            address: address !== undefined ? address.trim() : existingAccount.address,\n            notes: notes !== undefined ? notes.trim() : existingAccount.notes,\n            isActive: isActive !== undefined ? Boolean(isActive) : existingAccount.isActive,\n            transactionCount: existingAccount.transactionCount,\n            lastTransactionDate: existingAccount.lastTransactionDate\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            account\n        });\n    } catch (err) {\n        console.error(\"PUT /api/credit/accounts error\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || \"Failed to update credit account\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE7WUFDL0VrQyxrQkFBa0JLLGdCQUFnQkwsZ0JBQWdCO1lBQ2xEQyxxQkFBcUJJLGdCQUFnQkosbUJBQW1CO1FBQzFEO1FBRUEsT0FBT3JELHFEQUFZQSxDQUFDNkIsSUFBSSxDQUFDO1lBQ3ZCWSxTQUFTO1lBQ1R4QjtRQUNGO0lBRUYsRUFBRSxPQUFPYSxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxrQ0FBa0NGO1FBQ2hELE9BQU85QixxREFBWUEsQ0FBQzZCLElBQUksQ0FBQztZQUFFRyxPQUFPRixJQUFJWSxPQUFPLElBQUk7UUFBa0MsR0FBRztZQUFFVCxRQUFRO1FBQUk7SUFDdEc7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlbmllbmNlLXN0b3JlLWludmVudG9yeS8uL2FwcC9hcGkvY3JlZGl0L2FjY291bnRzL3JvdXRlLmpzP2M2MDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5jb25zdCBtb25nbyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL3NlcnZlci9tb25nbycpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcSkge1xuICB0cnkge1xuICAgIC8vIFNraXAgYXV0aGVudGljYXRpb24gZm9yIGZyb250ZW5kIGFjY2Vzc1xuICAgIC8vIGNvbnN0IHsgY2hlY2tBcGlLZXkgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9zZXJ2ZXIvYXV0aFwiKTtcbiAgICAvLyBpZiAoIWNoZWNrQXBpS2V5KHJlcSkpIHtcbiAgICAvLyAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgLy8gfVxuXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBzZWFyY2ggPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcInNlYXJjaFwiKTtcbiAgICBjb25zdCBpbmNsdWRlSW5hY3RpdmUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImluY2x1ZGVJbmFjdGl2ZVwiKSA9PT0gXCJ0cnVlXCI7XG5cbiAgICBsZXQgYWNjb3VudHM7XG4gICAgXG4gICAgaWYgKHNlYXJjaCAmJiBzZWFyY2gudHJpbSgpLmxlbmd0aCA+PSAxKSB7XG4gICAgICAvLyBTZWFyY2ggZm9yIHNwZWNpZmljIGFjY291bnRzXG4gICAgICBhY2NvdW50cyA9IGF3YWl0IG1vbmdvLnNlYXJjaENyZWRpdEFjY291bnRzKHNlYXJjaCwgaW5jbHVkZUluYWN0aXZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR2V0IGFsbCBhY2NvdW50c1xuICAgICAgYWNjb3VudHMgPSBhd2FpdCBtb25nby5nZXRDcmVkaXRBY2NvdW50cygpO1xuICAgICAgXG4gICAgICBpZiAoIWluY2x1ZGVJbmFjdGl2ZSkge1xuICAgICAgICBhY2NvdW50cyA9IGFjY291bnRzLmZpbHRlcihhY2NvdW50ID0+IGFjY291bnQuaXNBY3RpdmUgIT09IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGFjY291bnRzIHdpdGggemVybyBiYWxhbmNlIHVubGVzcyBzcGVjaWZpY2FsbHkgcmVxdWVzdGVkXG4gICAgY29uc3Qgc2hvd1plcm9CYWxhbmNlcyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic2hvd1plcm9CYWxhbmNlc1wiKSA9PT0gXCJ0cnVlXCI7XG4gICAgaWYgKCFzaG93WmVyb0JhbGFuY2VzKSB7XG4gICAgICBhY2NvdW50cyA9IGFjY291bnRzLmZpbHRlcihhY2NvdW50ID0+IE51bWJlcihhY2NvdW50LmJhbGFuY2UgfHwgMCkgPiAwKTtcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgc3VtbWFyeSBzdGF0aXN0aWNzXG4gICAgY29uc3Qgc3VtbWFyeSA9IHtcbiAgICAgIHRvdGFsQWNjb3VudHM6IGFjY291bnRzLmxlbmd0aCxcbiAgICAgIHRvdGFsQmFsYW5jZTogYWNjb3VudHMucmVkdWNlKChzdW0sIGFjY291bnQpID0+IHN1bSArIE51bWJlcihhY2NvdW50LmJhbGFuY2UgfHwgMCksIDApLFxuICAgICAgYWN0aXZlQWNjb3VudHM6IGFjY291bnRzLmZpbHRlcihhY2NvdW50ID0+IGFjY291bnQuaXNBY3RpdmUgIT09IGZhbHNlKS5sZW5ndGgsXG4gICAgICBhY2NvdW50c1dpdGhCYWxhbmNlOiBhY2NvdW50cy5maWx0ZXIoYWNjb3VudCA9PiBOdW1iZXIoYWNjb3VudC5iYWxhbmNlIHx8IDApID4gMCkubGVuZ3RoXG4gICAgfTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBhY2NvdW50cyxcbiAgICAgIHN1bW1hcnlcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR0VUIC9hcGkvY3JlZGl0L2FjY291bnRzIGVycm9yXCIsIGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIGNyZWRpdCBhY2NvdW50c1wiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxKSB7XG4gIHRyeSB7XG4gICAgLy8gU2tpcCBhdXRoZW50aWNhdGlvbiBmb3IgZnJvbnRlbmQgYWNjZXNzXG4gICAgLy8gY29uc3QgeyBjaGVja0FwaUtleSB9ID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3NlcnZlci9hdXRoXCIpO1xuICAgIC8vIGlmICghY2hlY2tBcGlLZXkocmVxKSkge1xuICAgIC8vICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICAvLyB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGFkZENyZWRpdCBhY3Rpb24gZnJvbSBQT1NcbiAgICBpZiAoYm9keS5hY3Rpb24gPT09ICdhZGRDcmVkaXQnKSB7XG4gICAgICBjb25zdCB7IGN1c3RvbWVyTmFtZSwgYW1vdW50LCB0cmFuc2FjdGlvbklkIH0gPSBib2R5O1xuICAgICAgXG4gICAgICBpZiAoIWN1c3RvbWVyTmFtZSB8fCAhY3VzdG9tZXJOYW1lLnRyaW0oKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJDdXN0b21lciBuYW1lIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVmFsaWQgY3JlZGl0IGFtb3VudCBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBjcmVkaXQgdG8gY3VzdG9tZXIgYWNjb3VudCAoY3JlYXRlcyBhY2NvdW50IGlmIGl0IGRvZXNuJ3QgZXhpc3QpXG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgbW9uZ28uYWRkVG9DcmVkaXRBY2NvdW50KGN1c3RvbWVyTmFtZS50cmltKCksIE51bWJlcihhbW91bnQpLCB0cmFuc2FjdGlvbklkKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYEFkZGVkICQke051bWJlcihhbW91bnQpLnRvRml4ZWQoMil9IHRvICR7Y3VzdG9tZXJOYW1lLnRyaW0oKX0ncyBjcmVkaXQgYWNjb3VudGAsXG4gICAgICAgIGFjY291bnRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBwYXltZW50IGFjdGlvbiBmcm9tIFBPU1xuICAgIGlmIChib2R5LmFjdGlvbiA9PT0gJ3BheW1lbnQnKSB7XG4gICAgICBjb25zdCB7IGN1c3RvbWVyTmFtZSwgYW1vdW50IH0gPSBib2R5O1xuICAgICAgXG4gICAgICBpZiAoIWN1c3RvbWVyTmFtZSB8fCAhY3VzdG9tZXJOYW1lLnRyaW0oKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJDdXN0b21lciBuYW1lIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVmFsaWQgcGF5bWVudCBhbW91bnQgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBQcm9jZXNzIHBheW1lbnQgb24gY3VzdG9tZXIgYWNjb3VudFxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb25nby5wYXlUb0NyZWRpdEFjY291bnQoY3VzdG9tZXJOYW1lLnRyaW0oKSwgTnVtYmVyKGFtb3VudCkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBQYXltZW50IG9mICQke051bWJlcihhbW91bnQpLnRvRml4ZWQoMil9IHByb2Nlc3NlZCBmb3IgJHtjdXN0b21lck5hbWUudHJpbSgpfWAsXG4gICAgICAgICAgLi4ucmVzdWx0XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IGFjY291bnQgY3JlYXRpb24vdXBkYXRlIGxvZ2ljXG4gICAgY29uc3QgeyBjdXN0b21lck5hbWUsIGJhbGFuY2UgPSAwLCBwaG9uZSA9ICcnLCBlbWFpbCA9ICcnLCBhZGRyZXNzID0gJycsIG5vdGVzID0gJycsIGlzQWN0aXZlID0gdHJ1ZSB9ID0gYm9keTtcblxuICAgIGlmICghY3VzdG9tZXJOYW1lIHx8ICFjdXN0b21lck5hbWUudHJpbSgpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJDdXN0b21lciBuYW1lIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgbW9uZ28udXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZS50cmltKCksXG4gICAgICBiYWxhbmNlOiBOdW1iZXIoYmFsYW5jZSksXG4gICAgICBwaG9uZTogcGhvbmUudHJpbSgpLFxuICAgICAgZW1haWw6IGVtYWlsLnRyaW0oKSxcbiAgICAgIGFkZHJlc3M6IGFkZHJlc3MudHJpbSgpLFxuICAgICAgbm90ZXM6IG5vdGVzLnRyaW0oKSxcbiAgICAgIGlzQWN0aXZlOiBCb29sZWFuKGlzQWN0aXZlKSxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IDAsXG4gICAgICBsYXN0VHJhbnNhY3Rpb25EYXRlOiBuZXcgRGF0ZSgpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBhY2NvdW50XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlBPU1QgL2FwaS9jcmVkaXQvYWNjb3VudHMgZXJyb3JcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gcHJvY2VzcyBjcmVkaXQgYWNjb3VudCByZXF1ZXN0XCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgY2hlY2tBcGlLZXkgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9zZXJ2ZXIvYXV0aFwiKTtcbiAgICBpZiAoIWNoZWNrQXBpS2V5KHJlcSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgY29uc3QgeyBjdXN0b21lck5hbWUsIGJhbGFuY2UsIHBob25lLCBlbWFpbCwgYWRkcmVzcywgbm90ZXMsIGlzQWN0aXZlIH0gPSBib2R5O1xuXG4gICAgaWYgKCFjdXN0b21lck5hbWUgfHwgIWN1c3RvbWVyTmFtZS50cmltKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkN1c3RvbWVyIG5hbWUgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBleGlzdGluZyBhY2NvdW50IHRvIHByZXNlcnZlIGRhdGFcbiAgICBjb25zdCBleGlzdGluZ0FjY291bnQgPSBhd2FpdCBtb25nby5nZXRDcmVkaXRBY2NvdW50QnlOYW1lKGN1c3RvbWVyTmFtZSk7XG4gICAgaWYgKCFleGlzdGluZ0FjY291bnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkNyZWRpdCBhY2NvdW50IG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IG1vbmdvLnVwc2VydENyZWRpdEFjY291bnQoe1xuICAgICAgY3VzdG9tZXJOYW1lOiBjdXN0b21lck5hbWUudHJpbSgpLFxuICAgICAgYmFsYW5jZTogYmFsYW5jZSAhPT0gdW5kZWZpbmVkID8gTnVtYmVyKGJhbGFuY2UpIDogZXhpc3RpbmdBY2NvdW50LmJhbGFuY2UsXG4gICAgICBwaG9uZTogcGhvbmUgIT09IHVuZGVmaW5lZCA/IHBob25lLnRyaW0oKSA6IGV4aXN0aW5nQWNjb3VudC5waG9uZSxcbiAgICAgIGVtYWlsOiBlbWFpbCAhPT0gdW5kZWZpbmVkID8gZW1haWwudHJpbSgpIDogZXhpc3RpbmdBY2NvdW50LmVtYWlsLFxuICAgICAgYWRkcmVzczogYWRkcmVzcyAhPT0gdW5kZWZpbmVkID8gYWRkcmVzcy50cmltKCkgOiBleGlzdGluZ0FjY291bnQuYWRkcmVzcyxcbiAgICAgIG5vdGVzOiBub3RlcyAhPT0gdW5kZWZpbmVkID8gbm90ZXMudHJpbSgpIDogZXhpc3RpbmdBY2NvdW50Lm5vdGVzLFxuICAgICAgaXNBY3RpdmU6IGlzQWN0aXZlICE9PSB1bmRlZmluZWQgPyBCb29sZWFuKGlzQWN0aXZlKSA6IGV4aXN0aW5nQWNjb3VudC5pc0FjdGl2ZSxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IGV4aXN0aW5nQWNjb3VudC50cmFuc2FjdGlvbkNvdW50LFxuICAgICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTogZXhpc3RpbmdBY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGVcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGFjY291bnRcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUFVUIC9hcGkvY3JlZGl0L2FjY291bnRzIGVycm9yXCIsIGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIHx8IFwiRmFpbGVkIHRvIHVwZGF0ZSBjcmVkaXQgYWNjb3VudFwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibW9uZ28iLCJyZXF1aXJlIiwiR0VUIiwicmVxIiwidXJsIiwiVVJMIiwic2VhcmNoIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiaW5jbHVkZUluYWN0aXZlIiwiYWNjb3VudHMiLCJ0cmltIiwibGVuZ3RoIiwic2VhcmNoQ3JlZGl0QWNjb3VudHMiLCJnZXRDcmVkaXRBY2NvdW50cyIsImZpbHRlciIsImFjY291bnQiLCJpc0FjdGl2ZSIsInNob3daZXJvQmFsYW5jZXMiLCJOdW1iZXIiLCJiYWxhbmNlIiwic3VtbWFyeSIsInRvdGFsQWNjb3VudHMiLCJ0b3RhbEJhbGFuY2UiLCJyZWR1Y2UiLCJzdW0iLCJhY3RpdmVBY2NvdW50cyIsImFjY291bnRzV2l0aEJhbGFuY2UiLCJqc29uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJhY3Rpb24iLCJjdXN0b21lck5hbWUiLCJhbW91bnQiLCJ0cmFuc2FjdGlvbklkIiwiYWRkVG9DcmVkaXRBY2NvdW50Iiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJ0b0ZpeGVkIiwicmVzdWx0IiwicGF5VG9DcmVkaXRBY2NvdW50IiwicGhvbmUiLCJlbWFpbCIsImFkZHJlc3MiLCJub3RlcyIsInVwc2VydENyZWRpdEFjY291bnQiLCJCb29sZWFuIiwidHJhbnNhY3Rpb25Db3VudCIsImxhc3RUcmFuc2FjdGlvbkRhdGUiLCJEYXRlIiwiUFVUIiwiY2hlY2tBcGlLZXkiLCJleGlzdGluZ0FjY291bnQiLCJnZXRDcmVkaXRBY2NvdW50QnlOYW1lIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/credit/accounts/route.js\n");

/***/ }),

/***/ "(rsc)/./server/auth.js":
/*!************************!*\
  !*** ./server/auth.js ***!
  \************************/
/***/ ((module) => {

eval("// Simple API key check for write endpoints. For local dev we default to 'dev-secret'.\n\nconst API_KEY = process.env.API_KEY || \"dev-secret\";\nfunction checkApiKey(req) {\n    // `req` is a Next.js Request in route handlers\n    try {\n        const headerVal = req.headers && typeof req.headers.get === \"function\" ? req.headers.get(\"x-api-key\") : null;\n        return headerVal === API_KEY;\n    } catch (e) {\n        return false;\n    }\n}\nmodule.exports = {\n    API_KEY,\n    checkApiKey\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxzRkFBc0Y7O0FBQ3RGLE1BQU1BLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0YsT0FBTyxJQUFJO0FBRXZDLFNBQVNHLFlBQVlDLEdBQUc7SUFDdEIsK0NBQStDO0lBQy9DLElBQUk7UUFDRixNQUFNQyxZQUNKRCxJQUFJRSxPQUFPLElBQUksT0FBT0YsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLEtBQUssYUFDdENILElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQ2hCO1FBQ04sT0FBT0YsY0FBY0w7SUFDdkIsRUFBRSxPQUFPUSxHQUFHO1FBQ1YsT0FBTztJQUNUO0FBQ0Y7QUFFQUMsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZWO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZW5pZW5jZS1zdG9yZS1pbnZlbnRvcnkvLi9zZXJ2ZXIvYXV0aC5qcz9kY2IzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBBUEkga2V5IGNoZWNrIGZvciB3cml0ZSBlbmRwb2ludHMuIEZvciBsb2NhbCBkZXYgd2UgZGVmYXVsdCB0byAnZGV2LXNlY3JldCcuXG5jb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuQVBJX0tFWSB8fCBcImRldi1zZWNyZXRcIjtcblxuZnVuY3Rpb24gY2hlY2tBcGlLZXkocmVxKSB7XG4gIC8vIGByZXFgIGlzIGEgTmV4dC5qcyBSZXF1ZXN0IGluIHJvdXRlIGhhbmRsZXJzXG4gIHRyeSB7XG4gICAgY29uc3QgaGVhZGVyVmFsID1cbiAgICAgIHJlcS5oZWFkZXJzICYmIHR5cGVvZiByZXEuaGVhZGVycy5nZXQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IHJlcS5oZWFkZXJzLmdldChcIngtYXBpLWtleVwiKVxuICAgICAgICA6IG51bGw7XG4gICAgcmV0dXJuIGhlYWRlclZhbCA9PT0gQVBJX0tFWTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQVBJX0tFWSxcbiAgY2hlY2tBcGlLZXksXG59O1xuIl0sIm5hbWVzIjpbIkFQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiY2hlY2tBcGlLZXkiLCJyZXEiLCJoZWFkZXJWYWwiLCJoZWFkZXJzIiwiZ2V0IiwiZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./server/auth.js\n");

/***/ }),

/***/ "(rsc)/./server/mongo.js":
/*!*************************!*\
  !*** ./server/mongo.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { MongoClient } = __webpack_require__(/*! mongodb */ \"mongodb\");\nconst url = process.env.MONGO_URI || \"mongodb://localhost:27017\";\nconst dbName = process.env.MONGO_DB || \"convenience_store\";\nlet _client = null;\nlet _db = null;\nasync function connect() {\n    if (_db) return _db;\n    if (!_client) {\n        _client = new MongoClient(url, {\n            useUnifiedTopology: true\n        });\n        await _client.connect();\n    }\n    _db = _client.db(dbName);\n    // Ensure indexes\n    try {\n        await _db.collection(\"inventory\").createIndex({\n            id: 1\n        }, {\n            unique: true\n        });\n        await _db.collection(\"users\").createIndex({\n            id: 1\n        }, {\n            unique: true,\n            sparse: true\n        });\n        await _db.collection(\"users\").createIndex({\n            username: 1\n        }, {\n            unique: true\n        });\n    } catch (e) {\n    // ignore index errors\n    }\n    return _db;\n}\n// Inventory helpers\nasync function getAllInventory() {\n    const db = await connect();\n    return db.collection(\"inventory\").find({}).sort({\n        name: 1\n    }).toArray();\n}\nasync function getInventoryById(id) {\n    const db = await connect();\n    const n = Number(id);\n    return db.collection(\"inventory\").findOne({\n        id: n\n    });\n}\nasync function upsertInventoryItems(items) {\n    if (!Array.isArray(items)) items = [\n        items\n    ];\n    console.log(\"upsertInventoryItems called with:\", items.length, \"items\");\n    const db = await connect();\n    const ops = items.map((it, index)=>{\n        console.log(`Processing item ${index} for upsert:`, JSON.stringify(it, null, 2));\n        // Validate and convert ID\n        let itemId = undefined;\n        if (it.id !== undefined && it.id !== null) {\n            itemId = Number(it.id);\n            if (isNaN(itemId)) {\n                console.error(`Invalid ID for item ${index}:`, it.id);\n                throw new Error(`Invalid ID: ${it.id}`);\n            }\n            console.log(`Item ${index} has valid numeric ID:`, itemId);\n        } else {\n            console.log(`Item ${index} has no ID, will be auto-generated`);\n        }\n        const obj = {\n            id: itemId,\n            name: it.name || \"\",\n            category: it.category || \"\",\n            price: Number(it.price || 0),\n            stock: Number(it.stock || 0),\n            lowStockThreshold: Number(it.lowStockThreshold || 0),\n            taxable: !!it.taxable,\n            barcode: it.barcode || (itemId ? itemId.toString() : null)\n        };\n        // Add barcode2 if provided\n        if (it.barcode2) {\n            obj.barcode2 = it.barcode2;\n        }\n        // Only add productId if it's provided, to avoid null constraint issues\n        if (it.productId) {\n            obj.productId = it.productId;\n        } else if (itemId) {\n            obj.productId = itemId.toString(); // Use ID as productId for new items\n        }\n        // Validate required fields\n        if (!obj.name) {\n            throw new Error(`Item name is required for item ${index}`);\n        }\n        // remove undefined id to let upsert use provided id or create one\n        if (obj.id === undefined) delete obj.id;\n        const filter = obj.id !== undefined ? {\n            id: obj.id\n        } : {\n            name: obj.name\n        };\n        console.log(`=== MONGODB UPSERT OPERATION ${index} ===`);\n        console.log(\"Filter:\", JSON.stringify(filter, null, 2));\n        console.log(\"Update document:\", JSON.stringify(obj, null, 2));\n        console.log(`Item ${index} filter:`, filter);\n        console.log(`Item ${index} object:`, obj);\n        return {\n            updateOne: {\n                filter,\n                update: {\n                    $set: obj\n                },\n                upsert: true\n            }\n        };\n    });\n    if (ops.length === 0) {\n        console.log(\"No operations to perform\");\n        return;\n    }\n    console.log(\"Executing bulkWrite with\", ops.length, \"operations\");\n    try {\n        const result = await db.collection(\"inventory\").bulkWrite(ops);\n        console.log(\"BulkWrite result:\", result);\n    } catch (error) {\n        console.error(\"BulkWrite error:\", error);\n        // If it's a duplicate key error on productId, try to handle it gracefully\n        if (error.code === 11000 && error.message.includes(\"productId\")) {\n            console.log(\"Detected productId duplicate key error, attempting individual upserts...\");\n            // Try each item individually with unique productId generation\n            for(let i = 0; i < items.length; i++){\n                const item = items[i];\n                try {\n                    const itemWithUniqueProductId = {\n                        ...item,\n                        productId: item.productId || `${item.id || Date.now()}-${i}`\n                    };\n                    const filter = item.id ? {\n                        id: item.id\n                    } : {\n                        name: item.name\n                    };\n                    await db.collection(\"inventory\").updateOne(filter, {\n                        $set: itemWithUniqueProductId\n                    }, {\n                        upsert: true\n                    });\n                    console.log(`Successfully upserted item ${i} with unique productId`);\n                } catch (individualError) {\n                    console.error(`Failed to upsert individual item ${i}:`, individualError);\n                    throw individualError;\n                }\n            }\n            console.log(\"All items processed successfully via individual upserts\");\n            return;\n        }\n        throw error;\n    }\n}\nasync function deleteInventoryById(id) {\n    const db = await connect();\n    const n = Number(id);\n    await db.collection(\"inventory\").deleteOne({\n        id: n\n    });\n}\n// Users helpers\nasync function getUsers() {\n    const db = await connect();\n    const users = await db.collection(\"users\").find({}).sort({\n        id: 1\n    }).toArray();\n    // Auto-create default users if no users exist\n    if (users.length === 0) {\n        console.log(\"No users found. Creating default admin and cashier users...\");\n        const defaultUsers = [\n            {\n                id: \"admin\",\n                pwd: \"admin123\",\n                role: \"Admin\",\n                email: \"admin@pos.local\",\n                active: true,\n                permissions_json: JSON.stringify({\n                    inventory: true,\n                    users: true,\n                    reports: true,\n                    pos: true,\n                    transactions: true,\n                    manageUsers: true,\n                    manageInventory: true,\n                    manageReports: true,\n                    managePOS: true\n                })\n            },\n            {\n                id: \"cashier\",\n                pwd: \"cashier1\",\n                role: \"Cashier\",\n                email: \"cashier@pos.local\",\n                active: true,\n                permissions_json: JSON.stringify({\n                    inventory: false,\n                    users: false,\n                    reports: false,\n                    pos: true,\n                    transactions: false,\n                    manageUsers: false,\n                    manageInventory: false,\n                    manageReports: false,\n                    managePOS: true\n                })\n            }\n        ];\n        try {\n            await db.collection(\"users\").insertMany(defaultUsers);\n            console.log(\"âœ… Default users created:\");\n            console.log(\"   - Admin: username=admin, password=admin123\");\n            console.log(\"   - Cashier: username=cashier, password=cashier1\");\n        } catch (error) {\n            console.error(\"Failed to create default users:\", error);\n        }\n        const newUsers = await db.collection(\"users\").find({}).sort({\n            id: 1\n        }).toArray();\n        return newUsers.map((user)=>({\n                ...user,\n                username: user.id || user.username,\n                password: user.pwd || user.password || \"\"\n            }));\n    }\n    // Map database fields to frontend expected fields\n    return users.map((user)=>({\n            ...user,\n            username: user.id,\n            password: user.pwd || user.password\n        }));\n}\nasync function getUserByUsername(username) {\n    const db = await connect();\n    // Try to find user by id first, then by username field if it exists\n    let user = await db.collection(\"users\").findOne({\n        id: username\n    });\n    if (!user) {\n        user = await db.collection(\"users\").findOne({\n            username: username\n        });\n    }\n    if (user) {\n        // Map database fields to frontend expected fields\n        return {\n            ...user,\n            username: user.id || user.username,\n            password: user.pwd || user.password || \"\"\n        };\n    }\n    return null;\n}\nasync function upsertUser(body) {\n    const db = await connect();\n    const id = body.id || body.username;\n    await db.collection(\"users\").updateOne({\n        id\n    }, {\n        $set: {\n            id,\n            email: body.email || \"\",\n            pwd: body.password || body.pwd || \"\",\n            role: body.role || \"user\",\n            active: body.active !== false,\n            permissions_json: JSON.stringify(body.permissions || {})\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function replaceAllUsers(users) {\n    const db = await connect();\n    // Clear existing users and insert new ones\n    await db.collection(\"users\").deleteMany({});\n    if (users.length > 0) {\n        const formattedUsers = users.map((user)=>({\n                id: user.id || user.username,\n                email: user.email || \"\",\n                pwd: user.password || user.pwd || \"\",\n                role: user.role || \"user\",\n                active: user.active !== false,\n                permissions_json: JSON.stringify(user.permissions || {})\n            }));\n        await db.collection(\"users\").insertMany(formattedUsers);\n    }\n}\nasync function deleteUserById(id) {\n    const db = await connect();\n    // Prevent deletion of admin users (super role protection)\n    const user = await db.collection(\"users\").findOne({\n        id: id\n    });\n    if (user && (user.role === \"admin\" || user.role === \"Admin\" || user.id === \"admin\")) {\n        throw new Error(\"Admin users cannot be deleted - this is a protected super role\");\n    }\n    await db.collection(\"users\").deleteOne({\n        id: id\n    });\n}\n// Transactions helpers\nasync function saveTransaction(txObj) {\n    const db = await connect();\n    // Determine transaction type based on payment breakdown\n    const paymentBreakdown = txObj.paymentBreakdown || txObj.payment || [];\n    let transactionType = \"mixed\"; // default\n    let cashAmount = 0;\n    let cardAmount = 0;\n    let creditAmount = 0;\n    // Calculate payment amounts by method\n    let hasLotto = false;\n    paymentBreakdown.forEach((payment)=>{\n        const amount = Number(payment.amount || 0);\n        switch(payment.method?.toLowerCase()){\n            case \"cash\":\n                cashAmount += amount;\n                break;\n            case \"card\":\n                cardAmount += amount;\n                break;\n            case \"credit\":\n                creditAmount += amount;\n                break;\n            case \"lotto\":\n                hasLotto = true;\n                break;\n        }\n    });\n    // Determine primary transaction type\n    if (hasLotto && cashAmount < 0 && cardAmount === 0 && creditAmount === 0) {\n        // Lotto-only transaction (cash going out)\n        transactionType = \"lotto\";\n    } else if (creditAmount > 0) {\n        if (cashAmount > 0 || cardAmount > 0) {\n            transactionType = \"partial_credit\";\n        } else {\n            transactionType = \"credit\";\n        }\n    } else if (cashAmount > 0 && cardAmount > 0) {\n        transactionType = \"mixed\";\n    } else if (cashAmount > 0) {\n        transactionType = \"cash\";\n    } else if (cardAmount > 0) {\n        transactionType = \"card\";\n    } else if (hasLotto) {\n        // Lotto with other payments\n        transactionType = \"lotto_mixed\";\n    }\n    // normalize timestamp\n    const doc = {\n        legacy_id: txObj.id || null,\n        timestamp: txObj.timestamp ? new Date(txObj.timestamp) : new Date(),\n        subtotal: Number(txObj.subtotal || 0),\n        taxableAmount: Number(txObj.taxableAmount || 0),\n        nonTaxableAmount: Number(txObj.nonTaxableAmount || 0),\n        tax: Number(txObj.tax || 0),\n        total: Number(txObj.total || 0),\n        cashback: Number(txObj.cashback || 0),\n        paymentBreakdown: paymentBreakdown,\n        change: Number(txObj.change || 0),\n        transactionType: transactionType,\n        cashAmount: cashAmount,\n        cardAmount: cardAmount,\n        creditAmount: creditAmount,\n        items: Array.isArray(txObj.items) ? txObj.items.map((it)=>({\n                product_id: it.id || null,\n                name: it.name || \"\",\n                quantity: Number(it.quantity || 0),\n                price: Number(it.price || 0),\n                applyTax: !!it.applyTax\n            })) : []\n    };\n    const res = await db.collection(\"transactions\").insertOne(doc);\n    const insertedId = res.insertedId;\n    // Deduct stock for each item (best-effort)\n    for (const it of doc.items){\n        if (!it.product_id) continue;\n        const cur = await db.collection(\"inventory\").findOne({\n            id: Number(it.product_id)\n        });\n        if (cur) {\n            const newStock = (cur.stock || 0) - (it.quantity || 0);\n            await db.collection(\"inventory\").updateOne({\n                id: Number(it.product_id)\n            }, {\n                $set: {\n                    stock: newStock\n                }\n            });\n        }\n    }\n    return insertedId;\n}\nasync function getTransactions(limit = 100) {\n    const db = await connect();\n    const cursor = db.collection(\"transactions\").find({}).sort({\n        _id: -1\n    }).limit(Number(limit));\n    const rows = await cursor.toArray();\n    return rows.map((r)=>({\n            ...r,\n            id: r._id.toString(),\n            timestamp: r.timestamp instanceof Date ? r.timestamp.toISOString() : r.timestamp\n        }));\n}\nasync function deleteTransaction(id) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    try {\n        // Convert string ID to ObjectId for MongoDB\n        const objectId = new ObjectId(id);\n        const result = await db.collection(\"transactions\").deleteOne({\n            _id: objectId\n        });\n        return result.deletedCount > 0;\n    } catch (error) {\n        console.error(\"Error deleting transaction:\", error);\n        return false;\n    }\n}\n// Categories helpers\nasync function getCategories() {\n    const db = await connect();\n    const categories = await db.collection(\"categories\").find({}).sort({\n        name: 1\n    }).toArray();\n    // If no categories exist, create default ones\n    if (categories.length === 0) {\n        const defaultCategories = [\n            {\n                id: 1,\n                name: \"Beverages\",\n                description: \"Soft drinks, energy drinks, water, and other beverages\"\n            },\n            {\n                id: 2,\n                name: \"Snacks\",\n                description: \"Chips, crackers, nuts, and other snack foods\"\n            },\n            {\n                id: 3,\n                name: \"Bakery\",\n                description: \"Bread, pastries, and baked goods\"\n            },\n            {\n                id: 4,\n                name: \"Tobacco\",\n                description: \"Cigarettes and tobacco products\"\n            },\n            {\n                id: 5,\n                name: \"Dairy\",\n                description: \"Milk, cheese, yogurt, and dairy products\"\n            },\n            {\n                id: 6,\n                name: \"Frozen Foods\",\n                description: \"Ice cream, frozen meals, and frozen items\"\n            },\n            {\n                id: 7,\n                name: \"Personal Care\",\n                description: \"Toiletries, hygiene, and personal care items\"\n            },\n            {\n                id: 8,\n                name: \"Household\",\n                description: \"Cleaning supplies, paper products, and household items\"\n            },\n            {\n                id: 9,\n                name: \"Fresh Produce\",\n                description: \"Fruits, vegetables, and fresh produce\"\n            },\n            {\n                id: 10,\n                name: \"Candy\",\n                description: \"Chocolates, gums, and sweet treats\"\n            }\n        ];\n        await db.collection(\"categories\").insertMany(defaultCategories);\n        return defaultCategories;\n    }\n    return categories;\n}\nasync function saveCategory(category) {\n    const db = await connect();\n    if (category.id) {\n        // Update existing category\n        const result = await db.collection(\"categories\").updateOne({\n            id: Number(category.id)\n        }, {\n            $set: {\n                name: category.name,\n                description: category.description || \"\",\n                updatedAt: new Date()\n            }\n        }, {\n            upsert: true\n        });\n        return {\n            id: category.id,\n            ...category\n        };\n    } else {\n        // Create new category - find next available ID\n        const lastCategory = await db.collection(\"categories\").findOne({}, {\n            sort: {\n                id: -1\n            }\n        });\n        const nextId = (lastCategory?.id || 0) + 1;\n        const newCategory = {\n            id: nextId,\n            name: category.name,\n            description: category.description || \"\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        await db.collection(\"categories\").insertOne(newCategory);\n        return newCategory;\n    }\n}\nasync function deleteCategory(id) {\n    const db = await connect();\n    const result = await db.collection(\"categories\").deleteOne({\n        id: Number(id)\n    });\n    return result.deletedCount > 0;\n}\n// Credit Accounts helpers\nasync function getCreditAccounts() {\n    const db = await connect();\n    const cursor = db.collection(\"creditAccounts\").find({}).sort({\n        lastTransactionDate: -1\n    });\n    const accounts = await cursor.toArray();\n    return accounts.map((account)=>({\n            ...account,\n            id: account._id.toString(),\n            createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n            updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n            lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n        }));\n}\nasync function getCreditAccountByName(customerName) {\n    const db = await connect();\n    const account = await db.collection(\"creditAccounts\").findOne({\n        customerName: {\n            $regex: new RegExp(\"^\" + customerName.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") + \"$\", \"i\")\n        }\n    });\n    if (!account) return null;\n    return {\n        ...account,\n        id: account._id.toString(),\n        createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n        updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n        lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n    };\n}\nasync function upsertCreditAccount(accountData) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    const now = new Date();\n    const customerName = accountData.customerName?.trim();\n    if (!customerName) {\n        throw new Error(\"Customer name is required\");\n    }\n    // Find existing account (case-insensitive)\n    const existingAccount = await db.collection(\"creditAccounts\").findOne({\n        customerName: {\n            $regex: new RegExp(\"^\" + customerName.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") + \"$\", \"i\")\n        }\n    });\n    if (existingAccount) {\n        // Update existing account\n        const updateData = {\n            balance: accountData.balance !== undefined ? Number(accountData.balance) : existingAccount.balance || 0,\n            phone: accountData.phone || existingAccount.phone || \"\",\n            email: accountData.email || existingAccount.email || \"\",\n            address: accountData.address || existingAccount.address || \"\",\n            notes: accountData.notes || existingAccount.notes || \"\",\n            isActive: accountData.isActive !== undefined ? accountData.isActive : existingAccount.isActive,\n            updatedAt: now\n        };\n        console.log(`Updating account ${customerName}: Old balance=${existingAccount.balance}, New balance=${updateData.balance}`);\n        // Update last transaction date if provided\n        if (accountData.lastTransactionDate) {\n            updateData.lastTransactionDate = accountData.lastTransactionDate instanceof Date ? accountData.lastTransactionDate : new Date(accountData.lastTransactionDate);\n        }\n        // Update transaction count if provided\n        if (accountData.transactionCount !== undefined) {\n            updateData.transactionCount = Number(accountData.transactionCount);\n        }\n        const result = await db.collection(\"creditAccounts\").updateOne({\n            _id: existingAccount._id\n        }, {\n            $set: updateData\n        });\n        if (result.modifiedCount > 0) {\n            const updatedAccount = await db.collection(\"creditAccounts\").findOne({\n                _id: existingAccount._id\n            });\n            return {\n                ...updatedAccount,\n                id: updatedAccount._id.toString()\n            };\n        }\n        return {\n            ...existingAccount,\n            id: existingAccount._id.toString()\n        };\n    } else {\n        // Create new account\n        const newAccount = {\n            customerName: customerName,\n            balance: Number(accountData.balance || 0),\n            phone: accountData.phone || \"\",\n            email: accountData.email || \"\",\n            address: accountData.address || \"\",\n            notes: accountData.notes || \"\",\n            isActive: accountData.isActive !== undefined ? accountData.isActive : true,\n            transactionCount: Number(accountData.transactionCount || 0),\n            createdAt: now,\n            updatedAt: now,\n            lastTransactionDate: accountData.lastTransactionDate ? accountData.lastTransactionDate instanceof Date ? accountData.lastTransactionDate : new Date(accountData.lastTransactionDate) : now\n        };\n        const result = await db.collection(\"creditAccounts\").insertOne(newAccount);\n        return {\n            ...newAccount,\n            id: result.insertedId.toString()\n        };\n    }\n}\nasync function addToCreditAccount(customerName, amount, transactionId = null) {\n    const db = await connect();\n    // Get or create account\n    let account = await getCreditAccountByName(customerName);\n    if (!account) {\n        // Create new account if it doesn't exist\n        account = await upsertCreditAccount({\n            customerName: customerName,\n            balance: amount,\n            transactionCount: 1,\n            lastTransactionDate: new Date()\n        });\n    } else {\n        // Update existing account\n        const newBalance = Number(account.balance || 0) + Number(amount);\n        const newTransactionCount = Number(account.transactionCount || 0) + 1;\n        account = await upsertCreditAccount({\n            customerName: customerName,\n            balance: newBalance,\n            transactionCount: newTransactionCount,\n            lastTransactionDate: new Date(),\n            phone: account.phone,\n            email: account.email,\n            address: account.address,\n            notes: account.notes,\n            isActive: account.isActive\n        });\n    }\n    return account;\n}\nasync function payToCreditAccount(customerName, paymentAmount) {\n    const db = await connect();\n    const account = await getCreditAccountByName(customerName);\n    if (!account) {\n        throw new Error(\"Credit account not found\");\n    }\n    const currentBalance = Number(account.balance || 0);\n    const payment = Number(paymentAmount);\n    console.log(`Processing payment for ${customerName}: Balance=${currentBalance}, Payment=${payment}`);\n    if (payment > currentBalance) {\n        console.log(`Payment rejected: ${payment} > ${currentBalance}`);\n        throw new Error(\"Payment amount exceeds account balance\");\n    }\n    const newBalance = currentBalance - payment;\n    console.log(`Calculated new balance: ${newBalance}`);\n    const updatedAccount = await upsertCreditAccount({\n        customerName: customerName,\n        balance: newBalance,\n        transactionCount: account.transactionCount,\n        lastTransactionDate: new Date(),\n        phone: account.phone,\n        email: account.email,\n        address: account.address,\n        notes: account.notes,\n        isActive: account.isActive\n    });\n    console.log(`Updated account balance: ${updatedAccount.balance}`);\n    return {\n        ...updatedAccount,\n        paymentAmount: payment,\n        previousBalance: currentBalance,\n        newBalance: newBalance\n    };\n}\nasync function deleteCreditAccount(id) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    try {\n        const objectId = new ObjectId(id);\n        const result = await db.collection(\"creditAccounts\").deleteOne({\n            _id: objectId\n        });\n        return result.deletedCount > 0;\n    } catch (error) {\n        console.error(\"Error deleting credit account:\", error);\n        return false;\n    }\n}\nasync function searchCreditAccounts(searchTerm, includeInactive = false) {\n    const db = await connect();\n    const query = {\n        customerName: {\n            $regex: searchTerm,\n            $options: \"i\"\n        }\n    };\n    if (!includeInactive) {\n        query.isActive = {\n            $ne: false\n        };\n    }\n    const cursor = db.collection(\"creditAccounts\").find(query).sort({\n        balance: -1,\n        lastTransactionDate: -1\n    });\n    const accounts = await cursor.toArray();\n    return accounts.map((account)=>({\n            ...account,\n            id: account._id.toString(),\n            createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n            updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n            lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n        }));\n}\n// Till Count Management Functions\nasync function getCurrentTill() {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        // Find the most recent open till (no endTime)\n        const currentTill = await tillCollection.findOne({\n            endTime: null\n        }, {\n            sort: {\n                startTime: -1\n            }\n        });\n        return currentTill;\n    } catch (error) {\n        console.error(\"Error getting current till:\", error);\n        throw error;\n    }\n}\nasync function getTillHistory(limit = 20) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        const history = await tillCollection.find({}).sort({\n            startTime: -1\n        }).limit(limit).toArray();\n        return history;\n    } catch (error) {\n        console.error(\"Error getting till history:\", error);\n        throw error;\n    }\n}\nasync function startTill(tillData) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        // Generate a simple ID\n        const generateId = ()=>Date.now().toString() + Math.random().toString(36).substr(2, 9);\n        const till = {\n            id: generateId(),\n            startAmount: tillData.startAmount,\n            startUser: tillData.startUser,\n            startTime: tillData.startTime,\n            startDenominations: tillData.startDenominations || {},\n            endAmount: null,\n            endUser: null,\n            endTime: null,\n            endDenominations: null,\n            createdAt: new Date().toISOString()\n        };\n        await tillCollection.insertOne(till);\n        return till;\n    } catch (error) {\n        console.error(\"Error starting till:\", error);\n        throw error;\n    }\n}\nasync function endTill(tillId, endData) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        const updateResult = await tillCollection.updateOne({\n            id: tillId\n        }, {\n            $set: {\n                endAmount: endData.endAmount,\n                endUser: endData.endUser,\n                endTime: endData.endTime,\n                endDenominations: endData.endDenominations || {},\n                updatedAt: new Date().toISOString()\n            }\n        });\n        if (updateResult.matchedCount === 0) {\n            throw new Error(\"Till not found\");\n        }\n        const updatedTill = await tillCollection.findOne({\n            id: tillId\n        });\n        return updatedTill;\n    } catch (error) {\n        console.error(\"Error ending till:\", error);\n        throw error;\n    }\n}\nmodule.exports = {\n    connect,\n    getAllInventory,\n    getInventoryById,\n    upsertInventoryItems,\n    deleteInventoryById,\n    getUsers,\n    getUserByUsername,\n    upsertUser,\n    replaceAllUsers,\n    deleteUserById,\n    saveTransaction,\n    getTransactions,\n    deleteTransaction,\n    getCategories,\n    saveCategory,\n    deleteCategory,\n    getCreditAccounts,\n    getCreditAccountByName,\n    upsertCreditAccount,\n    addToCreditAccount,\n    payToCreditAccount,\n    deleteCreditAccount,\n    searchCreditAccounts,\n    getCurrentTill,\n    getTillHistory,\n    startTill,\n    endTill\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJNkUsYUFBYUMsWUFBWSxLQUFLLEdBQUc7WUFDbkMsTUFBTSxJQUFJNUssTUFBTTtRQUNsQjtRQUVBLE1BQU02SyxjQUFjLE1BQU14QixlQUFldkssT0FBTyxDQUFDO1lBQUViLElBQUl3TTtRQUFPO1FBQzlELE9BQU9JO0lBQ1QsRUFBRSxPQUFPOUssT0FBTztRQUNkWixRQUFRWSxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQStLLE9BQU9DLE9BQU8sR0FBRztJQUNmbk47SUFDQVU7SUFDQUs7SUFDQUk7SUFDQTRDO0lBQ0FFO0lBQ0FvQjtJQUNBQztJQUNBRztJQUNBRztJQUNBQztJQUNBK0I7SUFDQU87SUFDQUk7SUFDQUk7SUFDQU07SUFDQUM7SUFDQUk7SUFDQUs7SUFDQWM7SUFDQUk7SUFDQUk7SUFDQUM7SUFDQU07SUFDQUs7SUFDQUU7SUFDQWE7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlbmllbmNlLXN0b3JlLWludmVudG9yeS8uL3NlcnZlci9tb25nby5qcz85NWU5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgTW9uZ29DbGllbnQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJJIHx8IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxN1wiO1xuY29uc3QgZGJOYW1lID0gcHJvY2Vzcy5lbnYuTU9OR09fREIgfHwgXCJjb252ZW5pZW5jZV9zdG9yZVwiO1xuXG5sZXQgX2NsaWVudCA9IG51bGw7XG5sZXQgX2RiID0gbnVsbDtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgaWYgKF9kYikgcmV0dXJuIF9kYjtcbiAgaWYgKCFfY2xpZW50KSB7XG4gICAgX2NsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmwsIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pO1xuICAgIGF3YWl0IF9jbGllbnQuY29ubmVjdCgpO1xuICB9XG4gIF9kYiA9IF9jbGllbnQuZGIoZGJOYW1lKTtcbiAgLy8gRW5zdXJlIGluZGV4ZXNcbiAgdHJ5IHtcbiAgICBhd2FpdCBfZGIuY29sbGVjdGlvbihcImludmVudG9yeVwiKS5jcmVhdGVJbmRleCh7IGlkOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgIGF3YWl0IF9kYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgLmNyZWF0ZUluZGV4KHsgaWQ6IDEgfSwgeyB1bmlxdWU6IHRydWUsIHNwYXJzZTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBfZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIC5jcmVhdGVJbmRleCh7IHVzZXJuYW1lOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaWdub3JlIGluZGV4IGVycm9yc1xuICB9XG4gIHJldHVybiBfZGI7XG59XG5cbi8vIEludmVudG9yeSBoZWxwZXJzXG5hc3luYyBmdW5jdGlvbiBnZXRBbGxJbnZlbnRvcnkoKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICByZXR1cm4gZGIuY29sbGVjdGlvbihcImludmVudG9yeVwiKS5maW5kKHt9KS5zb3J0KHsgbmFtZTogMSB9KS50b0FycmF5KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEludmVudG9yeUJ5SWQoaWQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IG4gPSBOdW1iZXIoaWQpO1xuICByZXR1cm4gZGIuY29sbGVjdGlvbihcImludmVudG9yeVwiKS5maW5kT25lKHsgaWQ6IG4gfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwc2VydEludmVudG9yeUl0ZW1zKGl0ZW1zKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShpdGVtcykpIGl0ZW1zID0gW2l0ZW1zXTtcbiAgY29uc29sZS5sb2coXCJ1cHNlcnRJbnZlbnRvcnlJdGVtcyBjYWxsZWQgd2l0aDpcIiwgaXRlbXMubGVuZ3RoLCBcIml0ZW1zXCIpO1xuXG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBvcHMgPSBpdGVtcy5tYXAoKGl0LCBpbmRleCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFByb2Nlc3NpbmcgaXRlbSAke2luZGV4fSBmb3IgdXBzZXJ0OmAsXG4gICAgICBKU09OLnN0cmluZ2lmeShpdCwgbnVsbCwgMilcbiAgICApO1xuXG4gICAgLy8gVmFsaWRhdGUgYW5kIGNvbnZlcnQgSURcbiAgICBsZXQgaXRlbUlkID0gdW5kZWZpbmVkO1xuICAgIGlmIChpdC5pZCAhPT0gdW5kZWZpbmVkICYmIGl0LmlkICE9PSBudWxsKSB7XG4gICAgICBpdGVtSWQgPSBOdW1iZXIoaXQuaWQpO1xuICAgICAgaWYgKGlzTmFOKGl0ZW1JZCkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3IgaXRlbSAke2luZGV4fTpgLCBpdC5pZCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJRDogJHtpdC5pZH1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBJdGVtICR7aW5kZXh9IGhhcyB2YWxpZCBudW1lcmljIElEOmAsIGl0ZW1JZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGBJdGVtICR7aW5kZXh9IGhhcyBubyBJRCwgd2lsbCBiZSBhdXRvLWdlbmVyYXRlZGApO1xuICAgIH1cblxuICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgIGlkOiBpdGVtSWQsXG4gICAgICBuYW1lOiBpdC5uYW1lIHx8IFwiXCIsXG4gICAgICBjYXRlZ29yeTogaXQuY2F0ZWdvcnkgfHwgXCJcIixcbiAgICAgIHByaWNlOiBOdW1iZXIoaXQucHJpY2UgfHwgMCksXG4gICAgICBzdG9jazogTnVtYmVyKGl0LnN0b2NrIHx8IDApLFxuICAgICAgbG93U3RvY2tUaHJlc2hvbGQ6IE51bWJlcihpdC5sb3dTdG9ja1RocmVzaG9sZCB8fCAwKSxcbiAgICAgIHRheGFibGU6ICEhaXQudGF4YWJsZSxcbiAgICAgIGJhcmNvZGU6IGl0LmJhcmNvZGUgfHwgKGl0ZW1JZCA/IGl0ZW1JZC50b1N0cmluZygpIDogbnVsbCksIC8vIERlZmF1bHQgdG8gcHJvZHVjdCBJRCBhcyBiYXJjb2RlXG4gICAgfTtcblxuICAgIC8vIEFkZCBiYXJjb2RlMiBpZiBwcm92aWRlZFxuICAgIGlmIChpdC5iYXJjb2RlMikge1xuICAgICAgb2JqLmJhcmNvZGUyID0gaXQuYmFyY29kZTI7XG4gICAgfVxuXG4gICAgLy8gT25seSBhZGQgcHJvZHVjdElkIGlmIGl0J3MgcHJvdmlkZWQsIHRvIGF2b2lkIG51bGwgY29uc3RyYWludCBpc3N1ZXNcbiAgICBpZiAoaXQucHJvZHVjdElkKSB7XG4gICAgICBvYmoucHJvZHVjdElkID0gaXQucHJvZHVjdElkO1xuICAgIH0gZWxzZSBpZiAoaXRlbUlkKSB7XG4gICAgICBvYmoucHJvZHVjdElkID0gaXRlbUlkLnRvU3RyaW5nKCk7IC8vIFVzZSBJRCBhcyBwcm9kdWN0SWQgZm9yIG5ldyBpdGVtc1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghb2JqLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSXRlbSBuYW1lIGlzIHJlcXVpcmVkIGZvciBpdGVtICR7aW5kZXh9YCk7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHVuZGVmaW5lZCBpZCB0byBsZXQgdXBzZXJ0IHVzZSBwcm92aWRlZCBpZCBvciBjcmVhdGUgb25lXG4gICAgaWYgKG9iai5pZCA9PT0gdW5kZWZpbmVkKSBkZWxldGUgb2JqLmlkO1xuXG4gICAgY29uc3QgZmlsdGVyID0gb2JqLmlkICE9PSB1bmRlZmluZWQgPyB7IGlkOiBvYmouaWQgfSA6IHsgbmFtZTogb2JqLm5hbWUgfTtcblxuICAgIGNvbnNvbGUubG9nKGA9PT0gTU9OR09EQiBVUFNFUlQgT1BFUkFUSU9OICR7aW5kZXh9ID09PWApO1xuICAgIGNvbnNvbGUubG9nKFwiRmlsdGVyOlwiLCBKU09OLnN0cmluZ2lmeShmaWx0ZXIsIG51bGwsIDIpKTtcbiAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZSBkb2N1bWVudDpcIiwgSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coYEl0ZW0gJHtpbmRleH0gZmlsdGVyOmAsIGZpbHRlcik7XG4gICAgY29uc29sZS5sb2coYEl0ZW0gJHtpbmRleH0gb2JqZWN0OmAsIG9iaik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlT25lOiB7XG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgdXBkYXRlOiB7ICRzZXQ6IG9iaiB9LFxuICAgICAgICB1cHNlcnQ6IHRydWUsXG4gICAgICB9LFxuICAgIH07XG4gIH0pO1xuXG4gIGlmIChvcHMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5sb2coXCJObyBvcGVyYXRpb25zIHRvIHBlcmZvcm1cIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc29sZS5sb2coXCJFeGVjdXRpbmcgYnVsa1dyaXRlIHdpdGhcIiwgb3BzLmxlbmd0aCwgXCJvcGVyYXRpb25zXCIpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIikuYnVsa1dyaXRlKG9wcyk7XG4gICAgY29uc29sZS5sb2coXCJCdWxrV3JpdGUgcmVzdWx0OlwiLCByZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJCdWxrV3JpdGUgZXJyb3I6XCIsIGVycm9yKTtcblxuICAgIC8vIElmIGl0J3MgYSBkdXBsaWNhdGUga2V5IGVycm9yIG9uIHByb2R1Y3RJZCwgdHJ5IHRvIGhhbmRsZSBpdCBncmFjZWZ1bGx5XG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJwcm9kdWN0SWRcIikpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIkRldGVjdGVkIHByb2R1Y3RJZCBkdXBsaWNhdGUga2V5IGVycm9yLCBhdHRlbXB0aW5nIGluZGl2aWR1YWwgdXBzZXJ0cy4uLlwiXG4gICAgICApO1xuXG4gICAgICAvLyBUcnkgZWFjaCBpdGVtIGluZGl2aWR1YWxseSB3aXRoIHVuaXF1ZSBwcm9kdWN0SWQgZ2VuZXJhdGlvblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgaXRlbVdpdGhVbmlxdWVQcm9kdWN0SWQgPSB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgcHJvZHVjdElkOiBpdGVtLnByb2R1Y3RJZCB8fCBgJHtpdGVtLmlkIHx8IERhdGUubm93KCl9LSR7aX1gLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBpdGVtLmlkID8geyBpZDogaXRlbS5pZCB9IDogeyBuYW1lOiBpdGVtLm5hbWUgfTtcbiAgICAgICAgICBhd2FpdCBkYlxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIilcbiAgICAgICAgICAgIC51cGRhdGVPbmUoXG4gICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgeyAkc2V0OiBpdGVtV2l0aFVuaXF1ZVByb2R1Y3RJZCB9LFxuICAgICAgICAgICAgICB7IHVwc2VydDogdHJ1ZSB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgdXBzZXJ0ZWQgaXRlbSAke2l9IHdpdGggdW5pcXVlIHByb2R1Y3RJZGApO1xuICAgICAgICB9IGNhdGNoIChpbmRpdmlkdWFsRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgYEZhaWxlZCB0byB1cHNlcnQgaW5kaXZpZHVhbCBpdGVtICR7aX06YCxcbiAgICAgICAgICAgIGluZGl2aWR1YWxFcnJvclxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhyb3cgaW5kaXZpZHVhbEVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcIkFsbCBpdGVtcyBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5IHZpYSBpbmRpdmlkdWFsIHVwc2VydHNcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlSW52ZW50b3J5QnlJZChpZCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgbiA9IE51bWJlcihpZCk7XG4gIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIikuZGVsZXRlT25lKHsgaWQ6IG4gfSk7XG59XG5cbi8vIFVzZXJzIGhlbHBlcnNcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJzKCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZCh7fSkuc29ydCh7IGlkOiAxIH0pLnRvQXJyYXkoKTtcblxuICAvLyBBdXRvLWNyZWF0ZSBkZWZhdWx0IHVzZXJzIGlmIG5vIHVzZXJzIGV4aXN0XG4gIGlmICh1c2Vycy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zb2xlLmxvZyhcIk5vIHVzZXJzIGZvdW5kLiBDcmVhdGluZyBkZWZhdWx0IGFkbWluIGFuZCBjYXNoaWVyIHVzZXJzLi4uXCIpO1xuXG4gICAgY29uc3QgZGVmYXVsdFVzZXJzID0gW1xuICAgICAge1xuICAgICAgICBpZDogXCJhZG1pblwiLFxuICAgICAgICBwd2Q6IFwiYWRtaW4xMjNcIixcbiAgICAgICAgcm9sZTogXCJBZG1pblwiLFxuICAgICAgICBlbWFpbDogXCJhZG1pbkBwb3MubG9jYWxcIixcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICBwZXJtaXNzaW9uc19qc29uOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgaW52ZW50b3J5OiB0cnVlLFxuICAgICAgICAgIHVzZXJzOiB0cnVlLFxuICAgICAgICAgIHJlcG9ydHM6IHRydWUsXG4gICAgICAgICAgcG9zOiB0cnVlLFxuICAgICAgICAgIHRyYW5zYWN0aW9uczogdHJ1ZSxcbiAgICAgICAgICBtYW5hZ2VVc2VyczogdHJ1ZSxcbiAgICAgICAgICBtYW5hZ2VJbnZlbnRvcnk6IHRydWUsXG4gICAgICAgICAgbWFuYWdlUmVwb3J0czogdHJ1ZSxcbiAgICAgICAgICBtYW5hZ2VQT1M6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwiY2FzaGllclwiLFxuICAgICAgICBwd2Q6IFwiY2FzaGllcjFcIixcbiAgICAgICAgcm9sZTogXCJDYXNoaWVyXCIsXG4gICAgICAgIGVtYWlsOiBcImNhc2hpZXJAcG9zLmxvY2FsXCIsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgcGVybWlzc2lvbnNfanNvbjogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGludmVudG9yeTogZmFsc2UsXG4gICAgICAgICAgdXNlcnM6IGZhbHNlLFxuICAgICAgICAgIHJlcG9ydHM6IGZhbHNlLFxuICAgICAgICAgIHBvczogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2FjdGlvbnM6IGZhbHNlLFxuICAgICAgICAgIG1hbmFnZVVzZXJzOiBmYWxzZSxcbiAgICAgICAgICBtYW5hZ2VJbnZlbnRvcnk6IGZhbHNlLFxuICAgICAgICAgIG1hbmFnZVJlcG9ydHM6IGZhbHNlLFxuICAgICAgICAgIG1hbmFnZVBPUzogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgIF07XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmluc2VydE1hbnkoZGVmYXVsdFVzZXJzKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIERlZmF1bHQgdXNlcnMgY3JlYXRlZDpcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIiAgIC0gQWRtaW46IHVzZXJuYW1lPWFkbWluLCBwYXNzd29yZD1hZG1pbjEyM1wiKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiICAgLSBDYXNoaWVyOiB1c2VybmFtZT1jYXNoaWVyLCBwYXNzd29yZD1jYXNoaWVyMVwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgZGVmYXVsdCB1c2VyczpcIiwgZXJyb3IpO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1VzZXJzID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIC5maW5kKHt9KVxuICAgICAgLnNvcnQoeyBpZDogMSB9KVxuICAgICAgLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gbmV3VXNlcnMubWFwKCh1c2VyKSA9PiAoe1xuICAgICAgLi4udXNlcixcbiAgICAgIHVzZXJuYW1lOiB1c2VyLmlkIHx8IHVzZXIudXNlcm5hbWUsXG4gICAgICBwYXNzd29yZDogdXNlci5wd2QgfHwgdXNlci5wYXNzd29yZCB8fCBcIlwiLFxuICAgIH0pKTtcbiAgfVxuXG4gIC8vIE1hcCBkYXRhYmFzZSBmaWVsZHMgdG8gZnJvbnRlbmQgZXhwZWN0ZWQgZmllbGRzXG4gIHJldHVybiB1c2Vycy5tYXAoKHVzZXIpID0+ICh7XG4gICAgLi4udXNlcixcbiAgICB1c2VybmFtZTogdXNlci5pZCwgLy8gTWFwIGlkIHRvIHVzZXJuYW1lIGZvciBmcm9udGVuZFxuICAgIHBhc3N3b3JkOiB1c2VyLnB3ZCB8fCB1c2VyLnBhc3N3b3JkLCAvLyBNYXAgcHdkIHRvIHBhc3N3b3JkIGZvciBmcm9udGVuZFxuICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICAvLyBUcnkgdG8gZmluZCB1c2VyIGJ5IGlkIGZpcnN0LCB0aGVuIGJ5IHVzZXJuYW1lIGZpZWxkIGlmIGl0IGV4aXN0c1xuICBsZXQgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHsgaWQ6IHVzZXJuYW1lIH0pO1xuICBpZiAoIXVzZXIpIHtcbiAgICB1c2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUoeyB1c2VybmFtZTogdXNlcm5hbWUgfSk7XG4gIH1cblxuICBpZiAodXNlcikge1xuICAgIC8vIE1hcCBkYXRhYmFzZSBmaWVsZHMgdG8gZnJvbnRlbmQgZXhwZWN0ZWQgZmllbGRzXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICB1c2VybmFtZTogdXNlci5pZCB8fCB1c2VyLnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHVzZXIucHdkIHx8IHVzZXIucGFzc3dvcmQgfHwgXCJcIixcbiAgICB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1cHNlcnRVc2VyKGJvZHkpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IGlkID0gYm9keS5pZCB8fCBib2R5LnVzZXJuYW1lO1xuICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKFxuICAgIHsgaWQgfSxcbiAgICB7XG4gICAgICAkc2V0OiB7XG4gICAgICAgIGlkLFxuICAgICAgICBlbWFpbDogYm9keS5lbWFpbCB8fCBcIlwiLFxuICAgICAgICBwd2Q6IGJvZHkucGFzc3dvcmQgfHwgYm9keS5wd2QgfHwgXCJcIiwgLy8gU3RvcmUgYXMgcHdkIGluIGRhdGFiYXNlXG4gICAgICAgIHJvbGU6IGJvZHkucm9sZSB8fCBcInVzZXJcIixcbiAgICAgICAgYWN0aXZlOiBib2R5LmFjdGl2ZSAhPT0gZmFsc2UsXG4gICAgICAgIHBlcm1pc3Npb25zX2pzb246IEpTT04uc3RyaW5naWZ5KGJvZHkucGVybWlzc2lvbnMgfHwge30pLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHsgdXBzZXJ0OiB0cnVlIH1cbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVwbGFjZUFsbFVzZXJzKHVzZXJzKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuXG4gIC8vIENsZWFyIGV4aXN0aW5nIHVzZXJzIGFuZCBpbnNlcnQgbmV3IG9uZXNcbiAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmRlbGV0ZU1hbnkoe30pO1xuXG4gIGlmICh1c2Vycy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZm9ybWF0dGVkVXNlcnMgPSB1c2Vycy5tYXAoKHVzZXIpID0+ICh7XG4gICAgICBpZDogdXNlci5pZCB8fCB1c2VyLnVzZXJuYW1lLFxuICAgICAgZW1haWw6IHVzZXIuZW1haWwgfHwgXCJcIixcbiAgICAgIHB3ZDogdXNlci5wYXNzd29yZCB8fCB1c2VyLnB3ZCB8fCBcIlwiLCAvLyBTdG9yZSBhcyBwd2QgaW4gZGF0YWJhc2VcbiAgICAgIHJvbGU6IHVzZXIucm9sZSB8fCBcInVzZXJcIixcbiAgICAgIGFjdGl2ZTogdXNlci5hY3RpdmUgIT09IGZhbHNlLFxuICAgICAgcGVybWlzc2lvbnNfanNvbjogSlNPTi5zdHJpbmdpZnkodXNlci5wZXJtaXNzaW9ucyB8fCB7fSksXG4gICAgfSkpO1xuXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmluc2VydE1hbnkoZm9ybWF0dGVkVXNlcnMpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVzZXJCeUlkKGlkKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuXG4gIC8vIFByZXZlbnQgZGVsZXRpb24gb2YgYWRtaW4gdXNlcnMgKHN1cGVyIHJvbGUgcHJvdGVjdGlvbilcbiAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHsgaWQ6IGlkIH0pO1xuICBpZiAoXG4gICAgdXNlciAmJlxuICAgICh1c2VyLnJvbGUgPT09IFwiYWRtaW5cIiB8fCB1c2VyLnJvbGUgPT09IFwiQWRtaW5cIiB8fCB1c2VyLmlkID09PSBcImFkbWluXCIpXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQWRtaW4gdXNlcnMgY2Fubm90IGJlIGRlbGV0ZWQgLSB0aGlzIGlzIGEgcHJvdGVjdGVkIHN1cGVyIHJvbGVcIlxuICAgICk7XG4gIH1cblxuICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZGVsZXRlT25lKHsgaWQ6IGlkIH0pO1xufVxuXG4vLyBUcmFuc2FjdGlvbnMgaGVscGVyc1xuYXN5bmMgZnVuY3Rpb24gc2F2ZVRyYW5zYWN0aW9uKHR4T2JqKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuXG4gIC8vIERldGVybWluZSB0cmFuc2FjdGlvbiB0eXBlIGJhc2VkIG9uIHBheW1lbnQgYnJlYWtkb3duXG4gIGNvbnN0IHBheW1lbnRCcmVha2Rvd24gPSB0eE9iai5wYXltZW50QnJlYWtkb3duIHx8IHR4T2JqLnBheW1lbnQgfHwgW107XG4gIGxldCB0cmFuc2FjdGlvblR5cGUgPSBcIm1peGVkXCI7IC8vIGRlZmF1bHRcbiAgbGV0IGNhc2hBbW91bnQgPSAwO1xuICBsZXQgY2FyZEFtb3VudCA9IDA7XG4gIGxldCBjcmVkaXRBbW91bnQgPSAwO1xuXG4gIC8vIENhbGN1bGF0ZSBwYXltZW50IGFtb3VudHMgYnkgbWV0aG9kXG4gIGxldCBoYXNMb3R0byA9IGZhbHNlO1xuICBwYXltZW50QnJlYWtkb3duLmZvckVhY2goKHBheW1lbnQpID0+IHtcbiAgICBjb25zdCBhbW91bnQgPSBOdW1iZXIocGF5bWVudC5hbW91bnQgfHwgMCk7XG4gICAgc3dpdGNoIChwYXltZW50Lm1ldGhvZD8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBcImNhc2hcIjpcbiAgICAgICAgY2FzaEFtb3VudCArPSBhbW91bnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNhcmRcIjpcbiAgICAgICAgY2FyZEFtb3VudCArPSBhbW91bnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNyZWRpdFwiOlxuICAgICAgICBjcmVkaXRBbW91bnQgKz0gYW1vdW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJsb3R0b1wiOlxuICAgICAgICBoYXNMb3R0byA9IHRydWU7XG4gICAgICAgIC8vIExvdHRvIHdpbm5pbmdzIGRvbid0IGNvdW50IGFzIHBheW1lbnQsIHRoZXkgcmVkdWNlIHRvdGFsIG93ZWRcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcblxuICAvLyBEZXRlcm1pbmUgcHJpbWFyeSB0cmFuc2FjdGlvbiB0eXBlXG4gIGlmIChoYXNMb3R0byAmJiBjYXNoQW1vdW50IDwgMCAmJiBjYXJkQW1vdW50ID09PSAwICYmIGNyZWRpdEFtb3VudCA9PT0gMCkge1xuICAgIC8vIExvdHRvLW9ubHkgdHJhbnNhY3Rpb24gKGNhc2ggZ29pbmcgb3V0KVxuICAgIHRyYW5zYWN0aW9uVHlwZSA9IFwibG90dG9cIjtcbiAgfSBlbHNlIGlmIChjcmVkaXRBbW91bnQgPiAwKSB7XG4gICAgaWYgKGNhc2hBbW91bnQgPiAwIHx8IGNhcmRBbW91bnQgPiAwKSB7XG4gICAgICB0cmFuc2FjdGlvblR5cGUgPSBcInBhcnRpYWxfY3JlZGl0XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zYWN0aW9uVHlwZSA9IFwiY3JlZGl0XCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNhc2hBbW91bnQgPiAwICYmIGNhcmRBbW91bnQgPiAwKSB7XG4gICAgdHJhbnNhY3Rpb25UeXBlID0gXCJtaXhlZFwiO1xuICB9IGVsc2UgaWYgKGNhc2hBbW91bnQgPiAwKSB7XG4gICAgdHJhbnNhY3Rpb25UeXBlID0gXCJjYXNoXCI7XG4gIH0gZWxzZSBpZiAoY2FyZEFtb3VudCA+IDApIHtcbiAgICB0cmFuc2FjdGlvblR5cGUgPSBcImNhcmRcIjtcbiAgfSBlbHNlIGlmIChoYXNMb3R0bykge1xuICAgIC8vIExvdHRvIHdpdGggb3RoZXIgcGF5bWVudHNcbiAgICB0cmFuc2FjdGlvblR5cGUgPSBcImxvdHRvX21peGVkXCI7XG4gIH1cblxuICAvLyBub3JtYWxpemUgdGltZXN0YW1wXG4gIGNvbnN0IGRvYyA9IHtcbiAgICBsZWdhY3lfaWQ6IHR4T2JqLmlkIHx8IG51bGwsXG4gICAgdGltZXN0YW1wOiB0eE9iai50aW1lc3RhbXAgPyBuZXcgRGF0ZSh0eE9iai50aW1lc3RhbXApIDogbmV3IERhdGUoKSxcbiAgICBzdWJ0b3RhbDogTnVtYmVyKHR4T2JqLnN1YnRvdGFsIHx8IDApLFxuICAgIHRheGFibGVBbW91bnQ6IE51bWJlcih0eE9iai50YXhhYmxlQW1vdW50IHx8IDApLFxuICAgIG5vblRheGFibGVBbW91bnQ6IE51bWJlcih0eE9iai5ub25UYXhhYmxlQW1vdW50IHx8IDApLFxuICAgIHRheDogTnVtYmVyKHR4T2JqLnRheCB8fCAwKSxcbiAgICB0b3RhbDogTnVtYmVyKHR4T2JqLnRvdGFsIHx8IDApLFxuICAgIGNhc2hiYWNrOiBOdW1iZXIodHhPYmouY2FzaGJhY2sgfHwgMCksXG4gICAgcGF5bWVudEJyZWFrZG93bjogcGF5bWVudEJyZWFrZG93bixcbiAgICBjaGFuZ2U6IE51bWJlcih0eE9iai5jaGFuZ2UgfHwgMCksXG4gICAgdHJhbnNhY3Rpb25UeXBlOiB0cmFuc2FjdGlvblR5cGUsIC8vIE5ldyBmaWVsZDogJ2Nhc2gnLCAnY2FyZCcsICdtaXhlZCcsICdjcmVkaXQnLCAncGFydGlhbF9jcmVkaXQnXG4gICAgY2FzaEFtb3VudDogY2FzaEFtb3VudCwgLy8gTmV3IGZpZWxkOiBUb3RhbCBjYXNoIGFtb3VudFxuICAgIGNhcmRBbW91bnQ6IGNhcmRBbW91bnQsIC8vIE5ldyBmaWVsZDogVG90YWwgY2FyZCBhbW91bnRcbiAgICBjcmVkaXRBbW91bnQ6IGNyZWRpdEFtb3VudCwgLy8gTmV3IGZpZWxkOiBUb3RhbCBjcmVkaXQgYW1vdW50XG4gICAgaXRlbXM6IEFycmF5LmlzQXJyYXkodHhPYmouaXRlbXMpXG4gICAgICA/IHR4T2JqLml0ZW1zLm1hcCgoaXQpID0+ICh7XG4gICAgICAgICAgcHJvZHVjdF9pZDogaXQuaWQgfHwgbnVsbCxcbiAgICAgICAgICBuYW1lOiBpdC5uYW1lIHx8IFwiXCIsXG4gICAgICAgICAgcXVhbnRpdHk6IE51bWJlcihpdC5xdWFudGl0eSB8fCAwKSxcbiAgICAgICAgICBwcmljZTogTnVtYmVyKGl0LnByaWNlIHx8IDApLFxuICAgICAgICAgIGFwcGx5VGF4OiAhIWl0LmFwcGx5VGF4LFxuICAgICAgICB9KSlcbiAgICAgIDogW10sXG4gIH07XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInRyYW5zYWN0aW9uc1wiKS5pbnNlcnRPbmUoZG9jKTtcbiAgY29uc3QgaW5zZXJ0ZWRJZCA9IHJlcy5pbnNlcnRlZElkO1xuXG4gIC8vIERlZHVjdCBzdG9jayBmb3IgZWFjaCBpdGVtIChiZXN0LWVmZm9ydClcbiAgZm9yIChjb25zdCBpdCBvZiBkb2MuaXRlbXMpIHtcbiAgICBpZiAoIWl0LnByb2R1Y3RfaWQpIGNvbnRpbnVlO1xuICAgIGNvbnN0IGN1ciA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcImludmVudG9yeVwiKVxuICAgICAgLmZpbmRPbmUoeyBpZDogTnVtYmVyKGl0LnByb2R1Y3RfaWQpIH0pO1xuICAgIGlmIChjdXIpIHtcbiAgICAgIGNvbnN0IG5ld1N0b2NrID0gKGN1ci5zdG9jayB8fCAwKSAtIChpdC5xdWFudGl0eSB8fCAwKTtcbiAgICAgIGF3YWl0IGRiXG4gICAgICAgIC5jb2xsZWN0aW9uKFwiaW52ZW50b3J5XCIpXG4gICAgICAgIC51cGRhdGVPbmUoXG4gICAgICAgICAgeyBpZDogTnVtYmVyKGl0LnByb2R1Y3RfaWQpIH0sXG4gICAgICAgICAgeyAkc2V0OiB7IHN0b2NrOiBuZXdTdG9jayB9IH1cbiAgICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW5zZXJ0ZWRJZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25zKGxpbWl0ID0gMTAwKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBjdXJzb3IgPSBkYlxuICAgIC5jb2xsZWN0aW9uKFwidHJhbnNhY3Rpb25zXCIpXG4gICAgLmZpbmQoe30pXG4gICAgLnNvcnQoeyBfaWQ6IC0xIH0pXG4gICAgLmxpbWl0KE51bWJlcihsaW1pdCkpO1xuICBjb25zdCByb3dzID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcbiAgcmV0dXJuIHJvd3MubWFwKChyKSA9PiAoe1xuICAgIC4uLnIsXG4gICAgaWQ6IHIuX2lkLnRvU3RyaW5nKCksIC8vIENvbnZlcnQgTW9uZ29EQiBPYmplY3RJZCB0byBzdHJpbmcgZm9yIGZyb250ZW5kXG4gICAgdGltZXN0YW1wOlxuICAgICAgci50aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlID8gci50aW1lc3RhbXAudG9JU09TdHJpbmcoKSA6IHIudGltZXN0YW1wLFxuICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRyYW5zYWN0aW9uKGlkKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCB7IE9iamVjdElkIH0gPSByZXF1aXJlKFwibW9uZ29kYlwiKTtcblxuICB0cnkge1xuICAgIC8vIENvbnZlcnQgc3RyaW5nIElEIHRvIE9iamVjdElkIGZvciBNb25nb0RCXG4gICAgY29uc3Qgb2JqZWN0SWQgPSBuZXcgT2JqZWN0SWQoaWQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInRyYW5zYWN0aW9uc1wiKVxuICAgICAgLmRlbGV0ZU9uZSh7IF9pZDogb2JqZWN0SWQgfSk7XG4gICAgcmV0dXJuIHJlc3VsdC5kZWxldGVkQ291bnQgPiAwO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB0cmFuc2FjdGlvbjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBDYXRlZ29yaWVzIGhlbHBlcnNcbmFzeW5jIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGJcbiAgICAuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIilcbiAgICAuZmluZCh7fSlcbiAgICAuc29ydCh7IG5hbWU6IDEgfSlcbiAgICAudG9BcnJheSgpO1xuXG4gIC8vIElmIG5vIGNhdGVnb3JpZXMgZXhpc3QsIGNyZWF0ZSBkZWZhdWx0IG9uZXNcbiAgaWYgKGNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgZGVmYXVsdENhdGVnb3JpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBuYW1lOiBcIkJldmVyYWdlc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJTb2Z0IGRyaW5rcywgZW5lcmd5IGRyaW5rcywgd2F0ZXIsIGFuZCBvdGhlciBiZXZlcmFnZXNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAyLFxuICAgICAgICBuYW1lOiBcIlNuYWNrc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDaGlwcywgY3JhY2tlcnMsIG51dHMsIGFuZCBvdGhlciBzbmFjayBmb29kc1wiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDMsXG4gICAgICAgIG5hbWU6IFwiQmFrZXJ5XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkJyZWFkLCBwYXN0cmllcywgYW5kIGJha2VkIGdvb2RzXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogNCxcbiAgICAgICAgbmFtZTogXCJUb2JhY2NvXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNpZ2FyZXR0ZXMgYW5kIHRvYmFjY28gcHJvZHVjdHNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiA1LFxuICAgICAgICBuYW1lOiBcIkRhaXJ5XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIk1pbGssIGNoZWVzZSwgeW9ndXJ0LCBhbmQgZGFpcnkgcHJvZHVjdHNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiA2LFxuICAgICAgICBuYW1lOiBcIkZyb3plbiBGb29kc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJJY2UgY3JlYW0sIGZyb3plbiBtZWFscywgYW5kIGZyb3plbiBpdGVtc1wiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDcsXG4gICAgICAgIG5hbWU6IFwiUGVyc29uYWwgQ2FyZVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJUb2lsZXRyaWVzLCBoeWdpZW5lLCBhbmQgcGVyc29uYWwgY2FyZSBpdGVtc1wiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDgsXG4gICAgICAgIG5hbWU6IFwiSG91c2Vob2xkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNsZWFuaW5nIHN1cHBsaWVzLCBwYXBlciBwcm9kdWN0cywgYW5kIGhvdXNlaG9sZCBpdGVtc1wiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDksXG4gICAgICAgIG5hbWU6IFwiRnJlc2ggUHJvZHVjZVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJGcnVpdHMsIHZlZ2V0YWJsZXMsIGFuZCBmcmVzaCBwcm9kdWNlXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogMTAsXG4gICAgICAgIG5hbWU6IFwiQ2FuZHlcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2hvY29sYXRlcywgZ3VtcywgYW5kIHN3ZWV0IHRyZWF0c1wiLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIikuaW5zZXJ0TWFueShkZWZhdWx0Q2F0ZWdvcmllcyk7XG4gICAgcmV0dXJuIGRlZmF1bHRDYXRlZ29yaWVzO1xuICB9XG5cbiAgcmV0dXJuIGNhdGVnb3JpZXM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNhdmVDYXRlZ29yeShjYXRlZ29yeSkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICBpZiAoY2F0ZWdvcnkuaWQpIHtcbiAgICAvLyBVcGRhdGUgZXhpc3RpbmcgY2F0ZWdvcnlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY2F0ZWdvcmllc1wiKS51cGRhdGVPbmUoXG4gICAgICB7IGlkOiBOdW1iZXIoY2F0ZWdvcnkuaWQpIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBjYXRlZ29yeS5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHVwc2VydDogdHJ1ZSB9XG4gICAgKTtcbiAgICByZXR1cm4geyBpZDogY2F0ZWdvcnkuaWQsIC4uLmNhdGVnb3J5IH07XG4gIH0gZWxzZSB7XG4gICAgLy8gQ3JlYXRlIG5ldyBjYXRlZ29yeSAtIGZpbmQgbmV4dCBhdmFpbGFibGUgSURcbiAgICBjb25zdCBsYXN0Q2F0ZWdvcnkgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJjYXRlZ29yaWVzXCIpXG4gICAgICAuZmluZE9uZSh7fSwgeyBzb3J0OiB7IGlkOiAtMSB9IH0pO1xuICAgIGNvbnN0IG5leHRJZCA9IChsYXN0Q2F0ZWdvcnk/LmlkIHx8IDApICsgMTtcblxuICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0ge1xuICAgICAgaWQ6IG5leHRJZCxcbiAgICAgIG5hbWU6IGNhdGVnb3J5Lm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogY2F0ZWdvcnkuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIikuaW5zZXJ0T25lKG5ld0NhdGVnb3J5KTtcbiAgICByZXR1cm4gbmV3Q2F0ZWdvcnk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2F0ZWdvcnkoaWQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb24oXCJjYXRlZ29yaWVzXCIpXG4gICAgLmRlbGV0ZU9uZSh7IGlkOiBOdW1iZXIoaWQpIH0pO1xuICByZXR1cm4gcmVzdWx0LmRlbGV0ZWRDb3VudCA+IDA7XG59XG5cbi8vIENyZWRpdCBBY2NvdW50cyBoZWxwZXJzXG5hc3luYyBmdW5jdGlvbiBnZXRDcmVkaXRBY2NvdW50cygpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IGN1cnNvciA9IGRiXG4gICAgLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKVxuICAgIC5maW5kKHt9KVxuICAgIC5zb3J0KHsgbGFzdFRyYW5zYWN0aW9uRGF0ZTogLTEgfSk7XG4gIGNvbnN0IGFjY291bnRzID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcbiAgcmV0dXJuIGFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4gKHtcbiAgICAuLi5hY2NvdW50LFxuICAgIGlkOiBhY2NvdW50Ll9pZC50b1N0cmluZygpLFxuICAgIGNyZWF0ZWRBdDpcbiAgICAgIGFjY291bnQuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICA/IGFjY291bnQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50LmNyZWF0ZWRBdCxcbiAgICB1cGRhdGVkQXQ6XG4gICAgICBhY2NvdW50LnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC51cGRhdGVkQXQsXG4gICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTpcbiAgICAgIGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSxcbiAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRDcmVkaXRBY2NvdW50QnlOYW1lKGN1c3RvbWVyTmFtZSkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKS5maW5kT25lKHtcbiAgICBjdXN0b21lck5hbWU6IHtcbiAgICAgICRyZWdleDogbmV3IFJlZ0V4cChcbiAgICAgICAgXCJeXCIgKyBjdXN0b21lck5hbWUucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpICsgXCIkXCIsXG4gICAgICAgIFwiaVwiXG4gICAgICApLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlmICghYWNjb3VudCkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5hY2NvdW50LFxuICAgIGlkOiBhY2NvdW50Ll9pZC50b1N0cmluZygpLFxuICAgIGNyZWF0ZWRBdDpcbiAgICAgIGFjY291bnQuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICA/IGFjY291bnQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50LmNyZWF0ZWRBdCxcbiAgICB1cGRhdGVkQXQ6XG4gICAgICBhY2NvdW50LnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC51cGRhdGVkQXQsXG4gICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTpcbiAgICAgIGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBzZXJ0Q3JlZGl0QWNjb3VudChhY2NvdW50RGF0YSkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgeyBPYmplY3RJZCB9ID0gcmVxdWlyZShcIm1vbmdvZGJcIik7XG5cbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgY3VzdG9tZXJOYW1lID0gYWNjb3VudERhdGEuY3VzdG9tZXJOYW1lPy50cmltKCk7XG5cbiAgaWYgKCFjdXN0b21lck5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDdXN0b21lciBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICB9XG5cbiAgLy8gRmluZCBleGlzdGluZyBhY2NvdW50IChjYXNlLWluc2Vuc2l0aXZlKVxuICBjb25zdCBleGlzdGluZ0FjY291bnQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY3JlZGl0QWNjb3VudHNcIikuZmluZE9uZSh7XG4gICAgY3VzdG9tZXJOYW1lOiB7XG4gICAgICAkcmVnZXg6IG5ldyBSZWdFeHAoXG4gICAgICAgIFwiXlwiICsgY3VzdG9tZXJOYW1lLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKSArIFwiJFwiLFxuICAgICAgICBcImlcIlxuICAgICAgKSxcbiAgICB9LFxuICB9KTtcblxuICBpZiAoZXhpc3RpbmdBY2NvdW50KSB7XG4gICAgLy8gVXBkYXRlIGV4aXN0aW5nIGFjY291bnRcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgYmFsYW5jZTpcbiAgICAgICAgYWNjb3VudERhdGEuYmFsYW5jZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBOdW1iZXIoYWNjb3VudERhdGEuYmFsYW5jZSlcbiAgICAgICAgICA6IGV4aXN0aW5nQWNjb3VudC5iYWxhbmNlIHx8IDAsXG4gICAgICBwaG9uZTogYWNjb3VudERhdGEucGhvbmUgfHwgZXhpc3RpbmdBY2NvdW50LnBob25lIHx8IFwiXCIsXG4gICAgICBlbWFpbDogYWNjb3VudERhdGEuZW1haWwgfHwgZXhpc3RpbmdBY2NvdW50LmVtYWlsIHx8IFwiXCIsXG4gICAgICBhZGRyZXNzOiBhY2NvdW50RGF0YS5hZGRyZXNzIHx8IGV4aXN0aW5nQWNjb3VudC5hZGRyZXNzIHx8IFwiXCIsXG4gICAgICBub3RlczogYWNjb3VudERhdGEubm90ZXMgfHwgZXhpc3RpbmdBY2NvdW50Lm5vdGVzIHx8IFwiXCIsXG4gICAgICBpc0FjdGl2ZTpcbiAgICAgICAgYWNjb3VudERhdGEuaXNBY3RpdmUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gYWNjb3VudERhdGEuaXNBY3RpdmVcbiAgICAgICAgICA6IGV4aXN0aW5nQWNjb3VudC5pc0FjdGl2ZSxcbiAgICAgIHVwZGF0ZWRBdDogbm93LFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBVcGRhdGluZyBhY2NvdW50ICR7Y3VzdG9tZXJOYW1lfTogT2xkIGJhbGFuY2U9JHtleGlzdGluZ0FjY291bnQuYmFsYW5jZX0sIE5ldyBiYWxhbmNlPSR7dXBkYXRlRGF0YS5iYWxhbmNlfWBcbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIGxhc3QgdHJhbnNhY3Rpb24gZGF0ZSBpZiBwcm92aWRlZFxuICAgIGlmIChhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlKSB7XG4gICAgICB1cGRhdGVEYXRhLmxhc3RUcmFuc2FjdGlvbkRhdGUgPVxuICAgICAgICBhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICAgID8gYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZVxuICAgICAgICAgIDogbmV3IERhdGUoYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRyYW5zYWN0aW9uIGNvdW50IGlmIHByb3ZpZGVkXG4gICAgaWYgKGFjY291bnREYXRhLnRyYW5zYWN0aW9uQ291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS50cmFuc2FjdGlvbkNvdW50ID0gTnVtYmVyKGFjY291bnREYXRhLnRyYW5zYWN0aW9uQ291bnQpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcImNyZWRpdEFjY291bnRzXCIpXG4gICAgICAudXBkYXRlT25lKHsgX2lkOiBleGlzdGluZ0FjY291bnQuX2lkIH0sIHsgJHNldDogdXBkYXRlRGF0YSB9KTtcblxuICAgIGlmIChyZXN1bHQubW9kaWZpZWRDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRBY2NvdW50ID0gYXdhaXQgZGJcbiAgICAgICAgLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKVxuICAgICAgICAuZmluZE9uZSh7IF9pZDogZXhpc3RpbmdBY2NvdW50Ll9pZCB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnVwZGF0ZWRBY2NvdW50LFxuICAgICAgICBpZDogdXBkYXRlZEFjY291bnQuX2lkLnRvU3RyaW5nKCksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5leGlzdGluZ0FjY291bnQsXG4gICAgICBpZDogZXhpc3RpbmdBY2NvdW50Ll9pZC50b1N0cmluZygpLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gQ3JlYXRlIG5ldyBhY2NvdW50XG4gICAgY29uc3QgbmV3QWNjb3VudCA9IHtcbiAgICAgIGN1c3RvbWVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgYmFsYW5jZTogTnVtYmVyKGFjY291bnREYXRhLmJhbGFuY2UgfHwgMCksXG4gICAgICBwaG9uZTogYWNjb3VudERhdGEucGhvbmUgfHwgXCJcIixcbiAgICAgIGVtYWlsOiBhY2NvdW50RGF0YS5lbWFpbCB8fCBcIlwiLFxuICAgICAgYWRkcmVzczogYWNjb3VudERhdGEuYWRkcmVzcyB8fCBcIlwiLFxuICAgICAgbm90ZXM6IGFjY291bnREYXRhLm5vdGVzIHx8IFwiXCIsXG4gICAgICBpc0FjdGl2ZTpcbiAgICAgICAgYWNjb3VudERhdGEuaXNBY3RpdmUgIT09IHVuZGVmaW5lZCA/IGFjY291bnREYXRhLmlzQWN0aXZlIDogdHJ1ZSxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IE51bWJlcihhY2NvdW50RGF0YS50cmFuc2FjdGlvbkNvdW50IHx8IDApLFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgIGxhc3RUcmFuc2FjdGlvbkRhdGU6IGFjY291bnREYXRhLmxhc3RUcmFuc2FjdGlvbkRhdGVcbiAgICAgICAgPyBhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICAgID8gYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZVxuICAgICAgICAgIDogbmV3IERhdGUoYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZSlcbiAgICAgICAgOiBub3csXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKS5pbnNlcnRPbmUobmV3QWNjb3VudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ubmV3QWNjb3VudCxcbiAgICAgIGlkOiByZXN1bHQuaW5zZXJ0ZWRJZC50b1N0cmluZygpLFxuICAgIH07XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVG9DcmVkaXRBY2NvdW50KGN1c3RvbWVyTmFtZSwgYW1vdW50LCB0cmFuc2FjdGlvbklkID0gbnVsbCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICAvLyBHZXQgb3IgY3JlYXRlIGFjY291bnRcbiAgbGV0IGFjY291bnQgPSBhd2FpdCBnZXRDcmVkaXRBY2NvdW50QnlOYW1lKGN1c3RvbWVyTmFtZSk7XG5cbiAgaWYgKCFhY2NvdW50KSB7XG4gICAgLy8gQ3JlYXRlIG5ldyBhY2NvdW50IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBhY2NvdW50ID0gYXdhaXQgdXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgIGJhbGFuY2U6IGFtb3VudCxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IDEsXG4gICAgICBsYXN0VHJhbnNhY3Rpb25EYXRlOiBuZXcgRGF0ZSgpLFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIFVwZGF0ZSBleGlzdGluZyBhY2NvdW50XG4gICAgY29uc3QgbmV3QmFsYW5jZSA9IE51bWJlcihhY2NvdW50LmJhbGFuY2UgfHwgMCkgKyBOdW1iZXIoYW1vdW50KTtcbiAgICBjb25zdCBuZXdUcmFuc2FjdGlvbkNvdW50ID0gTnVtYmVyKGFjY291bnQudHJhbnNhY3Rpb25Db3VudCB8fCAwKSArIDE7XG5cbiAgICBhY2NvdW50ID0gYXdhaXQgdXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgIGJhbGFuY2U6IG5ld0JhbGFuY2UsXG4gICAgICB0cmFuc2FjdGlvbkNvdW50OiBuZXdUcmFuc2FjdGlvbkNvdW50LFxuICAgICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIHBob25lOiBhY2NvdW50LnBob25lLFxuICAgICAgZW1haWw6IGFjY291bnQuZW1haWwsXG4gICAgICBhZGRyZXNzOiBhY2NvdW50LmFkZHJlc3MsXG4gICAgICBub3RlczogYWNjb3VudC5ub3RlcyxcbiAgICAgIGlzQWN0aXZlOiBhY2NvdW50LmlzQWN0aXZlLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGFjY291bnQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBheVRvQ3JlZGl0QWNjb3VudChjdXN0b21lck5hbWUsIHBheW1lbnRBbW91bnQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG5cbiAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGdldENyZWRpdEFjY291bnRCeU5hbWUoY3VzdG9tZXJOYW1lKTtcbiAgaWYgKCFhY2NvdW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ3JlZGl0IGFjY291bnQgbm90IGZvdW5kXCIpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudEJhbGFuY2UgPSBOdW1iZXIoYWNjb3VudC5iYWxhbmNlIHx8IDApO1xuICBjb25zdCBwYXltZW50ID0gTnVtYmVyKHBheW1lbnRBbW91bnQpO1xuXG4gIGNvbnNvbGUubG9nKFxuICAgIGBQcm9jZXNzaW5nIHBheW1lbnQgZm9yICR7Y3VzdG9tZXJOYW1lfTogQmFsYW5jZT0ke2N1cnJlbnRCYWxhbmNlfSwgUGF5bWVudD0ke3BheW1lbnR9YFxuICApO1xuXG4gIGlmIChwYXltZW50ID4gY3VycmVudEJhbGFuY2UpIHtcbiAgICBjb25zb2xlLmxvZyhgUGF5bWVudCByZWplY3RlZDogJHtwYXltZW50fSA+ICR7Y3VycmVudEJhbGFuY2V9YCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUGF5bWVudCBhbW91bnQgZXhjZWVkcyBhY2NvdW50IGJhbGFuY2VcIik7XG4gIH1cblxuICBjb25zdCBuZXdCYWxhbmNlID0gY3VycmVudEJhbGFuY2UgLSBwYXltZW50O1xuICBjb25zb2xlLmxvZyhgQ2FsY3VsYXRlZCBuZXcgYmFsYW5jZTogJHtuZXdCYWxhbmNlfWApO1xuXG4gIGNvbnN0IHVwZGF0ZWRBY2NvdW50ID0gYXdhaXQgdXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgY3VzdG9tZXJOYW1lOiBjdXN0b21lck5hbWUsXG4gICAgYmFsYW5jZTogbmV3QmFsYW5jZSxcbiAgICB0cmFuc2FjdGlvbkNvdW50OiBhY2NvdW50LnRyYW5zYWN0aW9uQ291bnQsXG4gICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTogbmV3IERhdGUoKSxcbiAgICBwaG9uZTogYWNjb3VudC5waG9uZSxcbiAgICBlbWFpbDogYWNjb3VudC5lbWFpbCxcbiAgICBhZGRyZXNzOiBhY2NvdW50LmFkZHJlc3MsXG4gICAgbm90ZXM6IGFjY291bnQubm90ZXMsXG4gICAgaXNBY3RpdmU6IGFjY291bnQuaXNBY3RpdmUsXG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKGBVcGRhdGVkIGFjY291bnQgYmFsYW5jZTogJHt1cGRhdGVkQWNjb3VudC5iYWxhbmNlfWApO1xuXG4gIHJldHVybiB7XG4gICAgLi4udXBkYXRlZEFjY291bnQsXG4gICAgcGF5bWVudEFtb3VudDogcGF5bWVudCxcbiAgICBwcmV2aW91c0JhbGFuY2U6IGN1cnJlbnRCYWxhbmNlLFxuICAgIG5ld0JhbGFuY2U6IG5ld0JhbGFuY2UsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNyZWRpdEFjY291bnQoaWQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IHsgT2JqZWN0SWQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgb2JqZWN0SWQgPSBuZXcgT2JqZWN0SWQoaWQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcImNyZWRpdEFjY291bnRzXCIpXG4gICAgICAuZGVsZXRlT25lKHsgX2lkOiBvYmplY3RJZCB9KTtcbiAgICByZXR1cm4gcmVzdWx0LmRlbGV0ZWRDb3VudCA+IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGNyZWRpdCBhY2NvdW50OlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaENyZWRpdEFjY291bnRzKHNlYXJjaFRlcm0sIGluY2x1ZGVJbmFjdGl2ZSA9IGZhbHNlKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuXG4gIGNvbnN0IHF1ZXJ5ID0ge1xuICAgIGN1c3RvbWVyTmFtZTogeyAkcmVnZXg6IHNlYXJjaFRlcm0sICRvcHRpb25zOiBcImlcIiB9LFxuICB9O1xuXG4gIGlmICghaW5jbHVkZUluYWN0aXZlKSB7XG4gICAgcXVlcnkuaXNBY3RpdmUgPSB7ICRuZTogZmFsc2UgfTtcbiAgfVxuXG4gIGNvbnN0IGN1cnNvciA9IGRiXG4gICAgLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKVxuICAgIC5maW5kKHF1ZXJ5KVxuICAgIC5zb3J0KHsgYmFsYW5jZTogLTEsIGxhc3RUcmFuc2FjdGlvbkRhdGU6IC0xIH0pO1xuICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XG5cbiAgcmV0dXJuIGFjY291bnRzLm1hcCgoYWNjb3VudCkgPT4gKHtcbiAgICAuLi5hY2NvdW50LFxuICAgIGlkOiBhY2NvdW50Ll9pZC50b1N0cmluZygpLFxuICAgIGNyZWF0ZWRBdDpcbiAgICAgIGFjY291bnQuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICA/IGFjY291bnQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50LmNyZWF0ZWRBdCxcbiAgICB1cGRhdGVkQXQ6XG4gICAgICBhY2NvdW50LnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC51cGRhdGVkQXQsXG4gICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTpcbiAgICAgIGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZSxcbiAgfSkpO1xufVxuXG4vLyBUaWxsIENvdW50IE1hbmFnZW1lbnQgRnVuY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VGlsbCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICBjb25zdCB0aWxsQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oXCJ0aWxsQ291bnRzXCIpO1xuXG4gICAgLy8gRmluZCB0aGUgbW9zdCByZWNlbnQgb3BlbiB0aWxsIChubyBlbmRUaW1lKVxuICAgIGNvbnN0IGN1cnJlbnRUaWxsID0gYXdhaXQgdGlsbENvbGxlY3Rpb24uZmluZE9uZShcbiAgICAgIHsgZW5kVGltZTogbnVsbCB9LFxuICAgICAgeyBzb3J0OiB7IHN0YXJ0VGltZTogLTEgfSB9XG4gICAgKTtcblxuICAgIHJldHVybiBjdXJyZW50VGlsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjdXJyZW50IHRpbGw6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUaWxsSGlzdG9yeShsaW1pdCA9IDIwKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gICAgY29uc3QgdGlsbENvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKFwidGlsbENvdW50c1wiKTtcblxuICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCB0aWxsQ29sbGVjdGlvblxuICAgICAgLmZpbmQoe30pXG4gICAgICAuc29ydCh7IHN0YXJ0VGltZTogLTEgfSlcbiAgICAgIC5saW1pdChsaW1pdClcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICByZXR1cm4gaGlzdG9yeTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyB0aWxsIGhpc3Rvcnk6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzdGFydFRpbGwodGlsbERhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICBjb25zdCB0aWxsQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oXCJ0aWxsQ291bnRzXCIpO1xuXG4gICAgLy8gR2VuZXJhdGUgYSBzaW1wbGUgSURcbiAgICBjb25zdCBnZW5lcmF0ZUlkID0gKCkgPT5cbiAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcblxuICAgIGNvbnN0IHRpbGwgPSB7XG4gICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgc3RhcnRBbW91bnQ6IHRpbGxEYXRhLnN0YXJ0QW1vdW50LFxuICAgICAgc3RhcnRVc2VyOiB0aWxsRGF0YS5zdGFydFVzZXIsXG4gICAgICBzdGFydFRpbWU6IHRpbGxEYXRhLnN0YXJ0VGltZSxcbiAgICAgIHN0YXJ0RGVub21pbmF0aW9uczogdGlsbERhdGEuc3RhcnREZW5vbWluYXRpb25zIHx8IHt9LFxuICAgICAgZW5kQW1vdW50OiBudWxsLFxuICAgICAgZW5kVXNlcjogbnVsbCxcbiAgICAgIGVuZFRpbWU6IG51bGwsXG4gICAgICBlbmREZW5vbWluYXRpb25zOiBudWxsLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcblxuICAgIGF3YWl0IHRpbGxDb2xsZWN0aW9uLmluc2VydE9uZSh0aWxsKTtcbiAgICByZXR1cm4gdGlsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RhcnRpbmcgdGlsbDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuZFRpbGwodGlsbElkLCBlbmREYXRhKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gICAgY29uc3QgdGlsbENvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKFwidGlsbENvdW50c1wiKTtcblxuICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHRpbGxDb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgIHsgaWQ6IHRpbGxJZCB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgZW5kQW1vdW50OiBlbmREYXRhLmVuZEFtb3VudCxcbiAgICAgICAgICBlbmRVc2VyOiBlbmREYXRhLmVuZFVzZXIsXG4gICAgICAgICAgZW5kVGltZTogZW5kRGF0YS5lbmRUaW1lLFxuICAgICAgICAgIGVuZERlbm9taW5hdGlvbnM6IGVuZERhdGEuZW5kRGVub21pbmF0aW9ucyB8fCB7fSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKHVwZGF0ZVJlc3VsdC5tYXRjaGVkQ291bnQgPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRpbGwgbm90IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZWRUaWxsID0gYXdhaXQgdGlsbENvbGxlY3Rpb24uZmluZE9uZSh7IGlkOiB0aWxsSWQgfSk7XG4gICAgcmV0dXJuIHVwZGF0ZWRUaWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbmRpbmcgdGlsbDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25uZWN0LFxuICBnZXRBbGxJbnZlbnRvcnksXG4gIGdldEludmVudG9yeUJ5SWQsXG4gIHVwc2VydEludmVudG9yeUl0ZW1zLFxuICBkZWxldGVJbnZlbnRvcnlCeUlkLFxuICBnZXRVc2VycyxcbiAgZ2V0VXNlckJ5VXNlcm5hbWUsXG4gIHVwc2VydFVzZXIsXG4gIHJlcGxhY2VBbGxVc2VycyxcbiAgZGVsZXRlVXNlckJ5SWQsXG4gIHNhdmVUcmFuc2FjdGlvbixcbiAgZ2V0VHJhbnNhY3Rpb25zLFxuICBkZWxldGVUcmFuc2FjdGlvbixcbiAgZ2V0Q2F0ZWdvcmllcyxcbiAgc2F2ZUNhdGVnb3J5LFxuICBkZWxldGVDYXRlZ29yeSxcbiAgZ2V0Q3JlZGl0QWNjb3VudHMsXG4gIGdldENyZWRpdEFjY291bnRCeU5hbWUsXG4gIHVwc2VydENyZWRpdEFjY291bnQsXG4gIGFkZFRvQ3JlZGl0QWNjb3VudCxcbiAgcGF5VG9DcmVkaXRBY2NvdW50LFxuICBkZWxldGVDcmVkaXRBY2NvdW50LFxuICBzZWFyY2hDcmVkaXRBY2NvdW50cyxcbiAgZ2V0Q3VycmVudFRpbGwsXG4gIGdldFRpbGxIaXN0b3J5LFxuICBzdGFydFRpbGwsXG4gIGVuZFRpbGwsXG59O1xuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicmVxdWlyZSIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJkYk5hbWUiLCJNT05HT19EQiIsIl9jbGllbnQiLCJfZGIiLCJjb25uZWN0IiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZGIiLCJjb2xsZWN0aW9uIiwiY3JlYXRlSW5kZXgiLCJpZCIsInVuaXF1ZSIsInNwYXJzZSIsInVzZXJuYW1lIiwiZSIsImdldEFsbEludmVudG9yeSIsImZpbmQiLCJzb3J0IiwibmFtZSIsInRvQXJyYXkiLCJnZXRJbnZlbnRvcnlCeUlkIiwibiIsIk51bWJlciIsImZpbmRPbmUiLCJ1cHNlcnRJbnZlbnRvcnlJdGVtcyIsIml0ZW1zIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsIm9wcyIsIm1hcCIsIml0IiwiaW5kZXgiLCJKU09OIiwic3RyaW5naWZ5IiwiaXRlbUlkIiwidW5kZWZpbmVkIiwiaXNOYU4iLCJlcnJvciIsIkVycm9yIiwib2JqIiwiY2F0ZWdvcnkiLCJwcmljZSIsInN0b2NrIiwibG93U3RvY2tUaHJlc2hvbGQiLCJ0YXhhYmxlIiwiYmFyY29kZSIsInRvU3RyaW5nIiwiYmFyY29kZTIiLCJwcm9kdWN0SWQiLCJmaWx0ZXIiLCJ1cGRhdGVPbmUiLCJ1cGRhdGUiLCIkc2V0IiwidXBzZXJ0IiwicmVzdWx0IiwiYnVsa1dyaXRlIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImkiLCJpdGVtIiwiaXRlbVdpdGhVbmlxdWVQcm9kdWN0SWQiLCJEYXRlIiwibm93IiwiaW5kaXZpZHVhbEVycm9yIiwiZGVsZXRlSW52ZW50b3J5QnlJZCIsImRlbGV0ZU9uZSIsImdldFVzZXJzIiwidXNlcnMiLCJkZWZhdWx0VXNlcnMiLCJwd2QiLCJyb2xlIiwiZW1haWwiLCJhY3RpdmUiLCJwZXJtaXNzaW9uc19qc29uIiwiaW52ZW50b3J5IiwicmVwb3J0cyIsInBvcyIsInRyYW5zYWN0aW9ucyIsIm1hbmFnZVVzZXJzIiwibWFuYWdlSW52ZW50b3J5IiwibWFuYWdlUmVwb3J0cyIsIm1hbmFnZVBPUyIsImluc2VydE1hbnkiLCJuZXdVc2VycyIsInVzZXIiLCJwYXNzd29yZCIsImdldFVzZXJCeVVzZXJuYW1lIiwidXBzZXJ0VXNlciIsImJvZHkiLCJwZXJtaXNzaW9ucyIsInJlcGxhY2VBbGxVc2VycyIsImRlbGV0ZU1hbnkiLCJmb3JtYXR0ZWRVc2VycyIsImRlbGV0ZVVzZXJCeUlkIiwic2F2ZVRyYW5zYWN0aW9uIiwidHhPYmoiLCJwYXltZW50QnJlYWtkb3duIiwicGF5bWVudCIsInRyYW5zYWN0aW9uVHlwZSIsImNhc2hBbW91bnQiLCJjYXJkQW1vdW50IiwiY3JlZGl0QW1vdW50IiwiaGFzTG90dG8iLCJmb3JFYWNoIiwiYW1vdW50IiwibWV0aG9kIiwidG9Mb3dlckNhc2UiLCJkb2MiLCJsZWdhY3lfaWQiLCJ0aW1lc3RhbXAiLCJzdWJ0b3RhbCIsInRheGFibGVBbW91bnQiLCJub25UYXhhYmxlQW1vdW50IiwidGF4IiwidG90YWwiLCJjYXNoYmFjayIsImNoYW5nZSIsInByb2R1Y3RfaWQiLCJxdWFudGl0eSIsImFwcGx5VGF4IiwicmVzIiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRJZCIsImN1ciIsIm5ld1N0b2NrIiwiZ2V0VHJhbnNhY3Rpb25zIiwibGltaXQiLCJjdXJzb3IiLCJfaWQiLCJyb3dzIiwiciIsInRvSVNPU3RyaW5nIiwiZGVsZXRlVHJhbnNhY3Rpb24iLCJPYmplY3RJZCIsIm9iamVjdElkIiwiZGVsZXRlZENvdW50IiwiZ2V0Q2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJkZWZhdWx0Q2F0ZWdvcmllcyIsImRlc2NyaXB0aW9uIiwic2F2ZUNhdGVnb3J5IiwidXBkYXRlZEF0IiwibGFzdENhdGVnb3J5IiwibmV4dElkIiwibmV3Q2F0ZWdvcnkiLCJjcmVhdGVkQXQiLCJkZWxldGVDYXRlZ29yeSIsImdldENyZWRpdEFjY291bnRzIiwibGFzdFRyYW5zYWN0aW9uRGF0ZSIsImFjY291bnRzIiwiYWNjb3VudCIsImdldENyZWRpdEFjY291bnRCeU5hbWUiLCJjdXN0b21lck5hbWUiLCIkcmVnZXgiLCJSZWdFeHAiLCJyZXBsYWNlIiwidXBzZXJ0Q3JlZGl0QWNjb3VudCIsImFjY291bnREYXRhIiwidHJpbSIsImV4aXN0aW5nQWNjb3VudCIsInVwZGF0ZURhdGEiLCJiYWxhbmNlIiwicGhvbmUiLCJhZGRyZXNzIiwibm90ZXMiLCJpc0FjdGl2ZSIsInRyYW5zYWN0aW9uQ291bnQiLCJtb2RpZmllZENvdW50IiwidXBkYXRlZEFjY291bnQiLCJuZXdBY2NvdW50IiwiYWRkVG9DcmVkaXRBY2NvdW50IiwidHJhbnNhY3Rpb25JZCIsIm5ld0JhbGFuY2UiLCJuZXdUcmFuc2FjdGlvbkNvdW50IiwicGF5VG9DcmVkaXRBY2NvdW50IiwicGF5bWVudEFtb3VudCIsImN1cnJlbnRCYWxhbmNlIiwicHJldmlvdXNCYWxhbmNlIiwiZGVsZXRlQ3JlZGl0QWNjb3VudCIsInNlYXJjaENyZWRpdEFjY291bnRzIiwic2VhcmNoVGVybSIsImluY2x1ZGVJbmFjdGl2ZSIsInF1ZXJ5IiwiJG9wdGlvbnMiLCIkbmUiLCJnZXRDdXJyZW50VGlsbCIsInRpbGxDb2xsZWN0aW9uIiwiY3VycmVudFRpbGwiLCJlbmRUaW1lIiwic3RhcnRUaW1lIiwiZ2V0VGlsbEhpc3RvcnkiLCJoaXN0b3J5Iiwic3RhcnRUaWxsIiwidGlsbERhdGEiLCJnZW5lcmF0ZUlkIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0ciIsInRpbGwiLCJzdGFydEFtb3VudCIsInN0YXJ0VXNlciIsInN0YXJ0RGVub21pbmF0aW9ucyIsImVuZEFtb3VudCIsImVuZFVzZXIiLCJlbmREZW5vbWluYXRpb25zIiwiZW5kVGlsbCIsInRpbGxJZCIsImVuZERhdGEiLCJ1cGRhdGVSZXN1bHQiLCJtYXRjaGVkQ291bnQiLCJ1cGRhdGVkVGlsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./server/mongo.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcredit%2Faccounts%2Froute&page=%2Fapi%2Fcredit%2Faccounts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcredit%2Faccounts%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();