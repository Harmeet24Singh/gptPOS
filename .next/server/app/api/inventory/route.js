"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/inventory/route";
exports.ids = ["app/api/inventory/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finventory%2Froute&page=%2Fapi%2Finventory%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finventory%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finventory%2Froute&page=%2Fapi%2Finventory%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finventory%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_harmeetsingh_Documents_harmeet24singhGIT_gptPOS_app_api_inventory_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/inventory/route.js */ \"(rsc)/./app/api/inventory/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/inventory/route\",\n        pathname: \"/api/inventory\",\n        filename: \"route\",\n        bundlePath: \"app/api/inventory/route\"\n    },\n    resolvedPagePath: \"/Users/harmeetsingh/Documents/harmeet24singhGIT/gptPOS/app/api/inventory/route.js\",\n    nextConfigOutput,\n    userland: _Users_harmeetsingh_Documents_harmeet24singhGIT_gptPOS_app_api_inventory_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/inventory/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnZlbnRvcnklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmludmVudG9yeSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmludmVudG9yeSUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRmhhcm1lZXRzaW5naCUyRkRvY3VtZW50cyUyRmhhcm1lZXQyNHNpbmdoR0lUJTJGZ3B0UE9TJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmhhcm1lZXRzaW5naCUyRkRvY3VtZW50cyUyRmhhcm1lZXQyNHNpbmdoR0lUJTJGZ3B0UE9TJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNpQztBQUM5RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlbmllbmNlLXN0b3JlLWludmVudG9yeS8/YjhjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvaGFybWVldHNpbmdoL0RvY3VtZW50cy9oYXJtZWV0MjRzaW5naEdJVC9ncHRQT1MvYXBwL2FwaS9pbnZlbnRvcnkvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ludmVudG9yeS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludmVudG9yeVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvaW52ZW50b3J5L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2hhcm1lZXRzaW5naC9Eb2N1bWVudHMvaGFybWVldDI0c2luZ2hHSVQvZ3B0UE9TL2FwcC9hcGkvaW52ZW50b3J5L3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbnZlbnRvcnkvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finventory%2Froute&page=%2Fapi%2Finventory%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finventory%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/inventory/route.js":
/*!************************************!*\
  !*** ./app/api/inventory/route.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nconst mongo = __webpack_require__(/*! ../../../server/mongo */ \"(rsc)/./server/mongo.js\");\nasync function GET() {\n    try {\n        const rows = await mongo.getAllInventory();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(rows);\n    } catch (err) {\n        console.error(\"GET /api/inventory error\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to read inventory\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(req) {\n    try {\n        console.log(\"POST /api/inventory called\");\n        const { checkApiKey } = __webpack_require__(/*! ../../../server/auth */ \"(rsc)/./server/auth.js\");\n        if (!checkApiKey(req)) {\n            console.log(\"API key check failed\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"API key check passed\");\n        const body = await req.json();\n        console.log(\"Request body type:\", typeof body);\n        console.log(\"Request body length:\", Array.isArray(body) ? body.length : \"not array\");\n        // Accept either an array of items or single item\n        let items = [];\n        if (Array.isArray(body)) items = body;\n        else if (body && Array.isArray(body.items)) items = body.items;\n        else if (body && typeof body === \"object\") items = [\n            body\n        ];\n        console.log(\"Items to upsert:\", items.length);\n        if (items.length > 0) {\n            console.log(\"First item sample:\", JSON.stringify(items[0], null, 2));\n        }\n        if (!items || items.length === 0) {\n            console.log(\"No items to upsert, returning success\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: true\n            });\n        }\n        console.log(\"Calling mongo.upsertInventoryItems...\");\n        await mongo.upsertInventoryItems(items);\n        console.log(\"Upsert completed successfully\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true\n        });\n    } catch (err) {\n        console.error(\"POST /api/inventory error - Full error:\", err);\n        console.error(\"Error message:\", err.message);\n        console.error(\"Error stack:\", err.stack);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to upsert inventory\",\n            details: err.message,\n            type: err.name\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ludmVudG9yeS9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDM0MsTUFBTUMsUUFBUUMsbUJBQU9BLENBQUM7QUFFZixlQUFlQztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNSCxNQUFNSSxlQUFlO1FBQ3hDLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQUNGO0lBQzNCLEVBQUUsT0FBT0csS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsNEJBQTRCRjtRQUMxQyxPQUFPUCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQUVHLE9BQU87UUFBMkIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDaEY7QUFDRjtBQUVPLGVBQWVDLEtBQUtDLEdBQUc7SUFDNUIsSUFBSTtRQUNGSixRQUFRSyxHQUFHLENBQUM7UUFDWixNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHWixtQkFBT0EsQ0FBQyxvREFBc0I7UUFDdEQsSUFBSSxDQUFDWSxZQUFZRixNQUFNO1lBQ3JCSixRQUFRSyxHQUFHLENBQUM7WUFDWixPQUFPYixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFRyxPQUFPO1lBQWUsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3BFO1FBQ0FGLFFBQVFLLEdBQUcsQ0FBQztRQUVaLE1BQU1FLE9BQU8sTUFBTUgsSUFBSU4sSUFBSTtRQUMzQkUsUUFBUUssR0FBRyxDQUFDLHNCQUFzQixPQUFPRTtRQUN6Q1AsUUFBUUssR0FBRyxDQUFDLHdCQUF3QkcsTUFBTUMsT0FBTyxDQUFDRixRQUFRQSxLQUFLRyxNQUFNLEdBQUc7UUFFeEUsaURBQWlEO1FBQ2pELElBQUlDLFFBQVEsRUFBRTtRQUNkLElBQUlILE1BQU1DLE9BQU8sQ0FBQ0YsT0FBT0ksUUFBUUo7YUFDNUIsSUFBSUEsUUFBUUMsTUFBTUMsT0FBTyxDQUFDRixLQUFLSSxLQUFLLEdBQUdBLFFBQVFKLEtBQUtJLEtBQUs7YUFDekQsSUFBSUosUUFBUSxPQUFPQSxTQUFTLFVBQVVJLFFBQVE7WUFBQ0o7U0FBSztRQUV6RFAsUUFBUUssR0FBRyxDQUFDLG9CQUFvQk0sTUFBTUQsTUFBTTtRQUM1QyxJQUFJQyxNQUFNRCxNQUFNLEdBQUcsR0FBRztZQUNwQlYsUUFBUUssR0FBRyxDQUFDLHNCQUFzQk8sS0FBS0MsU0FBUyxDQUFDRixLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU07UUFDbkU7UUFFQSxJQUFJLENBQUNBLFNBQVNBLE1BQU1ELE1BQU0sS0FBSyxHQUFHO1lBQ2hDVixRQUFRSyxHQUFHLENBQUM7WUFDWixPQUFPYixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFZ0IsSUFBSTtZQUFLO1FBQ3RDO1FBRUFkLFFBQVFLLEdBQUcsQ0FBQztRQUNaLE1BQU1aLE1BQU1zQixvQkFBb0IsQ0FBQ0o7UUFDakNYLFFBQVFLLEdBQUcsQ0FBQztRQUNaLE9BQU9iLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFBRWdCLElBQUk7UUFBSztJQUN0QyxFQUFFLE9BQU9mLEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLDJDQUEyQ0Y7UUFDekRDLFFBQVFDLEtBQUssQ0FBQyxrQkFBa0JGLElBQUlpQixPQUFPO1FBQzNDaEIsUUFBUUMsS0FBSyxDQUFDLGdCQUFnQkYsSUFBSWtCLEtBQUs7UUFDdkMsT0FBT3pCLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJHLE9BQU87WUFDUGlCLFNBQVNuQixJQUFJaUIsT0FBTztZQUNwQkcsTUFBTXBCLElBQUlxQixJQUFJO1FBQ2hCLEdBQUc7WUFBRWxCLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29udmVuaWVuY2Utc3RvcmUtaW52ZW50b3J5Ly4vYXBwL2FwaS9pbnZlbnRvcnkvcm91dGUuanM/OWRlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmNvbnN0IG1vbmdvID0gcmVxdWlyZSgnLi4vLi4vLi4vc2VydmVyL21vbmdvJyk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgcm93cyA9IGF3YWl0IG1vbmdvLmdldEFsbEludmVudG9yeSgpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyb3dzKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkdFVCAvYXBpL2ludmVudG9yeSBlcnJvclwiLCBlcnIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byByZWFkIGludmVudG9yeVwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJQT1NUIC9hcGkvaW52ZW50b3J5IGNhbGxlZFwiKTtcbiAgICBjb25zdCB7IGNoZWNrQXBpS2V5IH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmVyL2F1dGhcIik7XG4gICAgaWYgKCFjaGVja0FwaUtleShyZXEpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkFQSSBrZXkgY2hlY2sgZmFpbGVkXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJBUEkga2V5IGNoZWNrIHBhc3NlZFwiKTtcbiAgICBcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3QgYm9keSB0eXBlOlwiLCB0eXBlb2YgYm9keSk7XG4gICAgY29uc29sZS5sb2coXCJSZXF1ZXN0IGJvZHkgbGVuZ3RoOlwiLCBBcnJheS5pc0FycmF5KGJvZHkpID8gYm9keS5sZW5ndGggOiAnbm90IGFycmF5Jyk7XG4gICAgXG4gICAgLy8gQWNjZXB0IGVpdGhlciBhbiBhcnJheSBvZiBpdGVtcyBvciBzaW5nbGUgaXRlbVxuICAgIGxldCBpdGVtcyA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGJvZHkpKSBpdGVtcyA9IGJvZHk7XG4gICAgZWxzZSBpZiAoYm9keSAmJiBBcnJheS5pc0FycmF5KGJvZHkuaXRlbXMpKSBpdGVtcyA9IGJvZHkuaXRlbXM7XG4gICAgZWxzZSBpZiAoYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gXCJvYmplY3RcIikgaXRlbXMgPSBbYm9keV07XG5cbiAgICBjb25zb2xlLmxvZyhcIkl0ZW1zIHRvIHVwc2VydDpcIiwgaXRlbXMubGVuZ3RoKTtcbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coXCJGaXJzdCBpdGVtIHNhbXBsZTpcIiwgSlNPTi5zdHJpbmdpZnkoaXRlbXNbMF0sIG51bGwsIDIpKTtcbiAgICB9XG5cbiAgICBpZiAoIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBpdGVtcyB0byB1cHNlcnQsIHJldHVybmluZyBzdWNjZXNzXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiQ2FsbGluZyBtb25nby51cHNlcnRJbnZlbnRvcnlJdGVtcy4uLlwiKTtcbiAgICBhd2FpdCBtb25nby51cHNlcnRJbnZlbnRvcnlJdGVtcyhpdGVtcyk7XG4gICAgY29uc29sZS5sb2coXCJVcHNlcnQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlBPU1QgL2FwaS9pbnZlbnRvcnkgZXJyb3IgLSBGdWxsIGVycm9yOlwiLCBlcnIpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBtZXNzYWdlOlwiLCBlcnIubWVzc2FnZSk7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHN0YWNrOlwiLCBlcnIuc3RhY2spO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHVwc2VydCBpbnZlbnRvcnlcIiwgXG4gICAgICBkZXRhaWxzOiBlcnIubWVzc2FnZSxcbiAgICAgIHR5cGU6IGVyci5uYW1lIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJtb25nbyIsInJlcXVpcmUiLCJHRVQiLCJyb3dzIiwiZ2V0QWxsSW52ZW50b3J5IiwianNvbiIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsIlBPU1QiLCJyZXEiLCJsb2ciLCJjaGVja0FwaUtleSIsImJvZHkiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJpdGVtcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsInVwc2VydEludmVudG9yeUl0ZW1zIiwibWVzc2FnZSIsInN0YWNrIiwiZGV0YWlscyIsInR5cGUiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/inventory/route.js\n");

/***/ }),

/***/ "(rsc)/./server/auth.js":
/*!************************!*\
  !*** ./server/auth.js ***!
  \************************/
/***/ ((module) => {

eval("// Simple API key check for write endpoints. For local dev we default to 'dev-secret'.\n\nconst API_KEY = process.env.API_KEY || \"dev-secret\";\nfunction checkApiKey(req) {\n    // `req` is a Next.js Request in route handlers\n    try {\n        const headerVal = req.headers && typeof req.headers.get === \"function\" ? req.headers.get(\"x-api-key\") : null;\n        return headerVal === API_KEY;\n    } catch (e) {\n        return false;\n    }\n}\nmodule.exports = {\n    API_KEY,\n    checkApiKey\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxzRkFBc0Y7O0FBQ3RGLE1BQU1BLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0YsT0FBTyxJQUFJO0FBRXZDLFNBQVNHLFlBQVlDLEdBQUc7SUFDdEIsK0NBQStDO0lBQy9DLElBQUk7UUFDRixNQUFNQyxZQUNKRCxJQUFJRSxPQUFPLElBQUksT0FBT0YsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLEtBQUssYUFDdENILElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQ2hCO1FBQ04sT0FBT0YsY0FBY0w7SUFDdkIsRUFBRSxPQUFPUSxHQUFHO1FBQ1YsT0FBTztJQUNUO0FBQ0Y7QUFFQUMsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZWO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZW5pZW5jZS1zdG9yZS1pbnZlbnRvcnkvLi9zZXJ2ZXIvYXV0aC5qcz9kY2IzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBBUEkga2V5IGNoZWNrIGZvciB3cml0ZSBlbmRwb2ludHMuIEZvciBsb2NhbCBkZXYgd2UgZGVmYXVsdCB0byAnZGV2LXNlY3JldCcuXG5jb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuQVBJX0tFWSB8fCBcImRldi1zZWNyZXRcIjtcblxuZnVuY3Rpb24gY2hlY2tBcGlLZXkocmVxKSB7XG4gIC8vIGByZXFgIGlzIGEgTmV4dC5qcyBSZXF1ZXN0IGluIHJvdXRlIGhhbmRsZXJzXG4gIHRyeSB7XG4gICAgY29uc3QgaGVhZGVyVmFsID1cbiAgICAgIHJlcS5oZWFkZXJzICYmIHR5cGVvZiByZXEuaGVhZGVycy5nZXQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IHJlcS5oZWFkZXJzLmdldChcIngtYXBpLWtleVwiKVxuICAgICAgICA6IG51bGw7XG4gICAgcmV0dXJuIGhlYWRlclZhbCA9PT0gQVBJX0tFWTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQVBJX0tFWSxcbiAgY2hlY2tBcGlLZXksXG59O1xuIl0sIm5hbWVzIjpbIkFQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiY2hlY2tBcGlLZXkiLCJyZXEiLCJoZWFkZXJWYWwiLCJoZWFkZXJzIiwiZ2V0IiwiZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./server/auth.js\n");

/***/ }),

/***/ "(rsc)/./server/mongo.js":
/*!*************************!*\
  !*** ./server/mongo.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { MongoClient } = __webpack_require__(/*! mongodb */ \"mongodb\");\nconst url = process.env.MONGO_URI || \"mongodb://localhost:27017\";\nconst dbName = process.env.MONGO_DB || \"convenience_store\";\nlet _client = null;\nlet _db = null;\nasync function connect() {\n    if (_db) return _db;\n    if (!_client) {\n        _client = new MongoClient(url, {\n            useUnifiedTopology: true\n        });\n        await _client.connect();\n    }\n    _db = _client.db(dbName);\n    // Ensure indexes\n    try {\n        await _db.collection(\"inventory\").createIndex({\n            id: 1\n        }, {\n            unique: true\n        });\n        await _db.collection(\"users\").createIndex({\n            id: 1\n        }, {\n            unique: true,\n            sparse: true\n        });\n        await _db.collection(\"users\").createIndex({\n            username: 1\n        }, {\n            unique: true\n        });\n    } catch (e) {\n    // ignore index errors\n    }\n    return _db;\n}\n// Inventory helpers\nasync function getAllInventory() {\n    const db = await connect();\n    return db.collection(\"inventory\").find({}).sort({\n        name: 1\n    }).toArray();\n}\nasync function getInventoryById(id) {\n    const db = await connect();\n    const n = Number(id);\n    return db.collection(\"inventory\").findOne({\n        id: n\n    });\n}\nasync function upsertInventoryItems(items) {\n    if (!Array.isArray(items)) items = [\n        items\n    ];\n    console.log(\"upsertInventoryItems called with:\", items.length, \"items\");\n    const db = await connect();\n    const ops = items.map((it, index)=>{\n        console.log(`Processing item ${index} for upsert:`, JSON.stringify(it, null, 2));\n        // Validate and convert ID\n        let itemId = undefined;\n        if (it.id !== undefined && it.id !== null) {\n            itemId = Number(it.id);\n            if (isNaN(itemId)) {\n                console.error(`Invalid ID for item ${index}:`, it.id);\n                throw new Error(`Invalid ID: ${it.id}`);\n            }\n            console.log(`Item ${index} has valid numeric ID:`, itemId);\n        } else {\n            console.log(`Item ${index} has no ID, will be auto-generated`);\n        }\n        const obj = {\n            id: itemId,\n            name: it.name || \"\",\n            category: it.category || \"\",\n            price: Number(it.price || 0),\n            stock: Number(it.stock || 0),\n            lowStockThreshold: Number(it.lowStockThreshold || 0),\n            taxable: !!it.taxable,\n            barcode: it.barcode || (itemId ? itemId.toString() : null)\n        };\n        // Add barcode2 if provided\n        if (it.barcode2) {\n            obj.barcode2 = it.barcode2;\n        }\n        // Only add productId if it's provided, to avoid null constraint issues\n        if (it.productId) {\n            obj.productId = it.productId;\n        } else if (itemId) {\n            obj.productId = itemId.toString(); // Use ID as productId for new items\n        }\n        // Validate required fields\n        if (!obj.name) {\n            throw new Error(`Item name is required for item ${index}`);\n        }\n        // remove undefined id to let upsert use provided id or create one\n        if (obj.id === undefined) delete obj.id;\n        const filter = obj.id !== undefined ? {\n            id: obj.id\n        } : {\n            name: obj.name\n        };\n        console.log(`=== MONGODB UPSERT OPERATION ${index} ===`);\n        console.log(\"Filter:\", JSON.stringify(filter, null, 2));\n        console.log(\"Update document:\", JSON.stringify(obj, null, 2));\n        console.log(`Item ${index} filter:`, filter);\n        console.log(`Item ${index} object:`, obj);\n        return {\n            updateOne: {\n                filter,\n                update: {\n                    $set: obj\n                },\n                upsert: true\n            }\n        };\n    });\n    if (ops.length === 0) {\n        console.log(\"No operations to perform\");\n        return;\n    }\n    console.log(\"Executing bulkWrite with\", ops.length, \"operations\");\n    try {\n        const result = await db.collection(\"inventory\").bulkWrite(ops);\n        console.log(\"BulkWrite result:\", result);\n    } catch (error) {\n        console.error(\"BulkWrite error:\", error);\n        // If it's a duplicate key error on productId, try to handle it gracefully\n        if (error.code === 11000 && error.message.includes(\"productId\")) {\n            console.log(\"Detected productId duplicate key error, attempting individual upserts...\");\n            // Try each item individually with unique productId generation\n            for(let i = 0; i < items.length; i++){\n                const item = items[i];\n                try {\n                    const itemWithUniqueProductId = {\n                        ...item,\n                        productId: item.productId || `${item.id || Date.now()}-${i}`\n                    };\n                    const filter = item.id ? {\n                        id: item.id\n                    } : {\n                        name: item.name\n                    };\n                    await db.collection(\"inventory\").updateOne(filter, {\n                        $set: itemWithUniqueProductId\n                    }, {\n                        upsert: true\n                    });\n                    console.log(`Successfully upserted item ${i} with unique productId`);\n                } catch (individualError) {\n                    console.error(`Failed to upsert individual item ${i}:`, individualError);\n                    throw individualError;\n                }\n            }\n            console.log(\"All items processed successfully via individual upserts\");\n            return;\n        }\n        throw error;\n    }\n}\nasync function deleteInventoryById(id) {\n    const db = await connect();\n    const n = Number(id);\n    await db.collection(\"inventory\").deleteOne({\n        id: n\n    });\n}\n// Users helpers\nasync function getUsers() {\n    const db = await connect();\n    const users = await db.collection(\"users\").find({}).sort({\n        id: 1\n    }).toArray();\n    // Auto-create default users if no users exist\n    if (users.length === 0) {\n        console.log(\"No users found. Creating default admin and cashier users...\");\n        const defaultUsers = [\n            {\n                id: \"admin\",\n                pwd: \"admin123\",\n                role: \"Admin\",\n                email: \"admin@pos.local\",\n                active: true,\n                permissions_json: JSON.stringify({\n                    inventory: true,\n                    users: true,\n                    reports: true,\n                    pos: true,\n                    transactions: true,\n                    manageUsers: true,\n                    manageInventory: true,\n                    manageReports: true,\n                    managePOS: true\n                })\n            },\n            {\n                id: \"cashier\",\n                pwd: \"cashier1\",\n                role: \"Cashier\",\n                email: \"cashier@pos.local\",\n                active: true,\n                permissions_json: JSON.stringify({\n                    inventory: false,\n                    users: false,\n                    reports: false,\n                    pos: true,\n                    transactions: false,\n                    manageUsers: false,\n                    manageInventory: false,\n                    manageReports: false,\n                    managePOS: true\n                })\n            }\n        ];\n        try {\n            await db.collection(\"users\").insertMany(defaultUsers);\n            console.log(\"âœ… Default users created:\");\n            console.log(\"   - Admin: username=admin, password=admin123\");\n            console.log(\"   - Cashier: username=cashier, password=cashier1\");\n        } catch (error) {\n            console.error(\"Failed to create default users:\", error);\n        }\n        const newUsers = await db.collection(\"users\").find({}).sort({\n            id: 1\n        }).toArray();\n        return newUsers.map((user)=>({\n                ...user,\n                username: user.id || user.username,\n                password: user.pwd || user.password || \"\"\n            }));\n    }\n    // Map database fields to frontend expected fields\n    return users.map((user)=>({\n            ...user,\n            username: user.id,\n            password: user.pwd || user.password\n        }));\n}\nasync function getUserByUsername(username) {\n    const db = await connect();\n    // Try to find user by id first, then by username field if it exists\n    let user = await db.collection(\"users\").findOne({\n        id: username\n    });\n    if (!user) {\n        user = await db.collection(\"users\").findOne({\n            username: username\n        });\n    }\n    if (user) {\n        // Map database fields to frontend expected fields\n        return {\n            ...user,\n            username: user.id || user.username,\n            password: user.pwd || user.password || \"\"\n        };\n    }\n    return null;\n}\nasync function upsertUser(body) {\n    const db = await connect();\n    const id = body.id || body.username;\n    await db.collection(\"users\").updateOne({\n        id\n    }, {\n        $set: {\n            id,\n            email: body.email || \"\",\n            pwd: body.password || body.pwd || \"\",\n            role: body.role || \"user\",\n            active: body.active !== false,\n            permissions_json: JSON.stringify(body.permissions || {})\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function replaceAllUsers(users) {\n    const db = await connect();\n    // Clear existing users and insert new ones\n    await db.collection(\"users\").deleteMany({});\n    if (users.length > 0) {\n        const formattedUsers = users.map((user)=>({\n                id: user.id || user.username,\n                email: user.email || \"\",\n                pwd: user.password || user.pwd || \"\",\n                role: user.role || \"user\",\n                active: user.active !== false,\n                permissions_json: JSON.stringify(user.permissions || {})\n            }));\n        await db.collection(\"users\").insertMany(formattedUsers);\n    }\n}\nasync function deleteUserById(id) {\n    const db = await connect();\n    // Prevent deletion of admin users (super role protection)\n    const user = await db.collection(\"users\").findOne({\n        id: id\n    });\n    if (user && (user.role === \"admin\" || user.role === \"Admin\" || user.id === \"admin\")) {\n        throw new Error(\"Admin users cannot be deleted - this is a protected super role\");\n    }\n    await db.collection(\"users\").deleteOne({\n        id: id\n    });\n}\n// Transactions helpers\nasync function saveTransaction(txObj) {\n    const db = await connect();\n    // Determine transaction type based on payment breakdown\n    const paymentBreakdown = txObj.paymentBreakdown || txObj.payment || [];\n    let transactionType = \"mixed\"; // default\n    let cashAmount = 0;\n    let cardAmount = 0;\n    let creditAmount = 0;\n    // Calculate payment amounts by method\n    let hasLotto = false;\n    paymentBreakdown.forEach((payment)=>{\n        const amount = Number(payment.amount || 0);\n        switch(payment.method?.toLowerCase()){\n            case \"cash\":\n                cashAmount += amount;\n                break;\n            case \"card\":\n                cardAmount += amount;\n                break;\n            case \"credit\":\n                creditAmount += amount;\n                break;\n            case \"lotto\":\n                hasLotto = true;\n                break;\n        }\n    });\n    // Determine primary transaction type\n    if (hasLotto && cashAmount < 0 && cardAmount === 0 && creditAmount === 0) {\n        // Lotto-only transaction (cash going out)\n        transactionType = \"lotto\";\n    } else if (creditAmount > 0) {\n        if (cashAmount > 0 || cardAmount > 0) {\n            transactionType = \"partial_credit\";\n        } else {\n            transactionType = \"credit\";\n        }\n    } else if (cashAmount > 0 && cardAmount > 0) {\n        transactionType = \"mixed\";\n    } else if (cashAmount > 0) {\n        transactionType = \"cash\";\n    } else if (cardAmount > 0) {\n        transactionType = \"card\";\n    } else if (hasLotto) {\n        // Lotto with other payments\n        transactionType = \"lotto_mixed\";\n    }\n    // normalize timestamp\n    const doc = {\n        legacy_id: txObj.id || null,\n        timestamp: txObj.timestamp ? new Date(txObj.timestamp) : new Date(),\n        subtotal: Number(txObj.subtotal || 0),\n        taxableAmount: Number(txObj.taxableAmount || 0),\n        nonTaxableAmount: Number(txObj.nonTaxableAmount || 0),\n        tax: Number(txObj.tax || 0),\n        total: Number(txObj.total || 0),\n        cashback: Number(txObj.cashback || 0),\n        paymentBreakdown: paymentBreakdown,\n        change: Number(txObj.change || 0),\n        transactionType: transactionType,\n        cashAmount: cashAmount,\n        cardAmount: cardAmount,\n        creditAmount: creditAmount,\n        items: Array.isArray(txObj.items) ? txObj.items.map((it)=>({\n                product_id: it.id || null,\n                name: it.name || \"\",\n                quantity: Number(it.quantity || 0),\n                price: Number(it.price || 0),\n                applyTax: !!it.applyTax\n            })) : []\n    };\n    const res = await db.collection(\"transactions\").insertOne(doc);\n    const insertedId = res.insertedId;\n    // Deduct stock for each item (best-effort)\n    for (const it of doc.items){\n        if (!it.product_id) continue;\n        const cur = await db.collection(\"inventory\").findOne({\n            id: Number(it.product_id)\n        });\n        if (cur) {\n            const newStock = (cur.stock || 0) - (it.quantity || 0);\n            await db.collection(\"inventory\").updateOne({\n                id: Number(it.product_id)\n            }, {\n                $set: {\n                    stock: newStock\n                }\n            });\n        }\n    }\n    return insertedId;\n}\nasync function getTransactions(limit = 100) {\n    const db = await connect();\n    const cursor = db.collection(\"transactions\").find({}).sort({\n        _id: -1\n    }).limit(Number(limit));\n    const rows = await cursor.toArray();\n    return rows.map((r)=>({\n            ...r,\n            id: r._id.toString(),\n            timestamp: r.timestamp instanceof Date ? r.timestamp.toISOString() : r.timestamp\n        }));\n}\nasync function deleteTransaction(id) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    try {\n        // Convert string ID to ObjectId for MongoDB\n        const objectId = new ObjectId(id);\n        const result = await db.collection(\"transactions\").deleteOne({\n            _id: objectId\n        });\n        return result.deletedCount > 0;\n    } catch (error) {\n        console.error(\"Error deleting transaction:\", error);\n        return false;\n    }\n}\n// Categories helpers\nasync function getCategories() {\n    const db = await connect();\n    const categories = await db.collection(\"categories\").find({}).sort({\n        name: 1\n    }).toArray();\n    // If no categories exist, create default ones\n    if (categories.length === 0) {\n        const defaultCategories = [\n            {\n                id: 1,\n                name: \"Beverages\",\n                description: \"Soft drinks, energy drinks, water, and other beverages\"\n            },\n            {\n                id: 2,\n                name: \"Snacks\",\n                description: \"Chips, crackers, nuts, and other snack foods\"\n            },\n            {\n                id: 3,\n                name: \"Bakery\",\n                description: \"Bread, pastries, and baked goods\"\n            },\n            {\n                id: 4,\n                name: \"Tobacco\",\n                description: \"Cigarettes and tobacco products\"\n            },\n            {\n                id: 5,\n                name: \"Dairy\",\n                description: \"Milk, cheese, yogurt, and dairy products\"\n            },\n            {\n                id: 6,\n                name: \"Frozen Foods\",\n                description: \"Ice cream, frozen meals, and frozen items\"\n            },\n            {\n                id: 7,\n                name: \"Personal Care\",\n                description: \"Toiletries, hygiene, and personal care items\"\n            },\n            {\n                id: 8,\n                name: \"Household\",\n                description: \"Cleaning supplies, paper products, and household items\"\n            },\n            {\n                id: 9,\n                name: \"Fresh Produce\",\n                description: \"Fruits, vegetables, and fresh produce\"\n            },\n            {\n                id: 10,\n                name: \"Candy\",\n                description: \"Chocolates, gums, and sweet treats\"\n            }\n        ];\n        await db.collection(\"categories\").insertMany(defaultCategories);\n        return defaultCategories;\n    }\n    return categories;\n}\nasync function saveCategory(category) {\n    const db = await connect();\n    if (category.id) {\n        // Update existing category\n        const result = await db.collection(\"categories\").updateOne({\n            id: Number(category.id)\n        }, {\n            $set: {\n                name: category.name,\n                description: category.description || \"\",\n                updatedAt: new Date()\n            }\n        }, {\n            upsert: true\n        });\n        return {\n            id: category.id,\n            ...category\n        };\n    } else {\n        // Create new category - find next available ID\n        const lastCategory = await db.collection(\"categories\").findOne({}, {\n            sort: {\n                id: -1\n            }\n        });\n        const nextId = (lastCategory?.id || 0) + 1;\n        const newCategory = {\n            id: nextId,\n            name: category.name,\n            description: category.description || \"\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        await db.collection(\"categories\").insertOne(newCategory);\n        return newCategory;\n    }\n}\nasync function deleteCategory(id) {\n    const db = await connect();\n    const result = await db.collection(\"categories\").deleteOne({\n        id: Number(id)\n    });\n    return result.deletedCount > 0;\n}\n// Credit Accounts helpers\nasync function getCreditAccounts() {\n    const db = await connect();\n    const cursor = db.collection(\"creditAccounts\").find({}).sort({\n        lastTransactionDate: -1\n    });\n    const accounts = await cursor.toArray();\n    return accounts.map((account)=>({\n            ...account,\n            id: account._id.toString(),\n            createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n            updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n            lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n        }));\n}\nasync function getCreditAccountByName(customerName) {\n    const db = await connect();\n    const account = await db.collection(\"creditAccounts\").findOne({\n        customerName: {\n            $regex: new RegExp(\"^\" + customerName.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") + \"$\", \"i\")\n        }\n    });\n    if (!account) return null;\n    return {\n        ...account,\n        id: account._id.toString(),\n        createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n        updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n        lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n    };\n}\nasync function upsertCreditAccount(accountData) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    const now = new Date();\n    const customerName = accountData.customerName?.trim();\n    if (!customerName) {\n        throw new Error(\"Customer name is required\");\n    }\n    // Find existing account (case-insensitive)\n    const existingAccount = await db.collection(\"creditAccounts\").findOne({\n        customerName: {\n            $regex: new RegExp(\"^\" + customerName.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\") + \"$\", \"i\")\n        }\n    });\n    if (existingAccount) {\n        // Update existing account\n        const updateData = {\n            balance: Number(accountData.balance || existingAccount.balance || 0),\n            phone: accountData.phone || existingAccount.phone || \"\",\n            email: accountData.email || existingAccount.email || \"\",\n            address: accountData.address || existingAccount.address || \"\",\n            notes: accountData.notes || existingAccount.notes || \"\",\n            isActive: accountData.isActive !== undefined ? accountData.isActive : existingAccount.isActive,\n            updatedAt: now\n        };\n        // Update last transaction date if provided\n        if (accountData.lastTransactionDate) {\n            updateData.lastTransactionDate = accountData.lastTransactionDate instanceof Date ? accountData.lastTransactionDate : new Date(accountData.lastTransactionDate);\n        }\n        // Update transaction count if provided\n        if (accountData.transactionCount !== undefined) {\n            updateData.transactionCount = Number(accountData.transactionCount);\n        }\n        const result = await db.collection(\"creditAccounts\").updateOne({\n            _id: existingAccount._id\n        }, {\n            $set: updateData\n        });\n        if (result.modifiedCount > 0) {\n            const updatedAccount = await db.collection(\"creditAccounts\").findOne({\n                _id: existingAccount._id\n            });\n            return {\n                ...updatedAccount,\n                id: updatedAccount._id.toString()\n            };\n        }\n        return {\n            ...existingAccount,\n            id: existingAccount._id.toString()\n        };\n    } else {\n        // Create new account\n        const newAccount = {\n            customerName: customerName,\n            balance: Number(accountData.balance || 0),\n            phone: accountData.phone || \"\",\n            email: accountData.email || \"\",\n            address: accountData.address || \"\",\n            notes: accountData.notes || \"\",\n            isActive: accountData.isActive !== undefined ? accountData.isActive : true,\n            transactionCount: Number(accountData.transactionCount || 0),\n            createdAt: now,\n            updatedAt: now,\n            lastTransactionDate: accountData.lastTransactionDate ? accountData.lastTransactionDate instanceof Date ? accountData.lastTransactionDate : new Date(accountData.lastTransactionDate) : now\n        };\n        const result = await db.collection(\"creditAccounts\").insertOne(newAccount);\n        return {\n            ...newAccount,\n            id: result.insertedId.toString()\n        };\n    }\n}\nasync function addToCreditAccount(customerName, amount, transactionId = null) {\n    const db = await connect();\n    // Get or create account\n    let account = await getCreditAccountByName(customerName);\n    if (!account) {\n        // Create new account if it doesn't exist\n        account = await upsertCreditAccount({\n            customerName: customerName,\n            balance: amount,\n            transactionCount: 1,\n            lastTransactionDate: new Date()\n        });\n    } else {\n        // Update existing account\n        const newBalance = Number(account.balance || 0) + Number(amount);\n        const newTransactionCount = Number(account.transactionCount || 0) + 1;\n        account = await upsertCreditAccount({\n            customerName: customerName,\n            balance: newBalance,\n            transactionCount: newTransactionCount,\n            lastTransactionDate: new Date(),\n            phone: account.phone,\n            email: account.email,\n            address: account.address,\n            notes: account.notes,\n            isActive: account.isActive\n        });\n    }\n    return account;\n}\nasync function payToCreditAccount(customerName, paymentAmount) {\n    const db = await connect();\n    const account = await getCreditAccountByName(customerName);\n    if (!account) {\n        throw new Error(\"Credit account not found\");\n    }\n    const currentBalance = Number(account.balance || 0);\n    const payment = Number(paymentAmount);\n    if (payment > currentBalance) {\n        throw new Error(\"Payment amount exceeds account balance\");\n    }\n    const newBalance = currentBalance - payment;\n    const updatedAccount = await upsertCreditAccount({\n        customerName: customerName,\n        balance: newBalance,\n        transactionCount: account.transactionCount,\n        lastTransactionDate: new Date(),\n        phone: account.phone,\n        email: account.email,\n        address: account.address,\n        notes: account.notes,\n        isActive: account.isActive\n    });\n    return {\n        ...updatedAccount,\n        paymentAmount: payment,\n        previousBalance: currentBalance,\n        newBalance: newBalance\n    };\n}\nasync function deleteCreditAccount(id) {\n    const db = await connect();\n    const { ObjectId } = __webpack_require__(/*! mongodb */ \"mongodb\");\n    try {\n        const objectId = new ObjectId(id);\n        const result = await db.collection(\"creditAccounts\").deleteOne({\n            _id: objectId\n        });\n        return result.deletedCount > 0;\n    } catch (error) {\n        console.error(\"Error deleting credit account:\", error);\n        return false;\n    }\n}\nasync function searchCreditAccounts(searchTerm, includeInactive = false) {\n    const db = await connect();\n    const query = {\n        customerName: {\n            $regex: searchTerm,\n            $options: \"i\"\n        }\n    };\n    if (!includeInactive) {\n        query.isActive = {\n            $ne: false\n        };\n    }\n    const cursor = db.collection(\"creditAccounts\").find(query).sort({\n        balance: -1,\n        lastTransactionDate: -1\n    });\n    const accounts = await cursor.toArray();\n    return accounts.map((account)=>({\n            ...account,\n            id: account._id.toString(),\n            createdAt: account.createdAt instanceof Date ? account.createdAt.toISOString() : account.createdAt,\n            updatedAt: account.updatedAt instanceof Date ? account.updatedAt.toISOString() : account.updatedAt,\n            lastTransactionDate: account.lastTransactionDate instanceof Date ? account.lastTransactionDate.toISOString() : account.lastTransactionDate\n        }));\n}\n// Till Count Management Functions\nasync function getCurrentTill() {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        // Find the most recent open till (no endTime)\n        const currentTill = await tillCollection.findOne({\n            endTime: null\n        }, {\n            sort: {\n                startTime: -1\n            }\n        });\n        return currentTill;\n    } catch (error) {\n        console.error(\"Error getting current till:\", error);\n        throw error;\n    }\n}\nasync function getTillHistory(limit = 20) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        const history = await tillCollection.find({}).sort({\n            startTime: -1\n        }).limit(limit).toArray();\n        return history;\n    } catch (error) {\n        console.error(\"Error getting till history:\", error);\n        throw error;\n    }\n}\nasync function startTill(tillData) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        // Generate a simple ID\n        const generateId = ()=>Date.now().toString() + Math.random().toString(36).substr(2, 9);\n        const till = {\n            id: generateId(),\n            startAmount: tillData.startAmount,\n            startUser: tillData.startUser,\n            startTime: tillData.startTime,\n            startDenominations: tillData.startDenominations || {},\n            endAmount: null,\n            endUser: null,\n            endTime: null,\n            endDenominations: null,\n            createdAt: new Date().toISOString()\n        };\n        await tillCollection.insertOne(till);\n        return till;\n    } catch (error) {\n        console.error(\"Error starting till:\", error);\n        throw error;\n    }\n}\nasync function endTill(tillId, endData) {\n    try {\n        const db = await connect();\n        const tillCollection = db.collection(\"tillCounts\");\n        const updateResult = await tillCollection.updateOne({\n            id: tillId\n        }, {\n            $set: {\n                endAmount: endData.endAmount,\n                endUser: endData.endUser,\n                endTime: endData.endTime,\n                endDenominations: endData.endDenominations || {},\n                updatedAt: new Date().toISOString()\n            }\n        });\n        if (updateResult.matchedCount === 0) {\n            throw new Error(\"Till not found\");\n        }\n        const updatedTill = await tillCollection.findOne({\n            id: tillId\n        });\n        return updatedTill;\n    } catch (error) {\n        console.error(\"Error ending till:\", error);\n        throw error;\n    }\n}\n// Visited Items Management Functions\nasync function getVisitedItems() {\n    try {\n        const db = await connect();\n        const visitedCollection = db.collection(\"visitedItems\");\n        const visitedItems = await visitedCollection.find({}).toArray();\n        return visitedItems.map((item)=>item.itemId);\n    } catch (error) {\n        console.error(\"Error getting visited items:\", error);\n        throw error;\n    }\n}\nasync function setVisitedItem(itemId, visited) {\n    try {\n        const db = await connect();\n        const visitedCollection = db.collection(\"visitedItems\");\n        if (visited) {\n            // Add to visited items\n            await visitedCollection.updateOne({\n                itemId: Number(itemId)\n            }, {\n                $set: {\n                    itemId: Number(itemId),\n                    visitedAt: new Date()\n                }\n            }, {\n                upsert: true\n            });\n        } else {\n            // Remove from visited items\n            await visitedCollection.deleteOne({\n                itemId: Number(itemId)\n            });\n        }\n    } catch (error) {\n        console.error(\"Error setting visited item:\", error);\n        throw error;\n    }\n}\nasync function clearAllVisitedItems() {\n    try {\n        const db = await connect();\n        const visitedCollection = db.collection(\"visitedItems\");\n        await visitedCollection.deleteMany({});\n    } catch (error) {\n        console.error(\"Error clearing all visited items:\", error);\n        throw error;\n    }\n}\nmodule.exports = {\n    connect,\n    getAllInventory,\n    getInventoryById,\n    upsertInventoryItems,\n    deleteInventoryById,\n    getUsers,\n    getUserByUsername,\n    upsertUser,\n    replaceAllUsers,\n    deleteUserById,\n    saveTransaction,\n    getTransactions,\n    deleteTransaction,\n    getCategories,\n    saveCategory,\n    deleteCategory,\n    getCreditAccounts,\n    getCreditAccountByName,\n    upsertCreditAccount,\n    addToCreditAccount,\n    payToCreditAccount,\n    deleteCreditAccount,\n    searchCreditAccounts,\n    getCurrentTill,\n    getTillHistory,\n    startTill,\n    endTill,\n    getVisitedItems,\n    setVisitedItem,\n    clearAllVisitedItems\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FFO0lBQ0FhO0lBQ0FNO0lBQ0FHO0lBQ0FHO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZW5pZW5jZS1zdG9yZS1pbnZlbnRvcnkvLi9zZXJ2ZXIvbW9uZ28uanM/OTVlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IE1vbmdvQ2xpZW50IH0gPSByZXF1aXJlKFwibW9uZ29kYlwiKTtcbmNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSSSB8fCBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTdcIjtcbmNvbnN0IGRiTmFtZSA9IHByb2Nlc3MuZW52Lk1PTkdPX0RCIHx8IFwiY29udmVuaWVuY2Vfc3RvcmVcIjtcblxubGV0IF9jbGllbnQgPSBudWxsO1xubGV0IF9kYiA9IG51bGw7XG5cbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gIGlmIChfZGIpIHJldHVybiBfZGI7XG4gIGlmICghX2NsaWVudCkge1xuICAgIF9jbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJsLCB7IHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBfY2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuICBfZGIgPSBfY2xpZW50LmRiKGRiTmFtZSk7XG4gIC8vIEVuc3VyZSBpbmRleGVzXG4gIHRyeSB7XG4gICAgYXdhaXQgX2RiLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIikuY3JlYXRlSW5kZXgoeyBpZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBfZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIC5jcmVhdGVJbmRleCh7IGlkOiAxIH0sIHsgdW5pcXVlOiB0cnVlLCBzcGFyc2U6IHRydWUgfSk7XG4gICAgYXdhaXQgX2RiXG4gICAgICAuY29sbGVjdGlvbihcInVzZXJzXCIpXG4gICAgICAuY3JlYXRlSW5kZXgoeyB1c2VybmFtZTogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGlnbm9yZSBpbmRleCBlcnJvcnNcbiAgfVxuICByZXR1cm4gX2RiO1xufVxuXG4vLyBJbnZlbnRvcnkgaGVscGVyc1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsSW52ZW50b3J5KCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIikuZmluZCh7fSkuc29ydCh7IG5hbWU6IDEgfSkudG9BcnJheSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRJbnZlbnRvcnlCeUlkKGlkKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBuID0gTnVtYmVyKGlkKTtcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIikuZmluZE9uZSh7IGlkOiBuIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1cHNlcnRJbnZlbnRvcnlJdGVtcyhpdGVtcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoaXRlbXMpKSBpdGVtcyA9IFtpdGVtc107XG4gIGNvbnNvbGUubG9nKFwidXBzZXJ0SW52ZW50b3J5SXRlbXMgY2FsbGVkIHdpdGg6XCIsIGl0ZW1zLmxlbmd0aCwgXCJpdGVtc1wiKTtcblxuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3Qgb3BzID0gaXRlbXMubWFwKChpdCwgaW5kZXgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBQcm9jZXNzaW5nIGl0ZW0gJHtpbmRleH0gZm9yIHVwc2VydDpgLFxuICAgICAgSlNPTi5zdHJpbmdpZnkoaXQsIG51bGwsIDIpXG4gICAgKTtcblxuICAgIC8vIFZhbGlkYXRlIGFuZCBjb252ZXJ0IElEXG4gICAgbGV0IGl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaXQuaWQgIT09IHVuZGVmaW5lZCAmJiBpdC5pZCAhPT0gbnVsbCkge1xuICAgICAgaXRlbUlkID0gTnVtYmVyKGl0LmlkKTtcbiAgICAgIGlmIChpc05hTihpdGVtSWQpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgSUQgZm9yIGl0ZW0gJHtpbmRleH06YCwgaXQuaWQpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgSUQ6ICR7aXQuaWR9YCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgSXRlbSAke2luZGV4fSBoYXMgdmFsaWQgbnVtZXJpYyBJRDpgLCBpdGVtSWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgSXRlbSAke2luZGV4fSBoYXMgbm8gSUQsIHdpbGwgYmUgYXV0by1nZW5lcmF0ZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBvYmogPSB7XG4gICAgICBpZDogaXRlbUlkLFxuICAgICAgbmFtZTogaXQubmFtZSB8fCBcIlwiLFxuICAgICAgY2F0ZWdvcnk6IGl0LmNhdGVnb3J5IHx8IFwiXCIsXG4gICAgICBwcmljZTogTnVtYmVyKGl0LnByaWNlIHx8IDApLFxuICAgICAgc3RvY2s6IE51bWJlcihpdC5zdG9jayB8fCAwKSxcbiAgICAgIGxvd1N0b2NrVGhyZXNob2xkOiBOdW1iZXIoaXQubG93U3RvY2tUaHJlc2hvbGQgfHwgMCksXG4gICAgICB0YXhhYmxlOiAhIWl0LnRheGFibGUsXG4gICAgICBiYXJjb2RlOiBpdC5iYXJjb2RlIHx8IChpdGVtSWQgPyBpdGVtSWQudG9TdHJpbmcoKSA6IG51bGwpLCAvLyBEZWZhdWx0IHRvIHByb2R1Y3QgSUQgYXMgYmFyY29kZVxuICAgIH07XG5cbiAgICAvLyBBZGQgYmFyY29kZTIgaWYgcHJvdmlkZWRcbiAgICBpZiAoaXQuYmFyY29kZTIpIHtcbiAgICAgIG9iai5iYXJjb2RlMiA9IGl0LmJhcmNvZGUyO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWRkIHByb2R1Y3RJZCBpZiBpdCdzIHByb3ZpZGVkLCB0byBhdm9pZCBudWxsIGNvbnN0cmFpbnQgaXNzdWVzXG4gICAgaWYgKGl0LnByb2R1Y3RJZCkge1xuICAgICAgb2JqLnByb2R1Y3RJZCA9IGl0LnByb2R1Y3RJZDtcbiAgICB9IGVsc2UgaWYgKGl0ZW1JZCkge1xuICAgICAgb2JqLnByb2R1Y3RJZCA9IGl0ZW1JZC50b1N0cmluZygpOyAvLyBVc2UgSUQgYXMgcHJvZHVjdElkIGZvciBuZXcgaXRlbXNcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIW9iai5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEl0ZW0gbmFtZSBpcyByZXF1aXJlZCBmb3IgaXRlbSAke2luZGV4fWApO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSB1bmRlZmluZWQgaWQgdG8gbGV0IHVwc2VydCB1c2UgcHJvdmlkZWQgaWQgb3IgY3JlYXRlIG9uZVxuICAgIGlmIChvYmouaWQgPT09IHVuZGVmaW5lZCkgZGVsZXRlIG9iai5pZDtcblxuICAgIGNvbnN0IGZpbHRlciA9IG9iai5pZCAhPT0gdW5kZWZpbmVkID8geyBpZDogb2JqLmlkIH0gOiB7IG5hbWU6IG9iai5uYW1lIH07XG5cbiAgICBjb25zb2xlLmxvZyhgPT09IE1PTkdPREIgVVBTRVJUIE9QRVJBVElPTiAke2luZGV4fSA9PT1gKTtcbiAgICBjb25zb2xlLmxvZyhcIkZpbHRlcjpcIiwgSlNPTi5zdHJpbmdpZnkoZmlsdGVyLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coXCJVcGRhdGUgZG9jdW1lbnQ6XCIsIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMikpO1xuICAgIGNvbnNvbGUubG9nKGBJdGVtICR7aW5kZXh9IGZpbHRlcjpgLCBmaWx0ZXIpO1xuICAgIGNvbnNvbGUubG9nKGBJdGVtICR7aW5kZXh9IG9iamVjdDpgLCBvYmopO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVwZGF0ZU9uZToge1xuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIHVwZGF0ZTogeyAkc2V0OiBvYmogfSxcbiAgICAgICAgdXBzZXJ0OiB0cnVlLFxuICAgICAgfSxcbiAgICB9O1xuICB9KTtcblxuICBpZiAob3BzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnNvbGUubG9nKFwiTm8gb3BlcmF0aW9ucyB0byBwZXJmb3JtXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFwiRXhlY3V0aW5nIGJ1bGtXcml0ZSB3aXRoXCIsIG9wcy5sZW5ndGgsIFwib3BlcmF0aW9uc1wiKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiaW52ZW50b3J5XCIpLmJ1bGtXcml0ZShvcHMpO1xuICAgIGNvbnNvbGUubG9nKFwiQnVsa1dyaXRlIHJlc3VsdDpcIiwgcmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQnVsa1dyaXRlIGVycm9yOlwiLCBlcnJvcik7XG5cbiAgICAvLyBJZiBpdCdzIGEgZHVwbGljYXRlIGtleSBlcnJvciBvbiBwcm9kdWN0SWQsIHRyeSB0byBoYW5kbGUgaXQgZ3JhY2VmdWxseVxuICAgIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwicHJvZHVjdElkXCIpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJEZXRlY3RlZCBwcm9kdWN0SWQgZHVwbGljYXRlIGtleSBlcnJvciwgYXR0ZW1wdGluZyBpbmRpdmlkdWFsIHVwc2VydHMuLi5cIlxuICAgICAgKTtcblxuICAgICAgLy8gVHJ5IGVhY2ggaXRlbSBpbmRpdmlkdWFsbHkgd2l0aCB1bmlxdWUgcHJvZHVjdElkIGdlbmVyYXRpb25cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGl0ZW1XaXRoVW5pcXVlUHJvZHVjdElkID0ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIHByb2R1Y3RJZDogaXRlbS5wcm9kdWN0SWQgfHwgYCR7aXRlbS5pZCB8fCBEYXRlLm5vdygpfS0ke2l9YCxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgZmlsdGVyID0gaXRlbS5pZCA/IHsgaWQ6IGl0ZW0uaWQgfSA6IHsgbmFtZTogaXRlbS5uYW1lIH07XG4gICAgICAgICAgYXdhaXQgZGJcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKFwiaW52ZW50b3J5XCIpXG4gICAgICAgICAgICAudXBkYXRlT25lKFxuICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgIHsgJHNldDogaXRlbVdpdGhVbmlxdWVQcm9kdWN0SWQgfSxcbiAgICAgICAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IHVwc2VydGVkIGl0ZW0gJHtpfSB3aXRoIHVuaXF1ZSBwcm9kdWN0SWRgKTtcbiAgICAgICAgfSBjYXRjaCAoaW5kaXZpZHVhbEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gdXBzZXJ0IGluZGl2aWR1YWwgaXRlbSAke2l9OmAsXG4gICAgICAgICAgICBpbmRpdmlkdWFsRXJyb3JcbiAgICAgICAgICApO1xuICAgICAgICAgIHRocm93IGluZGl2aWR1YWxFcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJBbGwgaXRlbXMgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseSB2aWEgaW5kaXZpZHVhbCB1cHNlcnRzXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUludmVudG9yeUJ5SWQoaWQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IG4gPSBOdW1iZXIoaWQpO1xuICBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiaW52ZW50b3J5XCIpLmRlbGV0ZU9uZSh7IGlkOiBuIH0pO1xufVxuXG4vLyBVc2VycyBoZWxwZXJzXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VycygpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmQoe30pLnNvcnQoeyBpZDogMSB9KS50b0FycmF5KCk7XG5cbiAgLy8gQXV0by1jcmVhdGUgZGVmYXVsdCB1c2VycyBpZiBubyB1c2VycyBleGlzdFxuICBpZiAodXNlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5sb2coXCJObyB1c2VycyBmb3VuZC4gQ3JlYXRpbmcgZGVmYXVsdCBhZG1pbiBhbmQgY2FzaGllciB1c2Vycy4uLlwiKTtcblxuICAgIGNvbnN0IGRlZmF1bHRVc2VycyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwiYWRtaW5cIixcbiAgICAgICAgcHdkOiBcImFkbWluMTIzXCIsXG4gICAgICAgIHJvbGU6IFwiQWRtaW5cIixcbiAgICAgICAgZW1haWw6IFwiYWRtaW5AcG9zLmxvY2FsXCIsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgcGVybWlzc2lvbnNfanNvbjogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGludmVudG9yeTogdHJ1ZSxcbiAgICAgICAgICB1c2VyczogdHJ1ZSxcbiAgICAgICAgICByZXBvcnRzOiB0cnVlLFxuICAgICAgICAgIHBvczogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2FjdGlvbnM6IHRydWUsXG4gICAgICAgICAgbWFuYWdlVXNlcnM6IHRydWUsXG4gICAgICAgICAgbWFuYWdlSW52ZW50b3J5OiB0cnVlLFxuICAgICAgICAgIG1hbmFnZVJlcG9ydHM6IHRydWUsXG4gICAgICAgICAgbWFuYWdlUE9TOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcImNhc2hpZXJcIixcbiAgICAgICAgcHdkOiBcImNhc2hpZXIxXCIsXG4gICAgICAgIHJvbGU6IFwiQ2FzaGllclwiLFxuICAgICAgICBlbWFpbDogXCJjYXNoaWVyQHBvcy5sb2NhbFwiLFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgIHBlcm1pc3Npb25zX2pzb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBpbnZlbnRvcnk6IGZhbHNlLFxuICAgICAgICAgIHVzZXJzOiBmYWxzZSxcbiAgICAgICAgICByZXBvcnRzOiBmYWxzZSxcbiAgICAgICAgICBwb3M6IHRydWUsXG4gICAgICAgICAgdHJhbnNhY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgICBtYW5hZ2VVc2VyczogZmFsc2UsXG4gICAgICAgICAgbWFuYWdlSW52ZW50b3J5OiBmYWxzZSxcbiAgICAgICAgICBtYW5hZ2VSZXBvcnRzOiBmYWxzZSxcbiAgICAgICAgICBtYW5hZ2VQT1M6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5pbnNlcnRNYW55KGRlZmF1bHRVc2Vycyk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSBEZWZhdWx0IHVzZXJzIGNyZWF0ZWQ6XCIpO1xuICAgICAgY29uc29sZS5sb2coXCIgICAtIEFkbWluOiB1c2VybmFtZT1hZG1pbiwgcGFzc3dvcmQ9YWRtaW4xMjNcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIiAgIC0gQ2FzaGllcjogdXNlcm5hbWU9Y2FzaGllciwgcGFzc3dvcmQ9Y2FzaGllcjFcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIGRlZmF1bHQgdXNlcnM6XCIsIGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdVc2VycyA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInVzZXJzXCIpXG4gICAgICAuZmluZCh7fSlcbiAgICAgIC5zb3J0KHsgaWQ6IDEgfSlcbiAgICAgIC50b0FycmF5KCk7XG4gICAgcmV0dXJuIG5ld1VzZXJzLm1hcCgodXNlcikgPT4gKHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICB1c2VybmFtZTogdXNlci5pZCB8fCB1c2VyLnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHVzZXIucHdkIHx8IHVzZXIucGFzc3dvcmQgfHwgXCJcIixcbiAgICB9KSk7XG4gIH1cblxuICAvLyBNYXAgZGF0YWJhc2UgZmllbGRzIHRvIGZyb250ZW5kIGV4cGVjdGVkIGZpZWxkc1xuICByZXR1cm4gdXNlcnMubWFwKCh1c2VyKSA9PiAoe1xuICAgIC4uLnVzZXIsXG4gICAgdXNlcm5hbWU6IHVzZXIuaWQsIC8vIE1hcCBpZCB0byB1c2VybmFtZSBmb3IgZnJvbnRlbmRcbiAgICBwYXNzd29yZDogdXNlci5wd2QgfHwgdXNlci5wYXNzd29yZCwgLy8gTWFwIHB3ZCB0byBwYXNzd29yZCBmb3IgZnJvbnRlbmRcbiAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlVc2VybmFtZSh1c2VybmFtZSkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgLy8gVHJ5IHRvIGZpbmQgdXNlciBieSBpZCBmaXJzdCwgdGhlbiBieSB1c2VybmFtZSBmaWVsZCBpZiBpdCBleGlzdHNcbiAgbGV0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7IGlkOiB1c2VybmFtZSB9KTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHsgdXNlcm5hbWU6IHVzZXJuYW1lIH0pO1xuICB9XG5cbiAgaWYgKHVzZXIpIHtcbiAgICAvLyBNYXAgZGF0YWJhc2UgZmllbGRzIHRvIGZyb250ZW5kIGV4cGVjdGVkIGZpZWxkc1xuICAgIHJldHVybiB7XG4gICAgICAuLi51c2VyLFxuICAgICAgdXNlcm5hbWU6IHVzZXIuaWQgfHwgdXNlci51c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkOiB1c2VyLnB3ZCB8fCB1c2VyLnBhc3N3b3JkIHx8IFwiXCIsXG4gICAgfTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBzZXJ0VXNlcihib2R5KSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBpZCA9IGJvZHkuaWQgfHwgYm9keS51c2VybmFtZTtcbiAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZShcbiAgICB7IGlkIH0sXG4gICAge1xuICAgICAgJHNldDoge1xuICAgICAgICBpZCxcbiAgICAgICAgZW1haWw6IGJvZHkuZW1haWwgfHwgXCJcIixcbiAgICAgICAgcHdkOiBib2R5LnBhc3N3b3JkIHx8IGJvZHkucHdkIHx8IFwiXCIsIC8vIFN0b3JlIGFzIHB3ZCBpbiBkYXRhYmFzZVxuICAgICAgICByb2xlOiBib2R5LnJvbGUgfHwgXCJ1c2VyXCIsXG4gICAgICAgIGFjdGl2ZTogYm9keS5hY3RpdmUgIT09IGZhbHNlLFxuICAgICAgICBwZXJtaXNzaW9uc19qc29uOiBKU09OLnN0cmluZ2lmeShib2R5LnBlcm1pc3Npb25zIHx8IHt9KSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7IHVwc2VydDogdHJ1ZSB9XG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcGxhY2VBbGxVc2Vycyh1c2Vycykge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICAvLyBDbGVhciBleGlzdGluZyB1c2VycyBhbmQgaW5zZXJ0IG5ldyBvbmVzXG4gIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5kZWxldGVNYW55KHt9KTtcblxuICBpZiAodXNlcnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFVzZXJzID0gdXNlcnMubWFwKCh1c2VyKSA9PiAoe1xuICAgICAgaWQ6IHVzZXIuaWQgfHwgdXNlci51c2VybmFtZSxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsIHx8IFwiXCIsXG4gICAgICBwd2Q6IHVzZXIucGFzc3dvcmQgfHwgdXNlci5wd2QgfHwgXCJcIiwgLy8gU3RvcmUgYXMgcHdkIGluIGRhdGFiYXNlXG4gICAgICByb2xlOiB1c2VyLnJvbGUgfHwgXCJ1c2VyXCIsXG4gICAgICBhY3RpdmU6IHVzZXIuYWN0aXZlICE9PSBmYWxzZSxcbiAgICAgIHBlcm1pc3Npb25zX2pzb246IEpTT04uc3RyaW5naWZ5KHVzZXIucGVybWlzc2lvbnMgfHwge30pLFxuICAgIH0pKTtcblxuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5pbnNlcnRNYW55KGZvcm1hdHRlZFVzZXJzKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyQnlJZChpZCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICAvLyBQcmV2ZW50IGRlbGV0aW9uIG9mIGFkbWluIHVzZXJzIChzdXBlciByb2xlIHByb3RlY3Rpb24pXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh7IGlkOiBpZCB9KTtcbiAgaWYgKFxuICAgIHVzZXIgJiZcbiAgICAodXNlci5yb2xlID09PSBcImFkbWluXCIgfHwgdXNlci5yb2xlID09PSBcIkFkbWluXCIgfHwgdXNlci5pZCA9PT0gXCJhZG1pblwiKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkFkbWluIHVzZXJzIGNhbm5vdCBiZSBkZWxldGVkIC0gdGhpcyBpcyBhIHByb3RlY3RlZCBzdXBlciByb2xlXCJcbiAgICApO1xuICB9XG5cbiAgYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmRlbGV0ZU9uZSh7IGlkOiBpZCB9KTtcbn1cblxuLy8gVHJhbnNhY3Rpb25zIGhlbHBlcnNcbmFzeW5jIGZ1bmN0aW9uIHNhdmVUcmFuc2FjdGlvbih0eE9iaikge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICAvLyBEZXRlcm1pbmUgdHJhbnNhY3Rpb24gdHlwZSBiYXNlZCBvbiBwYXltZW50IGJyZWFrZG93blxuICBjb25zdCBwYXltZW50QnJlYWtkb3duID0gdHhPYmoucGF5bWVudEJyZWFrZG93biB8fCB0eE9iai5wYXltZW50IHx8IFtdO1xuICBsZXQgdHJhbnNhY3Rpb25UeXBlID0gXCJtaXhlZFwiOyAvLyBkZWZhdWx0XG4gIGxldCBjYXNoQW1vdW50ID0gMDtcbiAgbGV0IGNhcmRBbW91bnQgPSAwO1xuICBsZXQgY3JlZGl0QW1vdW50ID0gMDtcblxuICAvLyBDYWxjdWxhdGUgcGF5bWVudCBhbW91bnRzIGJ5IG1ldGhvZFxuICBsZXQgaGFzTG90dG8gPSBmYWxzZTtcbiAgcGF5bWVudEJyZWFrZG93bi5mb3JFYWNoKChwYXltZW50KSA9PiB7XG4gICAgY29uc3QgYW1vdW50ID0gTnVtYmVyKHBheW1lbnQuYW1vdW50IHx8IDApO1xuICAgIHN3aXRjaCAocGF5bWVudC5tZXRob2Q/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgXCJjYXNoXCI6XG4gICAgICAgIGNhc2hBbW91bnQgKz0gYW1vdW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjYXJkXCI6XG4gICAgICAgIGNhcmRBbW91bnQgKz0gYW1vdW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjcmVkaXRcIjpcbiAgICAgICAgY3JlZGl0QW1vdW50ICs9IGFtb3VudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibG90dG9cIjpcbiAgICAgICAgaGFzTG90dG8gPSB0cnVlO1xuICAgICAgICAvLyBMb3R0byB3aW5uaW5ncyBkb24ndCBjb3VudCBhcyBwYXltZW50LCB0aGV5IHJlZHVjZSB0b3RhbCBvd2VkXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gRGV0ZXJtaW5lIHByaW1hcnkgdHJhbnNhY3Rpb24gdHlwZVxuICBpZiAoaGFzTG90dG8gJiYgY2FzaEFtb3VudCA8IDAgJiYgY2FyZEFtb3VudCA9PT0gMCAmJiBjcmVkaXRBbW91bnQgPT09IDApIHtcbiAgICAvLyBMb3R0by1vbmx5IHRyYW5zYWN0aW9uIChjYXNoIGdvaW5nIG91dClcbiAgICB0cmFuc2FjdGlvblR5cGUgPSBcImxvdHRvXCI7XG4gIH0gZWxzZSBpZiAoY3JlZGl0QW1vdW50ID4gMCkge1xuICAgIGlmIChjYXNoQW1vdW50ID4gMCB8fCBjYXJkQW1vdW50ID4gMCkge1xuICAgICAgdHJhbnNhY3Rpb25UeXBlID0gXCJwYXJ0aWFsX2NyZWRpdFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2FjdGlvblR5cGUgPSBcImNyZWRpdFwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjYXNoQW1vdW50ID4gMCAmJiBjYXJkQW1vdW50ID4gMCkge1xuICAgIHRyYW5zYWN0aW9uVHlwZSA9IFwibWl4ZWRcIjtcbiAgfSBlbHNlIGlmIChjYXNoQW1vdW50ID4gMCkge1xuICAgIHRyYW5zYWN0aW9uVHlwZSA9IFwiY2FzaFwiO1xuICB9IGVsc2UgaWYgKGNhcmRBbW91bnQgPiAwKSB7XG4gICAgdHJhbnNhY3Rpb25UeXBlID0gXCJjYXJkXCI7XG4gIH0gZWxzZSBpZiAoaGFzTG90dG8pIHtcbiAgICAvLyBMb3R0byB3aXRoIG90aGVyIHBheW1lbnRzXG4gICAgdHJhbnNhY3Rpb25UeXBlID0gXCJsb3R0b19taXhlZFwiO1xuICB9XG5cbiAgLy8gbm9ybWFsaXplIHRpbWVzdGFtcFxuICBjb25zdCBkb2MgPSB7XG4gICAgbGVnYWN5X2lkOiB0eE9iai5pZCB8fCBudWxsLFxuICAgIHRpbWVzdGFtcDogdHhPYmoudGltZXN0YW1wID8gbmV3IERhdGUodHhPYmoudGltZXN0YW1wKSA6IG5ldyBEYXRlKCksXG4gICAgc3VidG90YWw6IE51bWJlcih0eE9iai5zdWJ0b3RhbCB8fCAwKSxcbiAgICB0YXhhYmxlQW1vdW50OiBOdW1iZXIodHhPYmoudGF4YWJsZUFtb3VudCB8fCAwKSxcbiAgICBub25UYXhhYmxlQW1vdW50OiBOdW1iZXIodHhPYmoubm9uVGF4YWJsZUFtb3VudCB8fCAwKSxcbiAgICB0YXg6IE51bWJlcih0eE9iai50YXggfHwgMCksXG4gICAgdG90YWw6IE51bWJlcih0eE9iai50b3RhbCB8fCAwKSxcbiAgICBjYXNoYmFjazogTnVtYmVyKHR4T2JqLmNhc2hiYWNrIHx8IDApLFxuICAgIHBheW1lbnRCcmVha2Rvd246IHBheW1lbnRCcmVha2Rvd24sXG4gICAgY2hhbmdlOiBOdW1iZXIodHhPYmouY2hhbmdlIHx8IDApLFxuICAgIHRyYW5zYWN0aW9uVHlwZTogdHJhbnNhY3Rpb25UeXBlLCAvLyBOZXcgZmllbGQ6ICdjYXNoJywgJ2NhcmQnLCAnbWl4ZWQnLCAnY3JlZGl0JywgJ3BhcnRpYWxfY3JlZGl0J1xuICAgIGNhc2hBbW91bnQ6IGNhc2hBbW91bnQsIC8vIE5ldyBmaWVsZDogVG90YWwgY2FzaCBhbW91bnRcbiAgICBjYXJkQW1vdW50OiBjYXJkQW1vdW50LCAvLyBOZXcgZmllbGQ6IFRvdGFsIGNhcmQgYW1vdW50XG4gICAgY3JlZGl0QW1vdW50OiBjcmVkaXRBbW91bnQsIC8vIE5ldyBmaWVsZDogVG90YWwgY3JlZGl0IGFtb3VudFxuICAgIGl0ZW1zOiBBcnJheS5pc0FycmF5KHR4T2JqLml0ZW1zKVxuICAgICAgPyB0eE9iai5pdGVtcy5tYXAoKGl0KSA9PiAoe1xuICAgICAgICAgIHByb2R1Y3RfaWQ6IGl0LmlkIHx8IG51bGwsXG4gICAgICAgICAgbmFtZTogaXQubmFtZSB8fCBcIlwiLFxuICAgICAgICAgIHF1YW50aXR5OiBOdW1iZXIoaXQucXVhbnRpdHkgfHwgMCksXG4gICAgICAgICAgcHJpY2U6IE51bWJlcihpdC5wcmljZSB8fCAwKSxcbiAgICAgICAgICBhcHBseVRheDogISFpdC5hcHBseVRheCxcbiAgICAgICAgfSkpXG4gICAgICA6IFtdLFxuICB9O1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ0cmFuc2FjdGlvbnNcIikuaW5zZXJ0T25lKGRvYyk7XG4gIGNvbnN0IGluc2VydGVkSWQgPSByZXMuaW5zZXJ0ZWRJZDtcblxuICAvLyBEZWR1Y3Qgc3RvY2sgZm9yIGVhY2ggaXRlbSAoYmVzdC1lZmZvcnQpXG4gIGZvciAoY29uc3QgaXQgb2YgZG9jLml0ZW1zKSB7XG4gICAgaWYgKCFpdC5wcm9kdWN0X2lkKSBjb250aW51ZTtcbiAgICBjb25zdCBjdXIgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJpbnZlbnRvcnlcIilcbiAgICAgIC5maW5kT25lKHsgaWQ6IE51bWJlcihpdC5wcm9kdWN0X2lkKSB9KTtcbiAgICBpZiAoY3VyKSB7XG4gICAgICBjb25zdCBuZXdTdG9jayA9IChjdXIuc3RvY2sgfHwgMCkgLSAoaXQucXVhbnRpdHkgfHwgMCk7XG4gICAgICBhd2FpdCBkYlxuICAgICAgICAuY29sbGVjdGlvbihcImludmVudG9yeVwiKVxuICAgICAgICAudXBkYXRlT25lKFxuICAgICAgICAgIHsgaWQ6IE51bWJlcihpdC5wcm9kdWN0X2lkKSB9LFxuICAgICAgICAgIHsgJHNldDogeyBzdG9jazogbmV3U3RvY2sgfSB9XG4gICAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluc2VydGVkSWQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9ucyhsaW1pdCA9IDEwMCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgY3Vyc29yID0gZGJcbiAgICAuY29sbGVjdGlvbihcInRyYW5zYWN0aW9uc1wiKVxuICAgIC5maW5kKHt9KVxuICAgIC5zb3J0KHsgX2lkOiAtMSB9KVxuICAgIC5saW1pdChOdW1iZXIobGltaXQpKTtcbiAgY29uc3Qgcm93cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XG4gIHJldHVybiByb3dzLm1hcCgocikgPT4gKHtcbiAgICAuLi5yLFxuICAgIGlkOiByLl9pZC50b1N0cmluZygpLCAvLyBDb252ZXJ0IE1vbmdvREIgT2JqZWN0SWQgdG8gc3RyaW5nIGZvciBmcm9udGVuZFxuICAgIHRpbWVzdGFtcDpcbiAgICAgIHIudGltZXN0YW1wIGluc3RhbmNlb2YgRGF0ZSA/IHIudGltZXN0YW1wLnRvSVNPU3RyaW5nKCkgOiByLnRpbWVzdGFtcCxcbiAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVUcmFuc2FjdGlvbihpZCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgeyBPYmplY3RJZCB9ID0gcmVxdWlyZShcIm1vbmdvZGJcIik7XG5cbiAgdHJ5IHtcbiAgICAvLyBDb252ZXJ0IHN0cmluZyBJRCB0byBPYmplY3RJZCBmb3IgTW9uZ29EQlxuICAgIGNvbnN0IG9iamVjdElkID0gbmV3IE9iamVjdElkKGlkKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ0cmFuc2FjdGlvbnNcIilcbiAgICAgIC5kZWxldGVPbmUoeyBfaWQ6IG9iamVjdElkIH0pO1xuICAgIHJldHVybiByZXN1bHQuZGVsZXRlZENvdW50ID4gMDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgdHJhbnNhY3Rpb246XCIsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gQ2F0ZWdvcmllcyBoZWxwZXJzXG5hc3luYyBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb24oXCJjYXRlZ29yaWVzXCIpXG4gICAgLmZpbmQoe30pXG4gICAgLnNvcnQoeyBuYW1lOiAxIH0pXG4gICAgLnRvQXJyYXkoKTtcblxuICAvLyBJZiBubyBjYXRlZ29yaWVzIGV4aXN0LCBjcmVhdGUgZGVmYXVsdCBvbmVzXG4gIGlmIChjYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IGRlZmF1bHRDYXRlZ29yaWVzID0gW1xuICAgICAge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgbmFtZTogXCJCZXZlcmFnZXNcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiU29mdCBkcmlua3MsIGVuZXJneSBkcmlua3MsIHdhdGVyLCBhbmQgb3RoZXIgYmV2ZXJhZ2VzXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogMixcbiAgICAgICAgbmFtZTogXCJTbmFja3NcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2hpcHMsIGNyYWNrZXJzLCBudXRzLCBhbmQgb3RoZXIgc25hY2sgZm9vZHNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAzLFxuICAgICAgICBuYW1lOiBcIkJha2VyeVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJCcmVhZCwgcGFzdHJpZXMsIGFuZCBiYWtlZCBnb29kc1wiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDQsXG4gICAgICAgIG5hbWU6IFwiVG9iYWNjb1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDaWdhcmV0dGVzIGFuZCB0b2JhY2NvIHByb2R1Y3RzXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogNSxcbiAgICAgICAgbmFtZTogXCJEYWlyeVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJNaWxrLCBjaGVlc2UsIHlvZ3VydCwgYW5kIGRhaXJ5IHByb2R1Y3RzXCIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogNixcbiAgICAgICAgbmFtZTogXCJGcm96ZW4gRm9vZHNcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiSWNlIGNyZWFtLCBmcm96ZW4gbWVhbHMsIGFuZCBmcm96ZW4gaXRlbXNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiA3LFxuICAgICAgICBuYW1lOiBcIlBlcnNvbmFsIENhcmVcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVG9pbGV0cmllcywgaHlnaWVuZSwgYW5kIHBlcnNvbmFsIGNhcmUgaXRlbXNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiA4LFxuICAgICAgICBuYW1lOiBcIkhvdXNlaG9sZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDbGVhbmluZyBzdXBwbGllcywgcGFwZXIgcHJvZHVjdHMsIGFuZCBob3VzZWhvbGQgaXRlbXNcIixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiA5LFxuICAgICAgICBuYW1lOiBcIkZyZXNoIFByb2R1Y2VcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRnJ1aXRzLCB2ZWdldGFibGVzLCBhbmQgZnJlc2ggcHJvZHVjZVwiLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDEwLFxuICAgICAgICBuYW1lOiBcIkNhbmR5XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNob2NvbGF0ZXMsIGd1bXMsIGFuZCBzd2VldCB0cmVhdHNcIixcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjYXRlZ29yaWVzXCIpLmluc2VydE1hbnkoZGVmYXVsdENhdGVnb3JpZXMpO1xuICAgIHJldHVybiBkZWZhdWx0Q2F0ZWdvcmllcztcbiAgfVxuXG4gIHJldHVybiBjYXRlZ29yaWVzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzYXZlQ2F0ZWdvcnkoY2F0ZWdvcnkpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG5cbiAgaWYgKGNhdGVnb3J5LmlkKSB7XG4gICAgLy8gVXBkYXRlIGV4aXN0aW5nIGNhdGVnb3J5XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIikudXBkYXRlT25lKFxuICAgICAgeyBpZDogTnVtYmVyKGNhdGVnb3J5LmlkKSB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgbmFtZTogY2F0ZWdvcnkubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogY2F0ZWdvcnkuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIHsgaWQ6IGNhdGVnb3J5LmlkLCAuLi5jYXRlZ29yeSB9O1xuICB9IGVsc2Uge1xuICAgIC8vIENyZWF0ZSBuZXcgY2F0ZWdvcnkgLSBmaW5kIG5leHQgYXZhaWxhYmxlIElEXG4gICAgY29uc3QgbGFzdENhdGVnb3J5ID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwiY2F0ZWdvcmllc1wiKVxuICAgICAgLmZpbmRPbmUoe30sIHsgc29ydDogeyBpZDogLTEgfSB9KTtcbiAgICBjb25zdCBuZXh0SWQgPSAobGFzdENhdGVnb3J5Py5pZCB8fCAwKSArIDE7XG5cbiAgICBjb25zdCBuZXdDYXRlZ29yeSA9IHtcbiAgICAgIGlkOiBuZXh0SWQsXG4gICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGNhdGVnb3J5LmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjYXRlZ29yaWVzXCIpLmluc2VydE9uZShuZXdDYXRlZ29yeSk7XG4gICAgcmV0dXJuIG5ld0NhdGVnb3J5O1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhdGVnb3J5KGlkKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxuICAgIC5jb2xsZWN0aW9uKFwiY2F0ZWdvcmllc1wiKVxuICAgIC5kZWxldGVPbmUoeyBpZDogTnVtYmVyKGlkKSB9KTtcbiAgcmV0dXJuIHJlc3VsdC5kZWxldGVkQ291bnQgPiAwO1xufVxuXG4vLyBDcmVkaXQgQWNjb3VudHMgaGVscGVyc1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q3JlZGl0QWNjb3VudHMoKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICBjb25zdCBjdXJzb3IgPSBkYlxuICAgIC5jb2xsZWN0aW9uKFwiY3JlZGl0QWNjb3VudHNcIilcbiAgICAuZmluZCh7fSlcbiAgICAuc29ydCh7IGxhc3RUcmFuc2FjdGlvbkRhdGU6IC0xIH0pO1xuICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XG4gIHJldHVybiBhY2NvdW50cy5tYXAoKGFjY291bnQpID0+ICh7XG4gICAgLi4uYWNjb3VudCxcbiAgICBpZDogYWNjb3VudC5faWQudG9TdHJpbmcoKSxcbiAgICBjcmVhdGVkQXQ6XG4gICAgICBhY2NvdW50LmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC5jcmVhdGVkQXQsXG4gICAgdXBkYXRlZEF0OlxuICAgICAgYWNjb3VudC51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlXG4gICAgICAgID8gYWNjb3VudC51cGRhdGVkQXQudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQudXBkYXRlZEF0LFxuICAgIGxhc3RUcmFuc2FjdGlvbkRhdGU6XG4gICAgICBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUgaW5zdGFuY2VvZiBEYXRlXG4gICAgICAgID8gYWNjb3VudC5sYXN0VHJhbnNhY3Rpb25EYXRlLnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUsXG4gIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3JlZGl0QWNjb3VudEJ5TmFtZShjdXN0b21lck5hbWUpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IGFjY291bnQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY3JlZGl0QWNjb3VudHNcIikuZmluZE9uZSh7XG4gICAgY3VzdG9tZXJOYW1lOiB7XG4gICAgICAkcmVnZXg6IG5ldyBSZWdFeHAoXG4gICAgICAgIFwiXlwiICsgY3VzdG9tZXJOYW1lLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKSArIFwiJFwiLFxuICAgICAgICBcImlcIlxuICAgICAgKSxcbiAgICB9LFxuICB9KTtcblxuICBpZiAoIWFjY291bnQpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgLi4uYWNjb3VudCxcbiAgICBpZDogYWNjb3VudC5faWQudG9TdHJpbmcoKSxcbiAgICBjcmVhdGVkQXQ6XG4gICAgICBhY2NvdW50LmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGVcbiAgICAgICAgPyBhY2NvdW50LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC5jcmVhdGVkQXQsXG4gICAgdXBkYXRlZEF0OlxuICAgICAgYWNjb3VudC51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlXG4gICAgICAgID8gYWNjb3VudC51cGRhdGVkQXQudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQudXBkYXRlZEF0LFxuICAgIGxhc3RUcmFuc2FjdGlvbkRhdGU6XG4gICAgICBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUgaW5zdGFuY2VvZiBEYXRlXG4gICAgICAgID8gYWNjb3VudC5sYXN0VHJhbnNhY3Rpb25EYXRlLnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50Lmxhc3RUcmFuc2FjdGlvbkRhdGUsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwc2VydENyZWRpdEFjY291bnQoYWNjb3VudERhdGEpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG4gIGNvbnN0IHsgT2JqZWN0SWQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGN1c3RvbWVyTmFtZSA9IGFjY291bnREYXRhLmN1c3RvbWVyTmFtZT8udHJpbSgpO1xuXG4gIGlmICghY3VzdG9tZXJOYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tZXIgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIC8vIEZpbmQgZXhpc3RpbmcgYWNjb3VudCAoY2FzZS1pbnNlbnNpdGl2ZSlcbiAgY29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgZGIuY29sbGVjdGlvbihcImNyZWRpdEFjY291bnRzXCIpLmZpbmRPbmUoe1xuICAgIGN1c3RvbWVyTmFtZToge1xuICAgICAgJHJlZ2V4OiBuZXcgUmVnRXhwKFxuICAgICAgICBcIl5cIiArIGN1c3RvbWVyTmFtZS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIikgKyBcIiRcIixcbiAgICAgICAgXCJpXCJcbiAgICAgICksXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKGV4aXN0aW5nQWNjb3VudCkge1xuICAgIC8vIFVwZGF0ZSBleGlzdGluZyBhY2NvdW50XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgIGJhbGFuY2U6IE51bWJlcihhY2NvdW50RGF0YS5iYWxhbmNlIHx8IGV4aXN0aW5nQWNjb3VudC5iYWxhbmNlIHx8IDApLFxuICAgICAgcGhvbmU6IGFjY291bnREYXRhLnBob25lIHx8IGV4aXN0aW5nQWNjb3VudC5waG9uZSB8fCBcIlwiLFxuICAgICAgZW1haWw6IGFjY291bnREYXRhLmVtYWlsIHx8IGV4aXN0aW5nQWNjb3VudC5lbWFpbCB8fCBcIlwiLFxuICAgICAgYWRkcmVzczogYWNjb3VudERhdGEuYWRkcmVzcyB8fCBleGlzdGluZ0FjY291bnQuYWRkcmVzcyB8fCBcIlwiLFxuICAgICAgbm90ZXM6IGFjY291bnREYXRhLm5vdGVzIHx8IGV4aXN0aW5nQWNjb3VudC5ub3RlcyB8fCBcIlwiLFxuICAgICAgaXNBY3RpdmU6XG4gICAgICAgIGFjY291bnREYXRhLmlzQWN0aXZlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGFjY291bnREYXRhLmlzQWN0aXZlXG4gICAgICAgICAgOiBleGlzdGluZ0FjY291bnQuaXNBY3RpdmUsXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICB9O1xuXG4gICAgLy8gVXBkYXRlIGxhc3QgdHJhbnNhY3Rpb24gZGF0ZSBpZiBwcm92aWRlZFxuICAgIGlmIChhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlKSB7XG4gICAgICB1cGRhdGVEYXRhLmxhc3RUcmFuc2FjdGlvbkRhdGUgPVxuICAgICAgICBhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICAgID8gYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZVxuICAgICAgICAgIDogbmV3IERhdGUoYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRyYW5zYWN0aW9uIGNvdW50IGlmIHByb3ZpZGVkXG4gICAgaWYgKGFjY291bnREYXRhLnRyYW5zYWN0aW9uQ291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS50cmFuc2FjdGlvbkNvdW50ID0gTnVtYmVyKGFjY291bnREYXRhLnRyYW5zYWN0aW9uQ291bnQpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcImNyZWRpdEFjY291bnRzXCIpXG4gICAgICAudXBkYXRlT25lKHsgX2lkOiBleGlzdGluZ0FjY291bnQuX2lkIH0sIHsgJHNldDogdXBkYXRlRGF0YSB9KTtcblxuICAgIGlmIChyZXN1bHQubW9kaWZpZWRDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRBY2NvdW50ID0gYXdhaXQgZGJcbiAgICAgICAgLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKVxuICAgICAgICAuZmluZE9uZSh7IF9pZDogZXhpc3RpbmdBY2NvdW50Ll9pZCB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnVwZGF0ZWRBY2NvdW50LFxuICAgICAgICBpZDogdXBkYXRlZEFjY291bnQuX2lkLnRvU3RyaW5nKCksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5leGlzdGluZ0FjY291bnQsXG4gICAgICBpZDogZXhpc3RpbmdBY2NvdW50Ll9pZC50b1N0cmluZygpLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gQ3JlYXRlIG5ldyBhY2NvdW50XG4gICAgY29uc3QgbmV3QWNjb3VudCA9IHtcbiAgICAgIGN1c3RvbWVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgYmFsYW5jZTogTnVtYmVyKGFjY291bnREYXRhLmJhbGFuY2UgfHwgMCksXG4gICAgICBwaG9uZTogYWNjb3VudERhdGEucGhvbmUgfHwgXCJcIixcbiAgICAgIGVtYWlsOiBhY2NvdW50RGF0YS5lbWFpbCB8fCBcIlwiLFxuICAgICAgYWRkcmVzczogYWNjb3VudERhdGEuYWRkcmVzcyB8fCBcIlwiLFxuICAgICAgbm90ZXM6IGFjY291bnREYXRhLm5vdGVzIHx8IFwiXCIsXG4gICAgICBpc0FjdGl2ZTpcbiAgICAgICAgYWNjb3VudERhdGEuaXNBY3RpdmUgIT09IHVuZGVmaW5lZCA/IGFjY291bnREYXRhLmlzQWN0aXZlIDogdHJ1ZSxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IE51bWJlcihhY2NvdW50RGF0YS50cmFuc2FjdGlvbkNvdW50IHx8IDApLFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgIGxhc3RUcmFuc2FjdGlvbkRhdGU6IGFjY291bnREYXRhLmxhc3RUcmFuc2FjdGlvbkRhdGVcbiAgICAgICAgPyBhY2NvdW50RGF0YS5sYXN0VHJhbnNhY3Rpb25EYXRlIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICAgID8gYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZVxuICAgICAgICAgIDogbmV3IERhdGUoYWNjb3VudERhdGEubGFzdFRyYW5zYWN0aW9uRGF0ZSlcbiAgICAgICAgOiBub3csXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjcmVkaXRBY2NvdW50c1wiKS5pbnNlcnRPbmUobmV3QWNjb3VudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ubmV3QWNjb3VudCxcbiAgICAgIGlkOiByZXN1bHQuaW5zZXJ0ZWRJZC50b1N0cmluZygpLFxuICAgIH07XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVG9DcmVkaXRBY2NvdW50KGN1c3RvbWVyTmFtZSwgYW1vdW50LCB0cmFuc2FjdGlvbklkID0gbnVsbCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcblxuICAvLyBHZXQgb3IgY3JlYXRlIGFjY291bnRcbiAgbGV0IGFjY291bnQgPSBhd2FpdCBnZXRDcmVkaXRBY2NvdW50QnlOYW1lKGN1c3RvbWVyTmFtZSk7XG5cbiAgaWYgKCFhY2NvdW50KSB7XG4gICAgLy8gQ3JlYXRlIG5ldyBhY2NvdW50IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBhY2NvdW50ID0gYXdhaXQgdXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgIGJhbGFuY2U6IGFtb3VudCxcbiAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IDEsXG4gICAgICBsYXN0VHJhbnNhY3Rpb25EYXRlOiBuZXcgRGF0ZSgpLFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIFVwZGF0ZSBleGlzdGluZyBhY2NvdW50XG4gICAgY29uc3QgbmV3QmFsYW5jZSA9IE51bWJlcihhY2NvdW50LmJhbGFuY2UgfHwgMCkgKyBOdW1iZXIoYW1vdW50KTtcbiAgICBjb25zdCBuZXdUcmFuc2FjdGlvbkNvdW50ID0gTnVtYmVyKGFjY291bnQudHJhbnNhY3Rpb25Db3VudCB8fCAwKSArIDE7XG5cbiAgICBhY2NvdW50ID0gYXdhaXQgdXBzZXJ0Q3JlZGl0QWNjb3VudCh7XG4gICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgIGJhbGFuY2U6IG5ld0JhbGFuY2UsXG4gICAgICB0cmFuc2FjdGlvbkNvdW50OiBuZXdUcmFuc2FjdGlvbkNvdW50LFxuICAgICAgbGFzdFRyYW5zYWN0aW9uRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIHBob25lOiBhY2NvdW50LnBob25lLFxuICAgICAgZW1haWw6IGFjY291bnQuZW1haWwsXG4gICAgICBhZGRyZXNzOiBhY2NvdW50LmFkZHJlc3MsXG4gICAgICBub3RlczogYWNjb3VudC5ub3RlcyxcbiAgICAgIGlzQWN0aXZlOiBhY2NvdW50LmlzQWN0aXZlLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGFjY291bnQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBheVRvQ3JlZGl0QWNjb3VudChjdXN0b21lck5hbWUsIHBheW1lbnRBbW91bnQpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG5cbiAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGdldENyZWRpdEFjY291bnRCeU5hbWUoY3VzdG9tZXJOYW1lKTtcbiAgaWYgKCFhY2NvdW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ3JlZGl0IGFjY291bnQgbm90IGZvdW5kXCIpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudEJhbGFuY2UgPSBOdW1iZXIoYWNjb3VudC5iYWxhbmNlIHx8IDApO1xuICBjb25zdCBwYXltZW50ID0gTnVtYmVyKHBheW1lbnRBbW91bnQpO1xuXG4gIGlmIChwYXltZW50ID4gY3VycmVudEJhbGFuY2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXltZW50IGFtb3VudCBleGNlZWRzIGFjY291bnQgYmFsYW5jZVwiKTtcbiAgfVxuXG4gIGNvbnN0IG5ld0JhbGFuY2UgPSBjdXJyZW50QmFsYW5jZSAtIHBheW1lbnQ7XG5cbiAgY29uc3QgdXBkYXRlZEFjY291bnQgPSBhd2FpdCB1cHNlcnRDcmVkaXRBY2NvdW50KHtcbiAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICBiYWxhbmNlOiBuZXdCYWxhbmNlLFxuICAgIHRyYW5zYWN0aW9uQ291bnQ6IGFjY291bnQudHJhbnNhY3Rpb25Db3VudCxcbiAgICBsYXN0VHJhbnNhY3Rpb25EYXRlOiBuZXcgRGF0ZSgpLFxuICAgIHBob25lOiBhY2NvdW50LnBob25lLFxuICAgIGVtYWlsOiBhY2NvdW50LmVtYWlsLFxuICAgIGFkZHJlc3M6IGFjY291bnQuYWRkcmVzcyxcbiAgICBub3RlczogYWNjb3VudC5ub3RlcyxcbiAgICBpc0FjdGl2ZTogYWNjb3VudC5pc0FjdGl2ZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi51cGRhdGVkQWNjb3VudCxcbiAgICBwYXltZW50QW1vdW50OiBwYXltZW50LFxuICAgIHByZXZpb3VzQmFsYW5jZTogY3VycmVudEJhbGFuY2UsXG4gICAgbmV3QmFsYW5jZTogbmV3QmFsYW5jZSxcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ3JlZGl0QWNjb3VudChpZCkge1xuICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgY29uc3QgeyBPYmplY3RJZCB9ID0gcmVxdWlyZShcIm1vbmdvZGJcIik7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBvYmplY3RJZCA9IG5ldyBPYmplY3RJZChpZCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwiY3JlZGl0QWNjb3VudHNcIilcbiAgICAgIC5kZWxldGVPbmUoeyBfaWQ6IG9iamVjdElkIH0pO1xuICAgIHJldHVybiByZXN1bHQuZGVsZXRlZENvdW50ID4gMDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY3JlZGl0IGFjY291bnQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ3JlZGl0QWNjb3VudHMoc2VhcmNoVGVybSwgaW5jbHVkZUluYWN0aXZlID0gZmFsc2UpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0KCk7XG5cbiAgY29uc3QgcXVlcnkgPSB7XG4gICAgY3VzdG9tZXJOYW1lOiB7ICRyZWdleDogc2VhcmNoVGVybSwgJG9wdGlvbnM6IFwiaVwiIH0sXG4gIH07XG5cbiAgaWYgKCFpbmNsdWRlSW5hY3RpdmUpIHtcbiAgICBxdWVyeS5pc0FjdGl2ZSA9IHsgJG5lOiBmYWxzZSB9O1xuICB9XG5cbiAgY29uc3QgY3Vyc29yID0gZGJcbiAgICAuY29sbGVjdGlvbihcImNyZWRpdEFjY291bnRzXCIpXG4gICAgLmZpbmQocXVlcnkpXG4gICAgLnNvcnQoeyBiYWxhbmNlOiAtMSwgbGFzdFRyYW5zYWN0aW9uRGF0ZTogLTEgfSk7XG4gIGNvbnN0IGFjY291bnRzID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcblxuICByZXR1cm4gYWNjb3VudHMubWFwKChhY2NvdW50KSA9PiAoe1xuICAgIC4uLmFjY291bnQsXG4gICAgaWQ6IGFjY291bnQuX2lkLnRvU3RyaW5nKCksXG4gICAgY3JlYXRlZEF0OlxuICAgICAgYWNjb3VudC5jcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlXG4gICAgICAgID8gYWNjb3VudC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKVxuICAgICAgICA6IGFjY291bnQuY3JlYXRlZEF0LFxuICAgIHVwZGF0ZWRBdDpcbiAgICAgIGFjY291bnQudXBkYXRlZEF0IGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICA/IGFjY291bnQudXBkYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICAgICAgOiBhY2NvdW50LnVwZGF0ZWRBdCxcbiAgICBsYXN0VHJhbnNhY3Rpb25EYXRlOlxuICAgICAgYWNjb3VudC5sYXN0VHJhbnNhY3Rpb25EYXRlIGluc3RhbmNlb2YgRGF0ZVxuICAgICAgICA/IGFjY291bnQubGFzdFRyYW5zYWN0aW9uRGF0ZS50b0lTT1N0cmluZygpXG4gICAgICAgIDogYWNjb3VudC5sYXN0VHJhbnNhY3Rpb25EYXRlLFxuICB9KSk7XG59XG5cbi8vIFRpbGwgQ291bnQgTWFuYWdlbWVudCBGdW5jdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRUaWxsKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICAgIGNvbnN0IHRpbGxDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcInRpbGxDb3VudHNcIik7XG5cbiAgICAvLyBGaW5kIHRoZSBtb3N0IHJlY2VudCBvcGVuIHRpbGwgKG5vIGVuZFRpbWUpXG4gICAgY29uc3QgY3VycmVudFRpbGwgPSBhd2FpdCB0aWxsQ29sbGVjdGlvbi5maW5kT25lKFxuICAgICAgeyBlbmRUaW1lOiBudWxsIH0sXG4gICAgICB7IHNvcnQ6IHsgc3RhcnRUaW1lOiAtMSB9IH1cbiAgICApO1xuXG4gICAgcmV0dXJuIGN1cnJlbnRUaWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGN1cnJlbnQgdGlsbDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRpbGxIaXN0b3J5KGxpbWl0ID0gMjApIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICBjb25zdCB0aWxsQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oXCJ0aWxsQ291bnRzXCIpO1xuXG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHRpbGxDb2xsZWN0aW9uXG4gICAgICAuZmluZCh7fSlcbiAgICAgIC5zb3J0KHsgc3RhcnRUaW1lOiAtMSB9KVxuICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBoaXN0b3J5O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHRpbGwgaGlzdG9yeTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0VGlsbCh0aWxsRGF0YSkge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICAgIGNvbnN0IHRpbGxDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcInRpbGxDb3VudHNcIik7XG5cbiAgICAvLyBHZW5lcmF0ZSBhIHNpbXBsZSBJRFxuICAgIGNvbnN0IGdlbmVyYXRlSWQgPSAoKSA9PlxuICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuXG4gICAgY29uc3QgdGlsbCA9IHtcbiAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICBzdGFydEFtb3VudDogdGlsbERhdGEuc3RhcnRBbW91bnQsXG4gICAgICBzdGFydFVzZXI6IHRpbGxEYXRhLnN0YXJ0VXNlcixcbiAgICAgIHN0YXJ0VGltZTogdGlsbERhdGEuc3RhcnRUaW1lLFxuICAgICAgc3RhcnREZW5vbWluYXRpb25zOiB0aWxsRGF0YS5zdGFydERlbm9taW5hdGlvbnMgfHwge30sXG4gICAgICBlbmRBbW91bnQ6IG51bGwsXG4gICAgICBlbmRVc2VyOiBudWxsLFxuICAgICAgZW5kVGltZTogbnVsbCxcbiAgICAgIGVuZERlbm9taW5hdGlvbnM6IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9O1xuXG4gICAgYXdhaXQgdGlsbENvbGxlY3Rpb24uaW5zZXJ0T25lKHRpbGwpO1xuICAgIHJldHVybiB0aWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzdGFydGluZyB0aWxsOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5kVGlsbCh0aWxsSWQsIGVuZERhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICBjb25zdCB0aWxsQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oXCJ0aWxsQ291bnRzXCIpO1xuXG4gICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgdGlsbENvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgeyBpZDogdGlsbElkIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBlbmRBbW91bnQ6IGVuZERhdGEuZW5kQW1vdW50LFxuICAgICAgICAgIGVuZFVzZXI6IGVuZERhdGEuZW5kVXNlcixcbiAgICAgICAgICBlbmRUaW1lOiBlbmREYXRhLmVuZFRpbWUsXG4gICAgICAgICAgZW5kRGVub21pbmF0aW9uczogZW5kRGF0YS5lbmREZW5vbWluYXRpb25zIHx8IHt9LFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAodXBkYXRlUmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGlsbCBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFRpbGwgPSBhd2FpdCB0aWxsQ29sbGVjdGlvbi5maW5kT25lKHsgaWQ6IHRpbGxJZCB9KTtcbiAgICByZXR1cm4gdXBkYXRlZFRpbGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuZGluZyB0aWxsOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gVmlzaXRlZCBJdGVtcyBNYW5hZ2VtZW50IEZ1bmN0aW9uc1xuYXN5bmMgZnVuY3Rpb24gZ2V0VmlzaXRlZEl0ZW1zKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICAgIGNvbnN0IHZpc2l0ZWRDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcInZpc2l0ZWRJdGVtc1wiKTtcblxuICAgIGNvbnN0IHZpc2l0ZWRJdGVtcyA9IGF3YWl0IHZpc2l0ZWRDb2xsZWN0aW9uLmZpbmQoe30pLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gdmlzaXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHZpc2l0ZWQgaXRlbXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZXRWaXNpdGVkSXRlbShpdGVtSWQsIHZpc2l0ZWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcbiAgICBjb25zdCB2aXNpdGVkQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oXCJ2aXNpdGVkSXRlbXNcIik7XG5cbiAgICBpZiAodmlzaXRlZCkge1xuICAgICAgLy8gQWRkIHRvIHZpc2l0ZWQgaXRlbXNcbiAgICAgIGF3YWl0IHZpc2l0ZWRDb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgeyBpdGVtSWQ6IE51bWJlcihpdGVtSWQpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICBpdGVtSWQ6IE51bWJlcihpdGVtSWQpLFxuICAgICAgICAgICAgdmlzaXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgdXBzZXJ0OiB0cnVlIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlbW92ZSBmcm9tIHZpc2l0ZWQgaXRlbXNcbiAgICAgIGF3YWl0IHZpc2l0ZWRDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IGl0ZW1JZDogTnVtYmVyKGl0ZW1JZCkgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZXR0aW5nIHZpc2l0ZWQgaXRlbTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNsZWFyQWxsVmlzaXRlZEl0ZW1zKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xuICAgIGNvbnN0IHZpc2l0ZWRDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcInZpc2l0ZWRJdGVtc1wiKTtcblxuICAgIGF3YWl0IHZpc2l0ZWRDb2xsZWN0aW9uLmRlbGV0ZU1hbnkoe30pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjbGVhcmluZyBhbGwgdmlzaXRlZCBpdGVtczpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25uZWN0LFxuICBnZXRBbGxJbnZlbnRvcnksXG4gIGdldEludmVudG9yeUJ5SWQsXG4gIHVwc2VydEludmVudG9yeUl0ZW1zLFxuICBkZWxldGVJbnZlbnRvcnlCeUlkLFxuICBnZXRVc2VycyxcbiAgZ2V0VXNlckJ5VXNlcm5hbWUsXG4gIHVwc2VydFVzZXIsXG4gIHJlcGxhY2VBbGxVc2VycyxcbiAgZGVsZXRlVXNlckJ5SWQsXG4gIHNhdmVUcmFuc2FjdGlvbixcbiAgZ2V0VHJhbnNhY3Rpb25zLFxuICBkZWxldGVUcmFuc2FjdGlvbixcbiAgZ2V0Q2F0ZWdvcmllcyxcbiAgc2F2ZUNhdGVnb3J5LFxuICBkZWxldGVDYXRlZ29yeSxcbiAgZ2V0Q3JlZGl0QWNjb3VudHMsXG4gIGdldENyZWRpdEFjY291bnRCeU5hbWUsXG4gIHVwc2VydENyZWRpdEFjY291bnQsXG4gIGFkZFRvQ3JlZGl0QWNjb3VudCxcbiAgcGF5VG9DcmVkaXRBY2NvdW50LFxuICBkZWxldGVDcmVkaXRBY2NvdW50LFxuICBzZWFyY2hDcmVkaXRBY2NvdW50cyxcbiAgZ2V0Q3VycmVudFRpbGwsXG4gIGdldFRpbGxIaXN0b3J5LFxuICBzdGFydFRpbGwsXG4gIGVuZFRpbGwsXG4gIGdldFZpc2l0ZWRJdGVtcyxcbiAgc2V0VmlzaXRlZEl0ZW0sXG4gIGNsZWFyQWxsVmlzaXRlZEl0ZW1zLFxufTtcbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInJlcXVpcmUiLCJ1cmwiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09fVVJJIiwiZGJOYW1lIiwiTU9OR09fREIiLCJfY2xpZW50IiwiX2RiIiwiY29ubmVjdCIsInVzZVVuaWZpZWRUb3BvbG9neSIsImRiIiwiY29sbGVjdGlvbiIsImNyZWF0ZUluZGV4IiwiaWQiLCJ1bmlxdWUiLCJzcGFyc2UiLCJ1c2VybmFtZSIsImUiLCJnZXRBbGxJbnZlbnRvcnkiLCJmaW5kIiwic29ydCIsIm5hbWUiLCJ0b0FycmF5IiwiZ2V0SW52ZW50b3J5QnlJZCIsIm4iLCJOdW1iZXIiLCJmaW5kT25lIiwidXBzZXJ0SW52ZW50b3J5SXRlbXMiLCJpdGVtcyIsIkFycmF5IiwiaXNBcnJheSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJvcHMiLCJtYXAiLCJpdCIsImluZGV4IiwiSlNPTiIsInN0cmluZ2lmeSIsIml0ZW1JZCIsInVuZGVmaW5lZCIsImlzTmFOIiwiZXJyb3IiLCJFcnJvciIsIm9iaiIsImNhdGVnb3J5IiwicHJpY2UiLCJzdG9jayIsImxvd1N0b2NrVGhyZXNob2xkIiwidGF4YWJsZSIsImJhcmNvZGUiLCJ0b1N0cmluZyIsImJhcmNvZGUyIiwicHJvZHVjdElkIiwiZmlsdGVyIiwidXBkYXRlT25lIiwidXBkYXRlIiwiJHNldCIsInVwc2VydCIsInJlc3VsdCIsImJ1bGtXcml0ZSIsImNvZGUiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJpIiwiaXRlbSIsIml0ZW1XaXRoVW5pcXVlUHJvZHVjdElkIiwiRGF0ZSIsIm5vdyIsImluZGl2aWR1YWxFcnJvciIsImRlbGV0ZUludmVudG9yeUJ5SWQiLCJkZWxldGVPbmUiLCJnZXRVc2VycyIsInVzZXJzIiwiZGVmYXVsdFVzZXJzIiwicHdkIiwicm9sZSIsImVtYWlsIiwiYWN0aXZlIiwicGVybWlzc2lvbnNfanNvbiIsImludmVudG9yeSIsInJlcG9ydHMiLCJwb3MiLCJ0cmFuc2FjdGlvbnMiLCJtYW5hZ2VVc2VycyIsIm1hbmFnZUludmVudG9yeSIsIm1hbmFnZVJlcG9ydHMiLCJtYW5hZ2VQT1MiLCJpbnNlcnRNYW55IiwibmV3VXNlcnMiLCJ1c2VyIiwicGFzc3dvcmQiLCJnZXRVc2VyQnlVc2VybmFtZSIsInVwc2VydFVzZXIiLCJib2R5IiwicGVybWlzc2lvbnMiLCJyZXBsYWNlQWxsVXNlcnMiLCJkZWxldGVNYW55IiwiZm9ybWF0dGVkVXNlcnMiLCJkZWxldGVVc2VyQnlJZCIsInNhdmVUcmFuc2FjdGlvbiIsInR4T2JqIiwicGF5bWVudEJyZWFrZG93biIsInBheW1lbnQiLCJ0cmFuc2FjdGlvblR5cGUiLCJjYXNoQW1vdW50IiwiY2FyZEFtb3VudCIsImNyZWRpdEFtb3VudCIsImhhc0xvdHRvIiwiZm9yRWFjaCIsImFtb3VudCIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwiZG9jIiwibGVnYWN5X2lkIiwidGltZXN0YW1wIiwic3VidG90YWwiLCJ0YXhhYmxlQW1vdW50Iiwibm9uVGF4YWJsZUFtb3VudCIsInRheCIsInRvdGFsIiwiY2FzaGJhY2siLCJjaGFuZ2UiLCJwcm9kdWN0X2lkIiwicXVhbnRpdHkiLCJhcHBseVRheCIsInJlcyIsImluc2VydE9uZSIsImluc2VydGVkSWQiLCJjdXIiLCJuZXdTdG9jayIsImdldFRyYW5zYWN0aW9ucyIsImxpbWl0IiwiY3Vyc29yIiwiX2lkIiwicm93cyIsInIiLCJ0b0lTT1N0cmluZyIsImRlbGV0ZVRyYW5zYWN0aW9uIiwiT2JqZWN0SWQiLCJvYmplY3RJZCIsImRlbGV0ZWRDb3VudCIsImdldENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwiZGVmYXVsdENhdGVnb3JpZXMiLCJkZXNjcmlwdGlvbiIsInNhdmVDYXRlZ29yeSIsInVwZGF0ZWRBdCIsImxhc3RDYXRlZ29yeSIsIm5leHRJZCIsIm5ld0NhdGVnb3J5IiwiY3JlYXRlZEF0IiwiZGVsZXRlQ2F0ZWdvcnkiLCJnZXRDcmVkaXRBY2NvdW50cyIsImxhc3RUcmFuc2FjdGlvbkRhdGUiLCJhY2NvdW50cyIsImFjY291bnQiLCJnZXRDcmVkaXRBY2NvdW50QnlOYW1lIiwiY3VzdG9tZXJOYW1lIiwiJHJlZ2V4IiwiUmVnRXhwIiwicmVwbGFjZSIsInVwc2VydENyZWRpdEFjY291bnQiLCJhY2NvdW50RGF0YSIsInRyaW0iLCJleGlzdGluZ0FjY291bnQiLCJ1cGRhdGVEYXRhIiwiYmFsYW5jZSIsInBob25lIiwiYWRkcmVzcyIsIm5vdGVzIiwiaXNBY3RpdmUiLCJ0cmFuc2FjdGlvbkNvdW50IiwibW9kaWZpZWRDb3VudCIsInVwZGF0ZWRBY2NvdW50IiwibmV3QWNjb3VudCIsImFkZFRvQ3JlZGl0QWNjb3VudCIsInRyYW5zYWN0aW9uSWQiLCJuZXdCYWxhbmNlIiwibmV3VHJhbnNhY3Rpb25Db3VudCIsInBheVRvQ3JlZGl0QWNjb3VudCIsInBheW1lbnRBbW91bnQiLCJjdXJyZW50QmFsYW5jZSIsInByZXZpb3VzQmFsYW5jZSIsImRlbGV0ZUNyZWRpdEFjY291bnQiLCJzZWFyY2hDcmVkaXRBY2NvdW50cyIsInNlYXJjaFRlcm0iLCJpbmNsdWRlSW5hY3RpdmUiLCJxdWVyeSIsIiRvcHRpb25zIiwiJG5lIiwiZ2V0Q3VycmVudFRpbGwiLCJ0aWxsQ29sbGVjdGlvbiIsImN1cnJlbnRUaWxsIiwiZW5kVGltZSIsInN0YXJ0VGltZSIsImdldFRpbGxIaXN0b3J5IiwiaGlzdG9yeSIsInN0YXJ0VGlsbCIsInRpbGxEYXRhIiwiZ2VuZXJhdGVJZCIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHIiLCJ0aWxsIiwic3RhcnRBbW91bnQiLCJzdGFydFVzZXIiLCJzdGFydERlbm9taW5hdGlvbnMiLCJlbmRBbW91bnQiLCJlbmRVc2VyIiwiZW5kRGVub21pbmF0aW9ucyIsImVuZFRpbGwiLCJ0aWxsSWQiLCJlbmREYXRhIiwidXBkYXRlUmVzdWx0IiwibWF0Y2hlZENvdW50IiwidXBkYXRlZFRpbGwiLCJnZXRWaXNpdGVkSXRlbXMiLCJ2aXNpdGVkQ29sbGVjdGlvbiIsInZpc2l0ZWRJdGVtcyIsInNldFZpc2l0ZWRJdGVtIiwidmlzaXRlZCIsInZpc2l0ZWRBdCIsImNsZWFyQWxsVmlzaXRlZEl0ZW1zIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./server/mongo.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finventory%2Froute&page=%2Fapi%2Finventory%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finventory%2Froute.js&appDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fharmeetsingh%2FDocuments%2Fharmeet24singhGIT%2FgptPOS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();